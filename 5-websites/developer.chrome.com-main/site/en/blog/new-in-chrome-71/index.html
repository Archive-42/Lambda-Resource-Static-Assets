<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2018-12-04" />
  <title>New in Chrome 71</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 71</h1>
<p class="date">2018-12-04</p>
</header>
<p>{% YouTube id=‘SkIgtVvAR6w’ %}</p>
<p>In Chrome 71, we’ve added support for:</p>
<ul>
<li>Displaying <a href="#relative-times">relative times</a> is now part of the <code>Intl</code> API.</li>
<li>Specifying <a href="#underline">which side of the text the underline should appear</a> on for text that flows vertically.</li>
<li>Requiring <a href="#speech-activation">user activation</a> before using the speech synthesis API.</li>
</ul>
<p>And there’s <a href="#more">plenty more</a>!</p>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>. Let’s dive in and see what’s new for developers in Chrome 71!</p>
<h2 id="change-log">Change log</h2>
<p>This covers only some of the key highlights, check the links below for additional changes in Chrome 71.</p>
<ul>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/70.0.3538.66..71.0.3578.82">Chromium source repository change list</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D71">ChromeStatus.com updates for Chrome 71</a></li>
<li><a href="https://developers.google.com/web/updates/2018/10/chrome-71-deps-rems">Chrome 71 deprecations &amp; removals</a></li>
</ul>
<h2 id="display-relative-times-with-intl.relativetimeformat-relative-times">Display relative times with <code>Intl.RelativeTimeFormat()</code> {: #relative-times }</h2>
<figure class="float-right">
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/FVgovCvB89Sbz4csuwhM.jpg”, alt="“, height=”353“, width=”591" %}
<figcaption>
Twitter showing relative time for latest post
</figcaption>
</figure>
<p>Many web apps use phrases like “yesterday”, “in two days”, or “an hour ago” to indicate when something happened - or is going to happen, instead of displaying the full date and time.</p>
<p>Displaying relative times has become so common that most of the common date/time libraries provide localized functions to handle this for us. In fact, almost every web app I build, <a href="https://momentjs.com/">Moment JS</a> is one of the first libraries I add, expressly for this purpose.</p>
<p>Chrome 71 introduces <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl.RelativeTimeFormat"><code>Intl.RelativeTimeFormat()</code></a>, which shifts the work to the JavaScript engine, and enables localized formatting of relative times. This gives us a small performance boost, and means we only need those libraries as a polyfill when a browser doesn’t support the new APIs yet.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> rtf <span class="op">=</span> <span class="kw">new</span> <span class="va">Intl</span>.<span class="at">RelativeTimeFormat</span>(<span class="st">&#39;en&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="va">rtf</span>.<span class="at">format</span>(<span class="fl">3.14</span><span class="op">,</span> <span class="st">&#39;second&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">// → &#39;in 3.14 seconds&#39;</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="va">rtf</span>.<span class="at">format</span>(<span class="op">-</span><span class="dv">15</span><span class="op">,</span> <span class="st">&#39;minute&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">// → &#39;15 minutes ago&#39;</span></a></code></pre></div>
<p>Using it is simple, create a new instance and specify the locale, then just call format with the relative time. Check out Mathias’ <a href="https://developers.google.com/web/updates/2018/10/intl-relativetimeformat">The <code>Intl.RelativeTimeFormat API</code></a> post for full details.</p>
<h2 id="specifying-underline-location-for-vertical-text-underline">Specifying underline location for vertical text {: #underline }</h2>
<figure class="float-right">
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/jboAMumW8Pu2fdCF3FRk.png”, alt="“, height=”315“, width=”268" %}
<figcaption>
Vertical text with inconsistent underlines
</figcaption>
</figure>
<p>When Chinese or Japanese text is displayed in a <a href="https://underlined-vertical-text.glitch.me">vertical flow</a>, browsers are inconsistent with where the underline is placed, it may be on the left, or on the right.</p>
<p>In Chrome 71, the <code>text-underline-position</code> property now accepts <code>left</code> or <code>right</code> as part of the CSS3 text decoration spec. The <a href="https://www.w3.org/TR/css-text-decor-3/">CSS3 text decoration spec</a> adds several new properties that allow use to specify things like what kind of <a href="https://www.w3.org/TR/css-text-decor-3/#text-decoration-style-property">line</a> to use, the <a href="https://www.w3.org/TR/css-text-decor-3/#text-decoration-style-property">style</a>, <a href="https://www.w3.org/TR/css-text-decor-3/#text-decoration-color-property">color</a>, and <a href="https://www.w3.org/TR/css-text-decor-3/#text-underline-position-property">position</a>.</p>
<p><br style="clear: both;"></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">.left</span> {</a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="kw">text-underline-position</span>: <span class="dv">left</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">}</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="fu">.right</span> {</a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="kw">text-underline-position</span>: <span class="dv">right</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-7" title="7">}</a></code></pre></div>
<h2 id="speech-synthesis-requires-user-activation-named-workers">Speech synthesis requires user activation {: #named-workers }</h2>
<p>We’ve all been surprised when we hit a site and it suddenly starts talking to us. <a href="https://developers.google.com/web/updates/2018/11/web-audio-autoplay">Autoplay policies</a> prevent sites from automatically playing playing audio, or video files with audio. Some sites have tried to get around this by using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis">speech synthesis API</a> instead.</p>
<p>Starting in Chrome 71, the speech synthesis API now requires some kind of user activation on the page before it’ll work. This brings it in line with other <a href="https://developers.google.com/web/updates/2018/11/web-audio-autoplay">autoplay policies</a>. If you try to use it before the user has interacted with the page, it will fire an error.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> utterance <span class="op">=</span> <span class="kw">new</span> <span class="va">window</span>.<span class="at">SpeechSynthesisUtterance</span>(<span class="st">&#39;Hello&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">utterance</span>.<span class="at">lang</span> <span class="op">=</span> lang <span class="op">||</span> <span class="st">&#39;en-US&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="va">window</span>.<span class="va">speechSynthesis</span>.<span class="at">speak</span>(utterance)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="op">}</span> <span class="cf">catch</span> (ex) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;speechSynthesis not available&#39;</span><span class="op">,</span> ex)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>{% Aside %} To make sure your code works, I recommend wrapping your speech synthesis call in a <code>try</code>/<code>catch</code> block, so if the page isn’t activated, it won’t break the rest of your app. {% endAside %}</p>
<p>There’s nothing worse than going to a site and having it surprise you, and the co-workers sitting around you.</p>
<h2 id="and-more-more">And more! {: #more }</h2>
<p>These are just a few of the changes in Chrome 71 for developers, of course, there’s plenty more.</p>
<ul>
<li>The <code>Element.requestFullscreen()</code> method can now be <a href="https://www.chromestatus.com/feature/5188650908254208">customized on Android</a> and allows you to choose between making the navigation bar visible versus a completely immersive mode where no user agent controls are shown until a user gesture is performed.</li>
<li>The <a href="https://www.chromestatus.com/feature/6710957388595200">default credentials mode for module script requests</a>, has changed from <code>omit</code> to <code>same-origin</code>.</li>
<li>And bringing Chrome inline with the <a href="https://w3c.github.io/webcomponents/spec/shadow/">Shadow DOM v1 spec</a>, Chrome 71 now calculates the specificity for the <code>:host()</code> and <code>:host-context()</code> pseudo classes as well as for the arguments for <code>::slotted()</code>.</li>
</ul>
<h2 id="chrome-devsummit-videos">Chrome DevSummit Videos</h2>
<p>If you didn’t make it to Chrome Dev Summit, or maybe you did, but didn’t see all the talks, check out the <a href="https://www.youtube.com/playlist?list=PLNYkxOF6rcIDjlCx1PcphPpmf43aKOAdF">Chrome Dev Summit 2018 playlist</a> on our YouTube channel.</p>
<p>{% YouTube id=“25aCD5XL1Jk”%}</p>
<p>Eva and Phil went into some neat techniques for using service workers in <a href="https://www.youtube.com/watch?v=25aCD5XL1Jk&amp;t=0s&amp;index=9&amp;list=PLNYkxOF6rcIDjlCx1PcphPpmf43aKOAdF">Building Faster, More Resilient Apps with Service Workers</a>.</p>
<p>{% YouTube id=“ipNW6lJHVEs”%}</p>
<p>Mariko and Jake talked about how they build <a href="https://squoosh.app/">Squoosh</a> in <a href="https://www.youtube.com/watch?v=ipNW6lJHVEs&amp;t=104s&amp;index=11&amp;list=PLNYkxOF6rcIDjlCx1PcphPpmf43aKOAdF">Complex JS-heavy Web Apps, Avoiding the Slow</a>.</p>
<p>{% YouTube id=“reztLS3vomE”%}</p>
<p>Katie and Houssein covered some great techniques to maximize the performance of your site in <a href="https://www.youtube.com/watch?v=reztLS3vomE&amp;t=1s&amp;index=8&amp;list=PLNYkxOF6rcIDjlCx1PcphPpmf43aKOAdF">Speed Essentials: Key Techniques for Fast Websites</a>.</p>
<p>{% YouTube id=“CbU9GzgS0HY” %}</p>
<p>Jake <strong>dropped</strong> the cake. And there are plenty of other great videos in the <a href="https://www.youtube.com/playlist?list=PLNYkxOF6rcIDjlCx1PcphPpmf43aKOAdF">Chrome DevSummit 2018 playlist</a>, so check them out.</p>
<h3 id="subscribe">Subscribe</h3>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and as soon as Chrome 72 is released, I’ll be right here to tell you – what’s new in Chrome!</p>
</body>
</html>
