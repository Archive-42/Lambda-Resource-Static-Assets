<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2020-08-25" />
  <title>New in Chrome 85</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 85</h1>
<p class="date">2020-08-25</p>
</header>
<p>Chrome 85 is starting to roll out to stable now.</p>
<p>{% YouTube id=‘htAiPOarIwI’ %}</p>
<p>Here’s what you need to know:</p>
<ul>
<li>You can improve rendering performance with <a href="#content-visibility"><code>content-visibility: auto</code></a>.</li>
<li><a href="#css-properties">CSS properties</a> can now be set… <strong>in CSS</strong>.</li>
<li>You can now check if your Windows app or PWA is installed with <a href="#gira"><code>getInstalledRelatedApps()</code></a>.</li>
<li><a href="#app-shortcuts">App icon shortcuts</a> work on Windows too (for real this time).</li>
<li>An origin trial for <a href="#fetch-stream"><code>fetch</code> upload streaming</a> has started.</li>
<li>And <a href="#more">more</a>.</li>
</ul>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>, working and shooting from home, let’s dive in and see what’s new for developers in Chrome 85!</p>
<h2 id="content-visibility-content-visibility">Content Visibility {: #content-visibility }</h2>
<figure class="float-right">
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/aPo72AQPvTn4s9kdI7Cm.png”, alt="“, height=”408“, width=”800" %}
<figcaption>
Browsers rendering process
</figcaption>
</figure>
<p>Turning your HTML into something the user can see, requires the browser to go through a number of steps before it can even paint the first pixel. And it does it for the whole page, even for content that isn’t visible in the viewport.</p>
<p>Applying <code>content-visibility: auto</code> to an element, tells the browser that it can skip the rendering work for that element until it scrolls into the viewport, providing a faster initial render.</p>
<p><br style="clear:both;"></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">.my-class</span> {</a>
<a class="sourceLine" id="cb1-2" title="2">  content-visibility: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3">}</a></code></pre></div>
<p>To get the most impact out of <code>content-visibility</code>, apply it to parent sections with more complex layout algorithms, like <code>flexbox</code>, and <code>grid</code>, or that have children with contained layouts of their own.</p>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/liWPW8kNA0dsiJGv28rg.jpg”, alt="“, height=”554“, width=”800" %}</p>
<p>By chunking content and adding <code>content-visibility: auto;</code>, this page went from a rendering time of 232ms to only 30ms.</p>
<p>Check out the <a href="https://web.dev/content-visibility/">content visibility</a> to see how you can use it to improve your rendering performance.</p>
<h2 id="property-and-css-variables-css-properties"><code>@property</code> and CSS variables {: #css-properties }</h2>
<p>CSS variables, technically called custom properties, are awesome. With the Houdini CSS Properties and Values API, you can define a type and default fallback value for your custom properties. I previously covered them in <a href="https://developers.google.com/web/updates/2019/10/nic78">New in Chrome 78</a>, when we added support for defining them in JavaScript.</p>
<p>Starting in Chrome 85, you can also define and set CSS properties directly in your CSS. What I love about CSS Properties - is that it gives the property semantic meaning, fallback values, and even enables CSS testing.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb2-1" title="1"><span class="im">@property</span> --colorPrimary {</a>
<a class="sourceLine" id="cb2-2" title="2">  syntax: <span class="st">&#39;&lt;color&gt;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">  initial-value: <span class="cn">magenta</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4">  inherits: false<span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" title="5">}</a></code></pre></div>
<p>Una has a great post <a href="https://web.dev/at-property/"><code>@property</code>: giving superpowers to CSS variables</a> that shows you how you can use them.</p>
<h2 id="get-installed-related-apps-gira">Get installed related apps {: #gira }</h2>
<p>The <code>getInstalledRelatedApps()</code> API makes it possible for <em>you</em> to check if <em>your</em> app is installed, then, customize the user experience.</p>
<p>For example, show different content to the user on a landing page if your app is already installed. Centralize overlapping functionality in one app to prevent confusion. Or, if your native app is already installed, don’t promote the installation of your PWA.</p>
<p>When it first shipped in <a href="https://developers.google.com/web/updates/2020/02/nic80">Chrome 80</a>, it only worked for Android apps. Now, on Android, it can also check if your PWA is installed. <strong>And</strong> on Windows, it can check if your Windows UWP app is installed.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> relatedApps <span class="op">=</span> <span class="cf">await</span> <span class="va">navigator</span>.<span class="at">getInstalledRelatedApps</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">relatedApps</span>.<span class="at">forEach</span>((app) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">app</span>.<span class="at">id</span><span class="op">,</span> <span class="va">app</span>.<span class="at">platform</span><span class="op">,</span> <span class="va">app</span>.<span class="at">url</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Check out my article <a href="https://web.dev/get-installed-related-apps/">Is your app installed? <code>getInstalledRelatedApps()</code> will tell you!</a> on web.dev to see how it works, and how to sign your apps to prove they’re yours.</p>
<h2 id="app-icon-shortcuts-app-shortcuts">App Icon Shortcuts {: #app-shortcuts }</h2>
<figure class="float-right">
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/9zcJuaBsNnskaZByurvY.png”, alt="“, height=”420“, width=”800" %}
<figcaption>
App icon shortcut on Windows
</figcaption>
</figure>
<p>In Chrome 84, we added support for App Icon Shortcuts. I accidentally said they were available everywhere, but they were only available on Android. Now, in Chrome 85, they’re available on <strong>Android</strong> and <strong>Windows</strong>, and in both Chrome and Edge.</p>
<p><br style="clear:both;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb4-1" title="1"><span class="er">&quot;shortcuts&quot;:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="fu">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Open Play Later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="dt">&quot;short_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Play Later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;View the list you saved for later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/play-later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="dt">&quot;icons&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb4-8" title="8">      <span class="fu">{</span> <span class="dt">&quot;src&quot;</span><span class="fu">:</span> <span class="st">&quot;//play-later.png&quot;</span><span class="fu">,</span> <span class="dt">&quot;sizes&quot;</span><span class="fu">:</span> <span class="st">&quot;192x192&quot;</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb4-9" title="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="ot">]</span></a></code></pre></div>
<p>Check out the <a href="https://web.dev/app-shortcuts/">App Icon Shortcuts</a> article on web.dev for complete details, and I’m sorry for the confusion I caused.</p>
<h2 id="origin-trial-streaming-requests-with-fetch-fetch-stream">Origin Trial: Streaming requests with <code>fetch()</code> {: #fetch-stream }</h2>
<p>Starting in Chrome 85, <code>fetch</code> upload streaming is available as an origin trial. It lets you start a fetch before the request body is ready. Previously, you could only start a request once you had the whole body ready to go. But now, you can start sending content, even while you’re still generating it.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> <span class="op">{</span> readable<span class="op">,</span> writable <span class="op">}</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">TransformStream</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">const</span> responsePromise <span class="op">=</span> <span class="at">fetch</span>(url<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">body</span><span class="op">:</span> readable<span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>For example, use it to warm up the server, or stream audio or video as it’s captured from the microphone or camera.</p>
<p>Jake has an in-depth look in <a href="https://web.dev/fetch-upload-streaming/">Streaming requests with the fetch API</a> on web.dev, and also covered it in the latest <a href="https://www.youtube.com/watch?v=G9PpImUEeUA">HTTP203 - Streaming requests with fetch</a> video.</p>
<h2 id="and-more-more">And more {: #more }</h2>
<p>Of course, there’s plenty more.</p>
<p><code>Promise.any</code> returns a promise that is fulfilled by the first given promise to be fulfilled or rejected.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="kw">const</span> first <span class="op">=</span> <span class="cf">await</span> <span class="va">Promise</span>.<span class="at">any</span>(arrayOfPromises)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(first)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">error</span>.<span class="at">errors</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Replacing all instances in a string is easier with <code>.replaceAll()</code>, no more regular expressions!</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> myName <span class="op">=</span> <span class="st">&#39;My name is Bond, James Bond.&#39;</span></a>
<a class="sourceLine" id="cb7-2" title="2">    .<span class="at">replaceAll</span>(<span class="st">&#39;Bond&#39;</span><span class="op">,</span> <span class="st">&#39;Powers&#39;</span>)</a>
<a class="sourceLine" id="cb7-3" title="3">    .<span class="at">replace</span>(<span class="st">&#39;James&#39;</span><span class="op">,</span> <span class="st">&#39;Austin&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="va">console</span>.<span class="at">log</span>(myName)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">// My name is Powers, Austin Powers.</span></a></code></pre></div>
<p>Chrome 85 adds decode support for <a href="https://aomediacodec.github.io/av1-avif/">AVIF</a>, an image format encoded with AV1 and standardized by the <a href="http://aomedia.org/">Alliance for Open Media</a>. AVIF offers significant compression gains vs. JPEG and WebP, with a recent <a href="https://netflixtechblog.com/avif-for-next-generation-image-coding-b1d75675fe4">Netflix study</a> showing 50% savings vs. standard JPEG and &gt; 60% savings on 4:4:4 content.</p>
<p>And <a href="https://web.dev/appcache-removal/">AppCache removal has begun</a>.</p>
<h2 id="further-reading">Further reading</h2>
<p>This covers only some of the key highlights. Check the links below for additional changes in Chrome 85.</p>
<ul>
<li><a href="/blog/new-in-devtools-85">What’s new in Chrome DevTools (85)</a></li>
<li><a href="https://developers.google.com/web/updates/2020/07/chrome-85-deps-rems">Chrome 85 deprecations &amp; removals</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D85">ChromeStatus.com updates for Chrome 85</a></li>
<li><a href="https://v8.dev/blog/v8-release-85">What’s new in JavaScript in Chrome 85</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/84.0.4147.92..85.0.4183.85">Chromium source repository change list</a></li>
</ul>
<h2 id="subscribe">Subscribe</h2>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and I finally <strong>got</strong> a hair cut!</p>
<p>As soon as Chrome 86 is released, I’ll be right here to tell you – what’s new in Chrome!</p>
</body>
</html>
