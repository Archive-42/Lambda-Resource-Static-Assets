<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2021-03-02" />
  <title>New in Chrome 89</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 89</h1>
<p class="date">2021-03-02</p>
</header>
<p>Chrome 89 is starting to roll out to stable now.</p>
<p>{% YouTube id=‘O-gv6zLZHKw’ %}</p>
<p>Here’s what you need to know:</p>
<ul>
<li><a href="#hardware">WebHID, WebNFC, and Web Serial</a> have graduated from their origin trials and are now available in stable.</li>
<li>We’re closing a loophole a few developers used to skirt the <a href="#installability">PWA installability checks</a>.</li>
<li><a href="#webshare">Web Share, and Web Share Target</a> arrive on the desktop.</li>
<li>And, there’s <a href="#more">plenty more</a>.</li>
</ul>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>, working, and shooting from home, let’s dive in and see what’s new for developers in Chrome 89!</p>
<h2 id="webhid-webnfc-and-web-serial-hardware">WebHID, WebNFC, and Web Serial {: #hardware }</h2>
<p>I’m really excited about WebHID, WebNFC, and Web Serial. They open up new scenarios for users that were never possible before, interacting with real world hardware.</p>
<p>They allow makers to connect to fun, quirky hardware, video conferencing apps to use the dedicated telephony buttons on specialized speakers. Or any number of other use cases.</p>
<p>{% Video className=“float-right”, autoplay=“true”, muted=“true”, loop=“true”, src=“video/0g2WvpbGRGdVs0aAPc6ObG7gkud2/g8VCbIMljnxuemDFxl99.mp4” %}</p>
<p>Using Web Serial, and <a href="https://glitch.com/edit/#!/viridian-receptive-rugby?path=index.html%3A91%3A3">about 60 lines of code</a>, <span class="citation" data-cites="AndreBan">[@AndreBan]</span><a href="https://twitter.com/andreban/status/1355212228618813440">andre-tweet</a> created a <a href="https://viridian-receptive-rugby.glitch.me/">page</a> that can interact with the MicroPython REPL on a <a href="https://www.raspberrypi.org/products/raspberry-pi-pico/">Raspberry Pi Pico</a>. Web Serial is also used by Espruino in their <a href="https://www.espruino.com/ide/">web based IDE</a>.</p>
<p>At CDS 2019, Francois wrote a fun, memory-style game using Web NFC. You had to tap the phone to the right card, in the right order.</p>
<div style="clear:both;">

</div>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/VAuLti7I9ZQCwLUEWF5Y.png”, className=“float-right”, alt=“StreamDeck with Daft Punk Drum Pad”, width=“800”, height=“536” %}</p>
<p>And my favorite, <span class="citation" data-cites="bramus">[@bramus]</span><a href="https://twitter.com/bramus/status/1360005151394832388">bramus-tweet</a> used WebHID to connect to a StreamDeck, building a <a href="https://webhid-elgato-stream-deck-daft-punk-soundboard.netlify.app/">Daft Punk drum pad</a>. If you don’t have a StreamDeck, check out his <a href="https://www.youtube.com/watch?v=BcRyAlT5xtg">demo video</a> on YouTube, and check out the <a href="https://github.com/bramus/webhid-elgato-stream-deck-daft-punk-soundboard">code on GitHub</a>.</p>
<p>Whether it’s your site that interacts with your hardware, or your hardware that can interact with lots of sites, users win because they don’t need to install special drivers, or software.</p>
<p>You can learn more about some of the devices you can connect to at <a href="https://web.dev/devices/">web.dev/devices</a>, or check out the getting started guides for <a href="https://web.dev/hid/">WebHID</a>, <a href="https://web.dev/nfc/">WebNFC</a>, and <a href="https://web.dev/serial/">Web Serial</a>.</p>
<h2 id="pwa-installability-criteria-changes-installability">PWA installability criteria changes {: #installability }</h2>
<p>Offline support has been a key part of the Progressive Web App criteria for installability since the beginning. As with other installed app, users expect it to work reliably. It should be fast, and, they should never see the offline dino!</p>
<p>Later this year, we plan to close a loophole that allowed a few sites to pass the installability criteria, without an offline experience. <strong>If your PWA already has an offline experience, you’re all set. There’s no action required, but, if you don’t, it’s time to add one!</strong></p>
<p>Starting in Chrome 89, if your PWA doesn’t provide a valid response when offline, you’ll see a warning in DevTools under the Issues tab, and Lighthouse will indicate there’s an issue. And, enforcement will start in Chrome 93, later this year.</p>
<figure>
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/qQHA9CJQrYX6w9FY9P6T.png”, alt=“DevTools showing warning message in Console.”, width=“800”, height=“100” %}
<figcaption>
Warning message in the Chrome DevTools Console.
</figcaption>
</figure>
<figure>
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/On0AEdm2u9EZUuI3NIVv.png”, alt=“DevTools showing warning message in Application tab.”, width=“800”, height=“170” %}
<figcaption>
Warning message in Application tab &gt; Manifest &gt; Installability.
</figcaption>
</figure>
<p>You can decide what kind of offline experience you want to provide. Ideally, you should provide as much of your experience as possible. But, at a minimum, it can be as simple as an <a href="https://web.dev/offline-fallback-page/">offline fallback page</a>.</p>
<p>You can find more details about the change, and why we’re making it in <a href="/blog/improved-pwa-offline-detection/">Improving Progressive Web App offline support detection</a>.</p>
<p>If you’re not sure where to get started, check out <a href="https://developers.google.com/web/tools/workbox">Workbox</a>. It has a set of libraries that can power a production-ready service worker for your PWA. Or, for a simple offline fallback page, the article <a href="https://web.dev/offline-fallback-page/">Create an offline fallback page</a> has all the code you need, and you can copy and paste directly in to your site.</p>
<h2 id="web-share-and-web-share-target-for-desktop-webshare">Web Share and Web Share Target for Desktop {: #webshare }</h2>
<p>{% Video className=“float-right”, autoplay=“true”, muted=“true”, loop=“true”, src=[“video/0g2WvpbGRGdVs0aAPc6ObG7gkud2/0vmJ4uVRmhkufMBsNrEO.webm”,“video/0g2WvpbGRGdVs0aAPc6ObG7gkud2/8rZz40MCN1qTifH2FHqG.mp4”] %}</p>
<p>If your site allows users to create, edit, or interact with files, you should be using the Web Share and Web Share Target APIs. These APIs have been available on mobile for some time but are now supported on Chrome OS and Windows.</p>
<p>Web Share makes it possible for users to send files or data to other installed apps on their device, for example, sharing a photo from Google Photos to Twitter.</p>
<div style="clear:both;">

</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">share</span>(title<span class="op">,</span> text<span class="op">,</span> url) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="cf">await</span> <span class="va">navigator</span>.<span class="at">share</span>(<span class="op">{</span>title<span class="op">,</span> text<span class="op">,</span> url<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="op">}</span> <span class="cf">catch</span> (ex) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="va">console</span>.<span class="at">error</span>(<span class="st">&#39;Share failed&#39;</span><span class="op">,</span> ex)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>To register as a target so other apps can share files or data with you, you’ll want to use the Web Share Target API.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb2-1" title="1"><span class="er">&quot;share_target&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">&quot;action&quot;</span><span class="fu">:</span> <span class="st">&quot;/?share-target&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;POST&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">&quot;enctype&quot;</span><span class="fu">:</span> <span class="st">&quot;multipart/form-data&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">&quot;params&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="dt">&quot;files&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb2-7" title="7">      <span class="fu">{</span></a>
<a class="sourceLine" id="cb2-8" title="8">        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;file&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-9" title="9">        <span class="dt">&quot;accept&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;image/*&quot;</span><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-10" title="10">      <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="fu">},</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="fu">}</span><span class="er">,</span></a></code></pre></div>
<p>Check <a href="https://web.dev/web-share/">Integrate with the OS sharing UI with the Web Share API</a> and <a href="https://web.dev/web-share-target/">Receiving shared data with the Web Share Target API</a> for getting started guides.</p>
<h2 id="and-more-more">And more {: #more }</h2>
<p>And of course there’s plenty more.</p>
<p>Chrome now allows top level <code>await</code> within JavaScript modules.</p>
<p>{% Img className=“float-right”, src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/Yqyikwd9xFsj6jqnhYar.png”, alt=“New omnibox install icon for PWAs”, width=“380”, height=“180” %}</p>
<p>To reduce confusion for users, we’ve updated the icon shown in the omnibox for installable PWAs.</p>
<p><br style="clear:both;"></p>
<p>And, if you’ve used a Trusted Web Activity to make your PWA available in the Play Store for Chrome OS, you can sign up for the <a href="/blog/new-in-chrome-88/#play-billing">Digital Goods API origin trial</a>.</p>
<h2 id="further-reading">Further reading</h2>
<p>This covers only some of the key highlights. Check the links below for additional changes in Chrome 89.</p>
<ul>
<li><a href="/blog/new-in-devtools-89">What’s new in Chrome DevTools (89)</a></li>
<li><a href="/blog/deps-rems-89/">Chrome 89 deprecations &amp; removals</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D89">ChromeStatus.com updates for Chrome 88</a></li>
<li><a href="https://v8.dev/blog/v8-release-89">What’s new in JavaScript in Chrome 88</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/88.0.4324.98..89.0.4389.75">Chromium source repository change list</a></li>
</ul>
<h2 id="subscribe">Subscribe</h2>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and as soon as Chrome 90 is released, I’ll be right here to tell you what’s new in Chrome!</p>
<h2 id="credits">Credits</h2>
<p>The photo of the Raspberry Pis and Arduino are by by <a href="https://unsplash.com/photos/1mu9gF8OhNk">Harrison Broadbent on Unsplash</a></p>
</body>
</html>
