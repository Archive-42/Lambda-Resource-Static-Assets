<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2020-05-19" />
  <title>New in Chrome 83</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 83</h1>
<p class="date">2020-05-19</p>
</header>
<p>Chrome 83 is starting to roll out to stable now.</p>
<p>{% YouTube id=‘RsMikJZhnSQ’ %}</p>
<p>Here’s what you need to know:</p>
<ul>
<li><a href="#trusted-types">Trusted types</a> help prevent cross site scripting vulnerabilities.</li>
<li>Form elements get an important <a href="#forms">make-over</a>.</li>
<li>There’s a new way to <a href="#memory">detect memory leaks</a>.</li>
<li>The <a href="#nfs">native file system API</a> starts a new origin trial with added functionality.</li>
<li>There are new <a href="#coop">cross-origin policies</a></li>
<li>We’ve introduced the <a href="#web-vitals">Web Vitals</a> program, to provide unified guidance for quality signals that, we believe, are essential to delivering a great user experience on the web.</li>
<li>And <a href="#more">more</a>.</li>
</ul>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>, working and shooting from home, let’s dive in and see what’s new for developers in Chrome 83!</p>
<p>{% Aside %} App shortcuts were supposed to be landing in Chrome 83, but were delayed until Chrome 84, scheduled for July 14th. {% endAside %}</p>
<h2 id="trusted-types-trusted-types">Trusted types {: #trusted-types }</h2>
<p>DOM-based cross-site scripting is one of the most common security vulnerabilities on the web. It can be easy to accidentally introduce one to your page. <strong>Trusted types</strong> can help prevent these kinds of vulnerabilities, because they require you to process the data before passing it into a potentially dangerous function.</p>
<p>Take <code>innerHTML</code> for example, with trusted types turned on, if I try to pass a string, it’ll fail with a TypeError because the browser doesn’t know if it can trust the string.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// Trusted types turned on</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> elem <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;myDiv&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="va">elem</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`Hello, world!`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">// Will throw a TypeError</span></a></code></pre></div>
<p>Instead, I need to either use a safe function, like <code>textContent</code>, pass in a trusted type, or create the element and use <code>appendChild()</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// Use a safe function</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">elem</span>.<span class="at">textContent</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span> <span class="co">// OK</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">// Pass in a trusted type</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="im">import</span> DOMPurify <span class="im">from</span> <span class="st">&#39;dompurify&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="kw">const</span> str <span class="op">=</span> <span class="vs">`Hello, world!`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="va">elem</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="va">DOMPurify</span>.<span class="at">sanitize</span>(str<span class="op">,</span> <span class="op">{</span><span class="dt">RETURN_TRUSTED_TYPE</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">// Create an element</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw">const</span> img <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;img&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="va">img</span>.<span class="at">src</span> <span class="op">=</span> <span class="st">&#39;xyz.jpg&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="va">elem</span>.<span class="at">appendChild</span>(img)<span class="op">;</span></a></code></pre></div>
<p>Before you turn on trusted types, you’ll want to identify and fix any violations using a <code>report-only</code> CSP header.</p>
<pre class="http"><code>Content-Security-Policy-Report-Only: require-trusted-types-for &#39;script&#39;; report-uri //example.com</code></pre>
<p>Then once you’ve got everything buttoned up, you can turn it on properly. Complete details are in <a href="https://web.dev/trusted-types/">Prevent DOM-based cross-site scripting vulnerabilities with Trusted Types</a> on web.dev.</p>
<h2 id="updates-to-form-controls-forms">Updates to form controls {: #forms }</h2>
<p>We use HTML form controls every day, and they are key to so much of the web’s interactivity. They’re easy to use, have built-in accessibility, and are familiar to our users. The styling of form controls can be inconsistent across browsers and operating systems. And we frequently have to ship a number of CSS rules just to get a consistent look across devices.</p>
{% Columns %}
<figure>
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/WSHGuVSVSsRyOdbnUN4F.png”, alt="“, height=”928“, width=”492" %}
<figcaption>
Before, default styling of form controls.
</figcaption>
</figure>
<figure>
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/FhoI03qxVPRrOxY6lVJR.png”, alt="“, height=”928“, width=”492" %}
<figcaption>
After, updated styling of form controls.
</figcaption>
</figure>
<p>{% endColumns %}</p>
<p>I’ve been really impressed by the work Microsoft has been doing to modernize the appearance of form controls. Beyond the nicer visual style, they bring better touch support, and better accessibility, including improved keyboard support!</p>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/t173v86PHOoikrehWzeh.gif”, alt="“, height=”294“, width=”620" %}</p>
<p>The new form controls have already landed in Microsoft Edge, and are now available in Chrome 83. For more information, see <a href="https://blog.chromium.org/2020/03/updates-to-form-controls-and-focus.html">Updates to Form Controls and Focus</a> on the Chromium blog.</p>
<h2 id="origin-trials">Origin trials</h2>
<h3 id="measure-memory-with-measurememory-memory">Measure memory with <code>measureMemory()</code> {: #memory }</h3>
<p>Starting an origin trial in Chrome 83, <code>performance.measureMemory()</code> is a new API that makes it possible to measure the memory usage of your page, and detect memory leaks.</p>
<p>Memory leaks are easy to introduce:</p>
<ul>
<li>Forgetting to unregister an event listener</li>
<li>Capturing objects from an iframe</li>
<li>Not closing a worker</li>
<li>Accumulating objects in arrays</li>
<li>and so on.</li>
</ul>
<p>Memory leaks lead to pages that appear slow, and bloated to users.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="cf">if</span> (<span class="va">performance</span>.<span class="at">measureMemory</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="va">performance</span>.<span class="at">measureMemory</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="va">console</span>.<span class="at">log</span>(result)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="op">}</span> <span class="cf">catch</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="va">console</span>.<span class="at">error</span>(err)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="op">}</span></a></code></pre></div>
<p>Check out <a href="https://web.dev/monitor-total-page-memory-usage/">Monitor your web page’s total memory usage with <code>measureMemory()</code></a> on web.dev for all the details of the new API.</p>
<h3 id="updates-to-the-native-file-system-api-nfs">Updates to the Native File System API {: #nfs }</h3>
<p>The Native File System API started a new origin trial in Chrome 83 with support for writable streams, and the ability to save file handles.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">writeURLToFile</span>(fileHandle<span class="op">,</span> url) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="co">// Create a FileSystemWritableFileStream to write to.</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="kw">const</span> writable <span class="op">=</span> <span class="cf">await</span> <span class="va">fileHandle</span>.<span class="at">createWritable</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="co">// Make an HTTP request for the contents.</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="co">// Stream the response into the file.</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="cf">await</span> <span class="va">response</span>.<span class="va">body</span>.<span class="at">pipeTo</span>(writable)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8">  <span class="co">// pipeTo() closes the destination pipe automatically.</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>Writable streams make it much easier to write to a file, and because it’s a stream, you can easily pipe responses from one stream to another.</p>
<p>Saving file handles to IndexedDB allows you to store state, or remember which files a user was working on. For example keep a list of recently edited files, open the last file that the user was working on, and so on.</p>
<p>You’ll need a new origin trial token to use these features, so check out my updated article <a href="https://web.dev/native-file-system/">The Native File System API: Simplifying access to local files</a> on web.dev with all the details, and how to get your new origin trial token.</p>
<h3 id="other-origin-trials">Other origin trials</h3>
<p>Check </origintrials/#/trials/active> for a complete list of features in origin trial.</p>
<h2 id="new-cross-origin-policies-coop">New cross-origin policies {: #coop }</h2>
<p>Some web APIs increase the risk of side-channel attacks like Spectre. To mitigate that risk, browsers offer an opt-in-based isolated environment called cross-origin isolated. The cross-origin isolated state also prevents modifications of <code>document.domain</code>. Being able to alter <code>document.domain</code> allows communication between same-site documents and has been considered a loophole in the same-origin policy.</p>
<p>Check out Eiji’s post <a href="https://web.dev/coop-coep/">Making your website “cross-origin isolated” using COOP and COEP</a> for complete details.</p>
<h2 id="web-vitals-web-vitals">Web vitals {: #web-vitals }</h2>
<p>Measuring the quality of user experience has many facets. While some aspects of user experience are site and context specific, there is a common set of signals—“<strong>Core Web Vitals</strong>”—that is critical to all web experiences. Such <a href="https://web.dev/user-centric-performance-metrics/#defining-metrics">core user experience needs</a> include loading experience, interactivity, and visual stability of page content, and combined are the foundation of the 2020 Core Web Vitals.</p>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/PJP3ZSo0RxY3cjvZlXhx.jpg”, alt="“, height=”232“, width=”800" %}</p>
<ul>
<li><a href="https://web.dev/lcp/"><strong>Largest Contentful Paint</strong></a> measures perceived load speed and marks the point in the page load timeline when the page’s main content has likely loaded.</li>
<li><a href="https://web.dev/fid/"><strong>First Input Delay</strong></a> measures responsiveness and quantifies the experience users feel when trying to first interact with the page.</li>
<li><a href="https://web.dev/cls/"><strong>Cumulative Layout Shift</strong></a> measures visual stability and quantifies the amount of unexpected layout shift of visible page content.</li>
</ul>
<p>All of these metrics capture important user-centric outcomes, are field measurable, and have supporting lab diagnostic metric equivalents and tooling. For example, while Largest Contentful Paint is the topline loading metric, it is also highly dependent on First Contentful Paint (FCP) and Time to First Byte (TTFB), which remain critical to monitor and improve.</p>
<p>To learn more, check out <a href="https://blog.chromium.org/2020/05/introducing-web-vitals-essential-metrics.html">Introducing Web Vitals: essential metrics for a healthy site</a> on the Chromium Blog for complete details.</p>
<h2 id="and-more-more">And more {: #more }</h2>
<ul>
<li>Chrome now supports the <a href="https://web.dev/shape-detection/">Barcode Detection API</a>, which provides the ability to detect and decode barcodes.</li>
<li>The new <a href="https://drafts.csswg.org/css-conditional-4/#dfn-support-selector">CSS <code>@supports</code> function</a> provides feature detection for CSS selectors.</li>
<li>New <a href="https://www.chromestatus.com/feature/4666935918723072">ARIA annotations</a> support screen reader accessibility for comments, suggestions, and text highlights with semantic meanings (similar to <code>&lt;mark&gt;</code>).</li>
<li>The <a href="https://web.dev/color-scheme/"><code>prefers-color-scheme</code> media query</a> lets authors support their own dark theme so they have full control over experiences they build.</li>
<li>JavaScript now supports <a href="https://web.dev/module-workers/#what-about-shared-workers">modules in shared workers</a>.</li>
</ul>
<p>Curious about what’s coming in the future? Check out the <a href="https://goo.gle/fugu-api-tracker">Fugu API Tracker</a> to see!</p>
<h2 id="further-reading">Further reading</h2>
<p>This covers only some of the key highlights. Check the links below for additional changes in Chrome 83.</p>
<ul>
<li><a href="/blog/new-in-devtools-83">What’s new in Chrome DevTools (83)</a></li>
<li><a href="https://developers.google.com/web/updates/2020/04/chrome-83-deps-rems">Chrome 83 deprecations &amp; removals</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D83">ChromeStatus.com updates for Chrome 83</a></li>
<li><a href="https://v8.dev/blog/v8-release-83">What’s new in JavaScript in Chrome 83</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/81.0.4044.99..83.0.4103.64">Chromium source repository change list</a></li>
</ul>
<h2 id="subscribe">Subscribe</h2>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and I <strong>need</strong> a hair cut, but as soon as Chrome 84 is released, I’ll be right here to tell you – what’s new in Chrome!</p>
</body>
</html>
