<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2020-07-14" />
  <title>New in Chrome 84</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 84</h1>
<p class="date">2020-07-14</p>
</header>
<p>Chrome 84 is starting to roll out to stable now.</p>
<p>{% YouTube id=‘1XBUeaqjTA4’ %}</p>
<p>Here’s what you need to know:</p>
<ul>
<li>Users can start common tasks within your app, with <a href="#app-icon-shortcuts">App Icon Shortcuts</a>.</li>
<li>The <a href="#web-animations">Web Animations API</a> adds support for a slew of previously unsupported features.</li>
<li><a href="#wake-lock">Wake lock</a> can prevent the screen from dimming or locking.</li>
<li>The <a href="#content-indexing">Content Indexing API</a> helps surface content that is available offline.</li>
<li>There are new origin trials for <a href="#idle-detection">idle detection</a> and <a href="#wasm-simd">Web Assembly SIMD</a>.</li>
<li><a href="#sscp">Same Site Cookie policy</a> changes are starting to roll out again.</li>
<li>And <a href="#more">more</a>.</li>
</ul>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>, working and shooting from home, let’s dive in and see what’s new for developers in Chrome 84!</p>
<h2 id="app-icon-shortcuts-app-icon-shortcuts">App icon shortcuts {: #app-icon-shortcuts }</h2>
<figure class="float-right">
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/ksYJMfb6G3OcRwDrtBsP.jpg”, alt="“, height=”1109“, width=”800" %}
<figcaption>
App icon shortcuts for Twitter’s PWA
</figcaption>
</figure>
<p>App icon shortcuts make it easy for users to quick start common tasks within your app. For example, compose a new tweet, send a message, or see their notifications. They’re supported in Chrome for Android.</p>
<p>These shortcuts are invoked by long pressing the app icon on Android. Adding a shortcut to your PWA is easy, create a new <code>shortcuts</code> property in your web app manifest, describe the shortcut, and add your icons.</p>
<p><br style="clear:both;"></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="er">&quot;shortcuts&quot;:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Open Play Later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="dt">&quot;short_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Play Later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;View the list you saved for later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/play-later&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="dt">&quot;icons&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-8" title="8">      <span class="fu">{</span> <span class="dt">&quot;src&quot;</span><span class="fu">:</span> <span class="st">&quot;//play-later.png&quot;</span><span class="fu">,</span> <span class="dt">&quot;sizes&quot;</span><span class="fu">:</span> <span class="st">&quot;192x192&quot;</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="ot">]</span></a></code></pre></div>
<p>Check out <a href="https://web.dev/app-shortcuts/">Getting things done quickly with app shortcuts</a> for complete details.</p>
<h2 id="web-animations-api-web-animations">Web animations API {: #web-animations }</h2>
<p>Chrome 84 adds a slew of previously unsupported features to the Web Animations API.</p>
<ul>
<li><code>animation.ready</code> and <code>animation.finished</code> have been promisified.</li>
<li>The browser can now cleanup and remove old animations, saving memory and improving performance.</li>
<li>And you can now combine animations using composite modes - with the <code>add</code> and <code>accumulate</code> options.</li>
</ul>
<p>I simply <strong>can’t</strong> do justice to all the improvements or offer good examples here, so check out <a href="https://web.dev/web-animations/">Web Animations API improvements in Chromium 84</a> for complete details.</p>
<h2 id="content-indexing-api-content-indexing">Content indexing API {: #content-indexing }</h2>
{# TODO(petele): video element, float-right, auto-play #}
<figure class="float-right">
{% Video src=[ “video/0g2WvpbGRGdVs0aAPc6ObG7gkud2/7lVmOTOK52nmjWxrtL8n.webm”, “video/0g2WvpbGRGdVs0aAPc6ObG7gkud2/EIl1SqvNe8jccnRgTZ3l.mp4” ] %}
</figure>
<p>If your content is available without a network connection. But the user doesn’t know about it? Is it really available? There’s a discovery problem!</p>
<p>With the Content Indexing API, which just graduated from original trial, you can add URLs and metadata for content that’s available offline. Using that metadata, the content is then surfaced to the user, improving discoverability.</p>
<p>To add content to the index, call <code>index.add()</code> on the service worker registration, and provide the required metadata about the content.</p>
<p><br style="clear:both;"></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> registration <span class="op">=</span> <span class="cf">await</span> <span class="va">navigator</span>.<span class="va">serviceWorker</span>.<span class="at">ready</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="cf">await</span> <span class="va">registration</span>.<span class="va">index</span>.<span class="at">add</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">id</span><span class="op">:</span> <span class="st">&#39;article-123&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/articles/123&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">launchUrl</span><span class="op">:</span> <span class="st">&#39;/articles/123&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;Article title&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;Amazing article about things!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="dt">icons</span><span class="op">:</span> [<span class="op">{</span></a>
<a class="sourceLine" id="cb2-9" title="9">    <span class="dt">src</span><span class="op">:</span> <span class="st">&#39;/img/article-123.png&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="dt">sizes</span><span class="op">:</span> <span class="st">&#39;64x64&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;image/png&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="op">}</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Want to see what’s already in your index? Call <code>index.getAll()</code> on the service worker registration.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> registration <span class="op">=</span> <span class="cf">await</span> <span class="va">navigator</span>.<span class="va">serviceWorker</span>.<span class="at">ready</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">const</span> entries <span class="op">=</span> <span class="cf">await</span> <span class="va">registration</span>.<span class="va">index</span>.<span class="at">getAll</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="cf">for</span> (<span class="kw">const</span> entry <span class="kw">of</span> entries) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="co">// entry.id, entry.launchUrl, etc. are all exposed.</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>See <a href="https://web.dev/content-indexing-api/">Indexing your offline-capable pages with the Content Indexing API</a> for complete details.</p>
<h2 id="wake-lock-api-wake-lock">Wake lock API {: #wake-lock }</h2>
<figure class="float-right">
{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/z8SHisPaV1V3kk2MghIx.jpg”, alt="“, height=”639“, width=”800" %}
<figcaption>
Wake lock implementation on the Betty Crocker website.
</figcaption>
</figure>
<p>I like to cook, but I find it super frustrating when following a recipe, and the screen saver kicks in! With the wake lock API, which also graduates from its origin trial in Chrome 84, sites can request a wake lock to prevent the screen from dimming and locking.</p>
<p>In fact, the Betty Crocker website is using this today, and published a <a href="https://web.dev/betty-crocker/">case study</a> on web.dev showing a 300% increase in purchase intent indicators.</p>
<p>To get a wake lock, call <code>navigator.wakeLock.request()</code>, it returns a <code>WakeLockSentinel</code> object, used to “release” the wake lock.</p>
<p><br style="clear:both;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// Request the wake lock</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> wl <span class="op">=</span> <span class="cf">await</span> <span class="va">navigator</span>.<span class="va">wakeLock</span>.<span class="at">request</span>(<span class="st">&#39;screen&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">// Release the wake lock</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="va">wl</span>.<span class="at">release</span>()<span class="op">;</span></a></code></pre></div>
<p>Of course, there’s a little more to it then that, so check out <a href="https://web.dev/wakelock/">Stay awake with the Screen Wake Lock API</a>, but at least my screen won’t be covered in flour any more!</p>
<h2 id="origin-trials">Origin trials</h2>
<p>There are two new origin trials I want to call out. If you’re new to origin trials, check out <a href="https://web.dev/origin-trials/">Getting started with Chrome’s origin trials</a>.</p>
<h3 id="idle-detection-idle-detection">Idle detection {: #idle-detection }</h3>
<p>The Idle Detection API notifies you when a user is idle, indicating they are potentially away from their computer. This is great for things like chat applications, or social networking sites, to let users know if their contacts are available or not.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="co">// Create the idle detector</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> idleDetector <span class="op">=</span> <span class="kw">new</span> <span class="at">IdleDetector</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">// Set up an event listener that fires when idle state changes.</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="va">idleDetector</span>.<span class="at">addEventListener</span>(<span class="st">&#39;change&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="kw">const</span> uState <span class="op">=</span> <span class="va">idleDetector</span>.<span class="at">userState</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="kw">const</span> sState <span class="op">=</span> <span class="va">idleDetector</span>.<span class="at">screenState</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`Idle change: </span><span class="sc">${</span>uState<span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>sState<span class="sc">}</span><span class="vs">.`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">// Start the idle detector.</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="cf">await</span> <span class="va">idleDetector</span>.<span class="at">start</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="dt">threshold</span><span class="op">:</span> <span class="dv">60000</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-14" title="14">  signal<span class="op">,</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>See <a href="https://web.dev/idle-detection/">Detect inactive users with the Idle Detection API</a> to learn more about the API, and how you can start experimenting with it today.</p>
<h3 id="web-assembly-simd-wasm-simd">Web Assembly SIMD {: #wasm-simd }</h3>
{# TODO(petele): video element, float-right, auto-play #}
<figure class="float-right">
{% Video src=“video/0g2WvpbGRGdVs0aAPc6ObG7gkud2/kKpqmySxraoCo5aYUCeW.mp4” %}
</figure>
<p>And Web Assembly SIMD starts an <a href="/origintrials/#/view_trial/-4708513410415853567">origin trial</a>. It introduces operations that map to commonly available SIMD instructions in hardware. SIMD operations are used to improve performance, especially in multimedia applications.</p>
<p>To learn more about WebAssembly SIMD, check out <a href="https://v8.dev/features/simd">Fast, parallel applications with WebAssembly SIMD</a>.</p>
<h2 id="and-more-more">And more {: #more }</h2>
<p>Chrome 84 is big, but there are a few other important updates I want to point out.</p>
<ul>
<li>We’re resuming the gradual rollout of <a href="https://blog.chromium.org/2020/05/resuming-samesite-cookie-changes-in-july.html">SameSite cookie changes</a>.</li>
<li>Sites with abusive permission requests, or abusive notifications, will automatically be enrolled in our <a href="https://blog.chromium.org/2020/05/protecting-chrome-users-from-abusive.html">quieter notifications UI</a>.</li>
<li>There’s a new origin trial for <a href="https://web.dev/quictransport/">QuicTransport</a>.</li>
</ul>
<h2 id="further-reading">Further reading</h2>
<p>This covers only some of the key highlights. Check the links below for additional changes in Chrome 84.</p>
<ul>
<li><a href="/blog/new-in-devtools-84">What’s new in Chrome DevTools (84)</a></li>
<li><a href="https://developers.google.com/web/updates/2020/05/chrome-84-deps-rems">Chrome 84 deprecations &amp; removals</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D84">ChromeStatus.com updates for Chrome 84</a></li>
<li><a href="https://v8.dev/blog/v8-release-84">What’s new in JavaScript in Chrome 84</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/83.0.4103.64..84.0.4147.92">Chromium source repository change list</a></li>
</ul>
<h2 id="subscribe">Subscribe</h2>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and I <strong>still need</strong> a hair cut, but as soon as Chrome 85 is released, I’ll be right here to tell you – what’s new in Chrome!</p>
</body>
</html>
