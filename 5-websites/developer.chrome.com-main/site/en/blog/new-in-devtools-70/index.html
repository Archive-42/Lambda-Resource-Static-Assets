<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2018-08-29" />
  <title>What’s New In DevTools (Chrome 70)</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">What’s New In DevTools (Chrome 70)</h1>
<p class="date">2018-08-29</p>
</header>
<p>Welcome back! It’s been about 12 weeks since our last update, which was for Chrome 68. We skipped Chrome 69 because we didn’t have enough new features or UI changes to warrant a post.</p>
<p>New features and major changes coming to DevTools in Chrome 70 include:</p>
<ul>
<li><a href="#watch">Live Expressions in the Console</a>.</li>
<li><a href="#nodes">Highlight DOM nodes during Eager Evaluation</a>.</li>
<li><a href="#performance">Performance panel optimizations</a>.</li>
<li><a href="#debugging">More reliable debugging</a>.</li>
<li><a href="#throttling">Enable network throttling from the Command Menu</a>.</li>
<li><a href="#autocomplete">Autocomplete Conditional Breakpoints</a>.</li>
<li><a href="#audiocontext">Break on <code>AudioContext</code> events</a>.</li>
<li><a href="#ndb">Debug Node.js apps with ndb</a>.</li>
<li><a href="#bonus">Bonus tip: Measure real world user interactions with the User Timing API</a>.</li>
</ul>
<p>Read on, or watch the video version of this doc:</p>
<p>{% YouTube id=“LJq8vg8ktdQ” %}</p>
<h2 id="live-expressions-in-the-console-watch">Live Expressions in the Console {: #watch }</h2>
<p>Pin a Live Expression to the top of your Console when you want to monitor its value in real-time.</p>
<ol type="1">
<li><p>Click <strong>Create Live Expression</strong> {% Img src=“image/admin/I2koUa4iploELZN4Rs8N.png”, alt=“Create Live Expression”, width=“33”, height=“23” %}. The Live Expression UI opens.</p>
<p>{% Img src=“image/admin/SZdCaRdB0m9KOBaKzC0w.png”, alt=“The Live Expression UI”, width=“800”, height=“516” %}</p>
<p><strong>Figure 1</strong>. The Live Expression UI</p></li>
<li><p>Type the expression that you want to monitor.</p>
<p>{% Img src=“image/admin/zgB9xFL6x4NRg79TLjJX.png”, alt=“Typing Date.now() into the Live Expression UI.”, width=“800”, height=“516” %}</p>
<p><strong>Figure 2</strong>. Typing <code>Date.now()</code> into the Live Expression UI</p></li>
<li><p>Click outside of the Live Expression UI to save your expression.</p>
<p>{% Img src=“image/admin/IE8bIVdTjaGBPqKd4euz.png”, alt=“A saved Live Expression.”, width=“800”, height=“516” %}</p>
<p><strong>Figure 3</strong>. A saved Live Expression</p></li>
</ol>
<p>Live Expression values update every 250 milliseconds.</p>
<h2 id="highlight-dom-nodes-during-eager-evaluation-nodes">Highlight DOM nodes during Eager Evaluation {: #nodes }</h2>
<p>Type an expression that evaluates to a DOM node in the Console and <a href="/blog/new-in-devtools-68#eagerevaluation">Eager Evaluation</a> now highlights that node in the viewport.</p>
<p>{% Aside %}</p>
<p><strong>Note:</strong> <strong>The highlighted node only updates when you type</strong>. It does not update on an interval. For example, if you type <code>document.activeElement</code>, which tracks the element in focus, and then tab through the page, DevTools will still be highlighting the node that was active when you originally typed out the expression.</p>
<p>{% endAside %}</p>
<p>{% Img src=“image/BrQidfK9jaQyIHwdw91aVpkPiib2/2Wo3pu6seuEnkWaMBZrS.png”, alt=“After typing document.activeElement in the Console a node is highlighted in the viewport.”, width=“800”, height=“784” %}</p>
<p><strong>Figure 4</strong>. Since the current expression evaluates to a node, that node is highlighted in the viewport</p>
<p>Here are some expressions you may find useful:</p>
<ul>
<li><code>document.activeElement</code> for highlighting the node that currently has focus.</li>
<li><code>document.querySelector(s)</code> for highlighting an arbitrary node, where <code>s</code> is a CSS selector. This is equivalent to hovering over a node in the <a href="/docs/devtools/css/reference#select">DOM Tree</a>.</li>
<li><a href="/docs/devtools/console/utilities#dom"><code>$0</code></a> for highlighting whatever node is currently selected in the DOM Tree.</li>
<li><code>$0.parentElement</code> to highlight the parent of the currently-selected node.</li>
</ul>
<h2 id="performance-panel-optimizations-performance">Performance panel optimizations {: #performance }</h2>
<p>When profiling a large page, the Performance panel previously took tens of seconds to process and visualize the data. Clicking on a event to learn more about it in the Summary tab also sometimes took multiple seconds to load. Processing and visualizing is faster in Chrome 70.</p>
<p>{% Img src=“image/admin/nymZOf5a8pVh6FgTYU9t.png”, alt=“Processing and loading Performance data.”, width=“800”, height=“638” %}</p>
<p><strong>Figure 5</strong>. Processing and loading Performance data</p>
<h2 id="more-reliable-debugging-debugging">More reliable debugging {: #debugging }</h2>
<p>Chrome 70 fixes some bugs that were causing breakpoints to disappear or not get triggered.</p>
<p>It also fixes bugs related to sourcemaps. Some TypeScript users would instruct DevTools to blackbox a certain TypeScript file while stepping through code, and instead DevTools would blackbox the entire bundled JavaScript file. These fixes also address an issue that was causing the Sources panel to generally run slowly.</p>
<h2 id="enable-network-throttling-from-the-command-menu-throttling">Enable network throttling from the Command Menu {: #throttling }</h2>
<p>You can now set network throttling to fast 3G or slow 3G from the <a href="/docs/devtools/command-menu/">Command Menu</a>.</p>
<p>{% Img src=“image/admin/IcmXceEt6IOkJgJ4FIkH.png”, alt=“Network throttling commands in the Command Menu.”, width=“800”, height=“467” %}</p>
<p><strong>Figure 6</strong>. Network throttling commands in the Command Menu</p>
<h2 id="autocomplete-conditional-breakpoints-autocomplete">Autocomplete Conditional Breakpoints {: #autocomplete }</h2>
<p>Use the Autocomplete UI to type out your <a href="/docs/devtools/javascript/breakpoints#conditional-loc">Conditional Breakpoint</a> expressions faster.</p>
<p>{% Img src=“image/admin/9yFogzZSqY04KLMP4d8J.png”, alt=“The Autocomplete UI”, width=“800”, height=“638” %}</p>
<p><strong>Figure 7</strong>. The Autocomplete UI</p>
<p><strong>Did you know?</strong> The Autocomplete UI is possible thanks to <a href="https://codemirror.net/">CodeMirror</a>, which also powers the Console.</p>
<h2 id="break-on-audiocontext-events-audiocontext">Break on AudioContext events {: #audiocontext }</h2>
<p>Use the <a href="/docs/devtools/javascript/breakpoints#event-listeners">Event Listener Breakpoints</a> pane to pause on the first line of an <code>AudioContext</code> lifecycle event handler.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext">AudioContext</a> is part of the Web Audio API, which you can use to process and synthesize audio.</p>
<p>{% Img src=“image/admin/BLgPmE3bubvc3nfPMLkg.png”, alt=“AudioContext events in the Event Listener Breakpoints pane.”, width=“800”, height=“648” %}</p>
<p><strong>Figure 8</strong>. AudioContext events in the Event Listener Breakpoints pane</p>
<h2 id="debug-node.js-apps-with-ndb-ndb">Debug Node.js apps with ndb {: #ndb }</h2>
<p>{% Aside %}</p>
<p><strong>Note:</strong> ndb is an experimental project from Google Chrome Labs.</p>
<p>{% endAside %}</p>
<p>ndb is a new debugger for Node.js applications. On top of the <a href="https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27">usual debugging features that you get through DevTools</a>, ndb also offers:</p>
<ul>
<li>Detecting and attaching to child processes.</li>
<li>Placing breakpoints before modules are required.</li>
<li>Editing files within the DevTools UI.</li>
<li>Blackboxing all scripts outside of the current working directory by default.</li>
</ul>
<p>{% Img src=“image/admin/P6mBnxfW1xelxoTbdVWK.png”, alt=“The ndb UI.”, width=“800”, height=“432” %}</p>
<p><strong>Figure 9</strong>. The ndb UI</p>
<p>Check out <a href="https://github.com/GoogleChromeLabs/ndb/blob/master/README.md">ndb’s README</a> to learn more.</p>
<h2 id="bonus-tip-measure-real-world-user-interactions-with-the-user-timing-api-bonus">Bonus tip: Measure real world user interactions with the User Timing API {: #bonus }</h2>
<p>Want to measure how long it takes real users to complete critical journeys on your pages? Consider instrumenting your code with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API">User Timing API</a>.</p>
<p>For example, suppose you wanted to measure how long a user spends on your homepage before clicking your <a href="https://en.wikipedia.org/wiki/Call_to_action_(marketing)">call-to-action</a> (CTA) button. First, you would mark the beginning of the journey in an event handler associated to a page load event, such as <code>DOMContentLoaded</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">document</span>.<span class="at">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="va">window</span>.<span class="va">performance</span>.<span class="at">mark</span>(<span class="st">&#39;start&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Then, you would mark the end of the journey and calculate its duration when the button is clicked:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;#CTA&#39;</span>).<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="va">window</span>.<span class="va">performance</span>.<span class="at">mark</span>(<span class="st">&#39;end&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="va">window</span>.<span class="va">performance</span>.<span class="at">measure</span>(<span class="st">&#39;CTA&#39;</span><span class="op">,</span> <span class="st">&#39;start&#39;</span><span class="op">,</span> <span class="st">&#39;end&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>You can also extract your measurements, making it easy to send them to your analytics service to collect anonymous, aggregated data:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> CTA <span class="op">=</span> <span class="va">window</span>.<span class="va">performance</span>.<span class="at">getEntriesByName</span>(<span class="st">&#39;CTA&#39;</span>)[<span class="dv">0</span>].<span class="at">duration</span><span class="op">;</span></a></code></pre></div>
<p>DevTools automatically marks up your User Timing measurements in the <strong>User Timing</strong> section of your Performance recordings.</p>
<p>{% Img src=“image/admin/7dzjqyjRXEFZVoFTVwUq.png”, alt=“The User Timing section.”, width=“800”, height=“689” %}</p>
<p><strong>Figure 10</strong>. The User Timing section</p>
<p>This also comes in handy when debugging or optimizing code. For example, if you want to optimize a certain phase of your lifecycle, call <code>window.performance.mark()</code> at the beginning and end of your lifecycle function. React does this in development mode.</p>
</body>
</html>
