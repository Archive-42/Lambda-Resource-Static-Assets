<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2019-09-16" />
  <title>New in Chrome 77</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 77</h1>
<p class="date">2019-09-16</p>
</header>
<p>{% YouTube id=‘S8aVB3IfOR4’ %}</p>
<p>Chrome 77 is rolling out now!</p>
<ul>
<li>There’s a better way to track the performance of your site with <a href="#lcp">Largest Contentful Paint</a>.</li>
<li>Forms get some <a href="#new-forms-capabilities">new capabilities</a>.</li>
<li><a href="#lazy-loading">Native lazy loading</a> is here.</li>
<li><a href="#cds2019">Chrome DevSummit 2019</a> is happening November 11-12 2019.</li>
<li>And plenty <a href="#more">more</a>.</li>
</ul>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>, let’s dive in and see what’s new for developers in Chrome 77!</p>
<h2 id="largest-contentful-paint-lcp">Largest Contentful Paint {: #lcp }</h2>
<p>Understanding and measuring the real world performance of your site can be hard. Metrics like <code>load</code>, or <code>DOMContentLoaded</code>, don’t tell you what the user is seeing on screen. First Paint, and First Contentful Paint, only capture the beginning of the experience. First Meaningful Paint is better, but it’s complex, and sometimes wrong.</p>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/Bwe8cTocyJGd5wNiaFMm.png”, alt="“, height=”279“, width=”800" %}</p>
<p>The <strong>Largest Contentful Paint API</strong>, available starting in Chrome 77, reports the render time of the largest content element visible in the viewport and makes it possible to measure when the main content of the page is loaded.</p>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/n41KwUDKNUFZAKmWDTkr.png”, alt="“, height=”311“, width=”800" %}</p>
<p>To measure the Largest Contentful Paint, you’ll need to use a Performance Observer, and look for <code>largest-contentful-paint</code> events.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">let</span> lcp<span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> po <span class="op">=</span> <span class="kw">new</span> <span class="at">PerformanceObserver</span>((eList) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">const</span> e <span class="op">=</span> <span class="va">eList</span>.<span class="at">getEntries</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="kw">const</span> last <span class="op">=</span> e[<span class="va">e</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5">  lcp <span class="op">=</span> <span class="va">last</span>.<span class="at">renderTime</span> <span class="op">||</span> <span class="va">last</span>.<span class="at">loadTime</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7"></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw">const</span> poOpts <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;largest-contentful-paint&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="dt">buffered</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="va">po</span>.<span class="at">observe</span>(poOpts)<span class="op">;</span></a></code></pre></div>
<p>Since a page often loads in stages, it’s possible that the largest element on a page will change, so you should only report the last <code>largest-contentful-paint</code> event to your analytics service.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">addEventListener</span>(<span class="st">&#39;visibilitychange&#39;</span><span class="op">,</span> <span class="kw">function</span> <span class="at">fn</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="kw">const</span> visState <span class="op">=</span> <span class="va">document</span>.<span class="at">visibilityState</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="cf">if</span> (lcp <span class="op">&amp;&amp;</span> visState <span class="op">===</span> <span class="st">&#39;hidden&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="at">sendToAnalytics</span>(<span class="op">{</span><span class="st">&#39;lcp&#39;</span><span class="op">:</span> lcp<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="at">removeEventListener</span>(<span class="st">&#39;visibilitychange&#39;</span><span class="op">,</span> fn<span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="op">},</span> <span class="kw">true</span>)<span class="op">;</span></a></code></pre></div>
<p>Phil has a great post about the <a href="https://web.dev/largest-contentful-paint/">Largest Contentful Paint</a> on web.dev.</p>
<h2 id="new-forms-capabilities-new-forms-capabilities">New forms capabilities {: #new-forms-capabilities }</h2>
<p>Many developers build custom form controls, either to customize the look and feel of existing elements, or to build new controls that aren’t built in to the browser. Typically this involves using JavaScript and hidden <code>&lt;input&gt;</code> elements, but it’s not a perfect solution.</p>
<p>Two new web features, added in Chrome 77, make it easier to build custom form controls, and remove the many of the existing limitations.</p>
<h3 id="the-formdata-event">The <code>formdata</code> event</h3>
<p>The <code>formdata</code> event is a low-level API that lets any JavaScript code participate in a form submission. To use it, add a <code>formdata</code> event listener to the form you want to interact with.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> form <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;form&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">form</span>.<span class="at">addEventListener</span>(<span class="st">&#39;formdata&#39;</span><span class="op">,</span> (<span class="op">{</span>formData<span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="va">formData</span>.<span class="at">append</span>(<span class="st">&#39;my-input&#39;</span><span class="op">,</span> myInputValue)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>When the user clicks the submit button, the form fires the <code>formdata</code> event, which includes a <code>FormData</code> object that holds all of the data being submitted. Then, in your <code>formdata</code> event handler, you can update or modify the <code>formdata</code> before it’s submitted.</p>
<h3 id="form-associated-custom-elements">Form-associated custom elements</h3>
<p>Form-associated custom elements help to bridge the gap between custom elements and native controls. Adding a static <code>formAssociated</code> property tells the browser to treat the custom element like all other form elements. You should also add common properties found on input elements, like <code>name</code>, <code>value</code>, and <code>validity</code> to ensure consistency with native controls.</p>
<pre class="js/1"><code>class MyCounter extends HTMLElement {
  static formAssociated = true;

  constructor() {
    super();
    this._internals = this.attachInternals();
    this._value = 0;
  }
  ...
}</code></pre>
<p>Check out <a href="https://web.dev/more-capable-form-controls/">More capable form controls</a> on web.dev for all the details!</p>
<h2 id="native-lazy-loading-lazy-loading">Native lazy loading {: #lazy-loading }</h2>
<p>I’m not sure how I missed native lazy loading in my last video! It’s pretty amazing, so I’m including it now. Lazy loading is a technique that allows you to defer the loading of non-critical resources, like off-screen <code>&lt;img&gt;</code>’s, or <code>&lt;iframe&gt;</code>’s - until they’re needed, increasing the performance of your page.</p>
<p>Starting in Chrome 76, the browser handles lazy loading for you, without the need to write custom lazy loading code, or use a separate JavaScript library.</p>
<p>To tell the browser you want an image, or iframe lazy loaded, use the <code>loading="lazy"</code> attribute. Images and iframes that are “above the fold” load normally. And those that are below, are only fetched when the user scrolls near them.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">&quot;image.jpg&quot;</span><span class="ot"> loading=</span><span class="st">&quot;lazy&quot;</span><span class="ot"> width=</span><span class="st">&quot;400&quot;</span><span class="ot"> height=</span><span class="st">&quot;250&quot;</span><span class="ot"> alt=</span><span class="st">&quot;...&quot;</span><span class="kw">&gt;</span></a></code></pre></div>
<p>Check out <a href="https://web.dev/browser-level-image-lazy-loading/">Browser level lazy-loading for the web</a> on web.dev for details.</p>
<h2 id="chrome-dev-summit-2019-cds2019">Chrome Dev Summit 2019 {: #cds2019 }</h2>
<p>{% Img src=“image/0g2WvpbGRGdVs0aAPc6ObG7gkud2/4L4iDgNCnYAykp3UXZRe.png”, alt="“, className=”float-right“, height=”420“, width=”800" %}</p>
<p><strong>The Chrome Dev Summit is coming up November 11th and 12th.</strong></p>
<p>It’s a great opportunity to learn about the latest tools and updates coming to the web platform, and hear directly from the Chrome engineering team.</p>
<p>It’ll be streamed live on our <a href="https://youtube.com/user/ChromeDevelopers/">YouTube channel</a>, or if you want to attend in person, you can request your invite at the <a href="/devsummit/">Chrome Dev Summit 2019</a> website.</p>
<h2 id="and-more-more">And more! {: #more }</h2>
<p>These are just a few of the changes in Chrome 77 for developers, of course, there’s plenty more.</p>
<p>The <a href="https://developers.google.com/web/updates/2019/08/contact-picker">Contact Picker API</a>, available as an origin trial, is a new, on-demand picker that allows users to select an entry or entries from their contact list and share limited details of the selected contacts with a website.</p>
<p>And there are new measurement units in the <a href="https://v8.dev/features/intl-numberformat"><code>intl.NumberFormat</code> API</a>.</p>
<h2 id="further-reading">Further reading</h2>
<p>This covers only some of the key highlights. Check the links below for additional changes in Chrome 77.</p>
<ul>
<li><a href="/blog/new-in-devtools-77">What’s new in Chrome DevTools (77)</a></li>
<li><a href="https://developers.google.com/web/updates/2019/08/chrome-77-deps-rems">Chrome 77 deprecations &amp; removals</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D77">ChromeStatus.com updates for Chrome 77</a></li>
<li><a href="https://v8.dev/blog/v8-release-77">What’s new in JavaScript in Chrome 77</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/76.0.3809.88..77.0.3865.75">Chromium source repository change list</a></li>
</ul>
<h2 id="subscribe">Subscribe</h2>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and as soon as Chrome 78 is released, I’ll be right here to tell you – what’s new in Chrome!</p>
</body>
</html>
