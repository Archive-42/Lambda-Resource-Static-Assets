<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2020-02-04" />
  <title>New in Chrome 80</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">New in Chrome 80</h1>
<p class="date">2020-02-04</p>
</header>
<p>Chrome 80 is rolling out now, and there’s a ton of new stuff in it for developers!</p>
<p>{% YouTube id=‘lM0qZpxu0Fg’ %}</p>
<p>There’s support for:</p>
<ul>
<li><a href="#module-workers">Modules in workers</a></li>
<li><a href="#opt-chaining">Optional chaining</a> in JavaScript</li>
<li><a href="#ot-new">New origin trials</a></li>
<li>Features that have <a href="#ot-graduation">graduated from origin trial</a></li>
<li>And so much <a href="#more">more</a>.</li>
</ul>
<p>I’m <a href="https://twitter.com/petele">Pete LePage</a>, let’s dive in and see what’s new for developers in Chrome 80!</p>
<h2 id="module-workers-module-workers">Module workers {: #module-workers }</h2>
<p>Module Workers, a new mode for web workers - with the ergonomics, and performance benefits of JavaScript modules is now available. The Worker constructor accepts a new <code>{type: "module"}</code> option, which changes the way scripts are loaded and executed, to match <code>&lt;script type="module"&gt;</code></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> worker <span class="op">=</span> <span class="kw">new</span> <span class="at">Worker</span>(<span class="st">&#39;worker.js&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;module&#39;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Moving to JavaScript modules, also enables the use of dynamic import for lazy-loading code, without blocking the execution of the worker. Check out Jason’s post <a href="https://web.dev/module-workers/">Threading the web with module workers</a> on web.dev for more details.</p>
<h2 id="optional-chaining-opt-chaining">Optional chaining {: #opt-chaining }</h2>
<p>Trying to read deeply nested properties in an object can be error-prone, especially if there’s a chance something might not evaluate.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// Error prone-version, could throw.</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> nameLength <span class="op">=</span> <span class="va">db</span>.<span class="va">user</span>.<span class="va">name</span>.<span class="at">length</span><span class="op">;</span></a></code></pre></div>
<p>Checking each value before proceeding easily turns into a deeply nested <code>if</code> statement, or requires a <code>try</code> / <code>catch</code> block.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// Less error-prone, but harder to read.</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">let</span> nameLength<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="cf">if</span> (db <span class="op">&amp;&amp;</span> <span class="va">db</span>.<span class="at">user</span> <span class="op">&amp;&amp;</span> <span class="va">db</span>.<span class="va">user</span>.<span class="at">name</span>)</a>
<a class="sourceLine" id="cb3-4" title="4">  nameLength <span class="op">=</span> <span class="va">db</span>.<span class="va">user</span>.<span class="va">name</span>.<span class="at">length</span><span class="op">;</span></a></code></pre></div>
<p>Chrome 80 adds support for a new JavaScript feature called <a href="https://v8.dev/features/optional-chaining">optional chaining</a>. With optional chaining, if one of the properties returns a null, or undefined, instead of throwing an error, the whole thing simply returns undefined.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// Still checks for errors and is much more readable.</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> nameLength <span class="op">=</span> db<span class="op">?</span>.<span class="at">user</span><span class="op">?</span>.<span class="at">name</span><span class="op">?</span>.<span class="at">length</span><span class="op">;</span></a></code></pre></div>
<p>Check out the <a href="https://v8.dev/features/optional-chaining">Optional Chainging</a> blog post on the v8 blog for all the details!</p>
<h2 id="origin-trial-graduations-ot-graduation">Origin trial graduations {: #ot-graduation }</h2>
<p>There are three new capabilities that graduated from Origin Trial to stable, allowing them to be used by any site, without a token.</p>
<h3 id="periodic-background-sync">Periodic background sync</h3>
<p>First up, is <a href="https://web.dev/periodic-background-sync/">periodic background sync</a>, it periodically synchronizes data in the background, so that when a user opens your installed PWA, they always have the freshest data.</p>
<h3 id="contact-picker">Contact picker</h3>
<p>Next up, is the <a href="https://web.dev/contact-picker/">Contact Picker API</a>, an on-demand API that allows users to select entries from their contact list and share limited details of the selected entries with a website.</p>
<p>It allows users to share only what they want, when they want, and makes it easier for users to reach and connect with their friends and family.</p>
<h3 id="get-installed-related-apps">Get installed related apps</h3>
<p>And finally, the <a href="https://web.dev/get-installed-related-apps/">Get Installed Related Apps</a> method allows your web app to check if your native app is installed on a user’s device.</p>
<p>One of the most common uses cases is for deciding whether to promote the installation of your PWA, if your native app isn’t installed. Or, you might want to disable some functionality of one app if it’s provided by the other app.</p>
<h2 id="new-origin-trials-ot-new">New origin trials {: #ot-new }</h2>
<h3 id="content-indexing-api">Content indexing API</h3>
<p>How do you let users know about content you’ve cached in your PWA? There’s a discovery problem here. Will they know to open your app? Or what content is available?</p>
<p>The Content Indexing API, is a new origin trial, that allows you to add URLs and metadata of offline-capable content, to a local index, maintained by the browser, and easily visible to the user.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> registration <span class="op">=</span> <span class="cf">await</span> <span class="va">navigator</span>.<span class="va">serviceWorker</span>.<span class="at">ready</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="cf">await</span> <span class="va">registration</span>.<span class="va">index</span>.<span class="at">add</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="dt">id</span><span class="op">:</span> <span class="st">&#39;article-123&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="dt">launchUrl</span><span class="op">:</span> <span class="st">&#39;/articles/123&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;Article title&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;Amazing article about things!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="dt">icons</span><span class="op">:</span> [<span class="op">{</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="dt">src</span><span class="op">:</span> <span class="st">&#39;/img/article-123.png&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="dt">sizes</span><span class="op">:</span> <span class="st">&#39;64x64&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;image/png&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="op">}</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>To add something to the index, I need to get the service worker registration, then call <code>index.add</code>, and provide metadata about the content.</p>
<p>Once the index is populated, it’s shown in a dedicated area of Chrome for Android’s Downloads page. Check out Jeff’s post <a href="https://web.dev/content-indexing-api/">Indexing your offline-capable pages with the Content Indexing API</a> on web.dev for complete details.</p>
<h3 id="notification-triggers">Notification triggers</h3>
<p>Notifications are a critical part of many apps. But, push notifications are only as reliable as the network you’re connected to. While that works in most cases, it sometimes breaks. For example, if a calendar reminder, notifying you of an important event doesn’t come through because you’re in airplane mode, you might miss the event.</p>
<p>Notification Triggers let you schedule notifications in advance, so that the operating system will deliver the notification at the right time - even if there is no network connectivity, or the device is in battery saver mode.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> swReg <span class="op">=</span> <span class="cf">await</span> <span class="va">navigator</span>.<span class="va">serviceWorker</span>.<span class="at">getRegistration</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">swReg</span>.<span class="at">showNotification</span>(title<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="dt">tag</span><span class="op">:</span> tag<span class="op">,</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="dt">body</span><span class="op">:</span> <span class="st">&quot;This notification was scheduled 30 seconds ago&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="dt">showTrigger</span><span class="op">:</span> <span class="kw">new</span> <span class="at">TimestampTrigger</span>(timestamp <span class="op">+</span> <span class="dv">30</span> <span class="op">*</span> <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb6-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>To schedule a notification, call <code>showNotification</code> on the service worker registration. In the notification options, add a <code>showTrigger</code> property with a <code>TimestampTrigger</code>. Then, when the time arrives, the browser will show the notification.</p>
<p>The origin trial is planned to run through Chrome 83, so check out Tom’s <a href="https://web.dev/notification-triggers/">Notification Triggers</a> post on web.dev for complete details.</p>
<h3 id="other-origin-trials">Other origin trials</h3>
<p>There are a few other origin trials starting in Chrome 80:</p>
<ul>
<li>Web Serial</li>
<li>The ability for PWAs to register as file handlers</li>
<li>New properties for the contact picker</li>
</ul>
<p>Check </origintrials/#/trials/active> for a complete list of features in origin trial.</p>
<h2 id="and-more-more">And more {: #more }</h2>
<p>Of course, there’s plenty more!</p>
<ul>
<li>You can now link directly to text fragments on a page, by using <code>#:~:text=something</code>. Chrome will scroll to and highlight the first instance of that text fragment. For example <a href="https://en.wikipedia.org/wiki/Rickrolling#:~:text=New%20York" class="uri">https://en.wikipedia.org/wiki/Rickrolling#:~:text=New%20York</a></li>
<li>Setting <code>display: minimal-ui</code> on a Desktop PWA adds a back and reload button to the title bar of the installed PWA.</li>
<li>And Chrome now supports using SVG images as favicons.</li>
</ul>
<h2 id="further-reading">Further reading</h2>
<p>This covers only some of the key highlights. Check the links below for additional changes in Chrome 80.</p>
<ul>
<li><a href="/blog/new-in-devtools-80">What’s new in Chrome DevTools (80)</a></li>
<li><a href="https://developers.google.com/web/updates/2019/12/chrome-80-deps-rems">Chrome 80 deprecations &amp; removals</a></li>
<li><a href="https://www.chromestatus.com/features#milestone%3D80">ChromeStatus.com updates for Chrome 80</a></li>
<li><a href="https://v8.dev/blog/v8-release-80">What’s new in JavaScript in Chrome 80</a></li>
<li><a href="https://chromium.googlesource.com/chromium/src/+log/79.0.3945.82..80.0.3987.87">Chromium source repository change list</a></li>
</ul>
<h2 id="subscribe">Subscribe</h2>
<p>Want to stay up to date with our videos, then <a href="https://goo.gl/6FP1a5">subscribe</a> to our <a href="https://www.youtube.com/user/ChromeDevelopers/">Chrome Developers YouTube channel</a>, and you’ll get an email notification whenever we launch a new video.</p>
<p>I’m Pete LePage, and as soon as Chrome 81 is released, I’ll be right here to tell you – what’s new in Chrome!</p>
</body>
</html>
