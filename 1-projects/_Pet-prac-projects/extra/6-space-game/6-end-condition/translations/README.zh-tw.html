<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.zh-tw</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="建立太空遊戲-part-6結束與重來">建立太空遊戲 Part 6：結束與重來</h1>
<h2 id="課前測驗">課前測驗</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/39?loc=zh_tw">課前測驗</a></p>
<p>有許多方式可以表達遊戲中的<em>結束狀態</em>。這都取決於你這位遊戲開發者，定義遊戲結束的理由。假設我們討論這款已經開發許久的太空遊戲，以下是遊戲結束的理由：</p>
<ul>
<li><strong><code>N</code> 艘敵軍艦艇被擊毀</strong>：如果你想將遊戲分成許多關卡，一種常見的方式是將每一關的破關門檻，定為擊毀 <code>N</code> 艘敵軍艦艇。</li>
<li><strong>你的船艦已被擊毀</strong>：一定有遊戲，只要你的船艦被擊毀一次時，便判定你輸了這場遊戲。另一種可行概念是加入生命值系統。每次你的船艦被擊毀時，會扣除一條生命。一但你損失了所有性命，你便輸了這場遊戲。</li>
<li><strong>你已經取得 <code>N</code> 點分數</strong>：另一種常見的結束狀態為分數門檻。取得分數的機制取決在你，常見的條件為摧毀敵艦、或是收集敵艦所<em>掉落</em>的道具。</li>
<li><strong>完成關卡</strong>：這或許會涉及到許多種狀態，好比說： <code>X</code> 艘艦艇已被擊毀、已取得 <code>Y</code> 點分數或是收集特定的道具。</li>
</ul>
<h2 id="重新遊戲">重新遊戲</h2>
<p>如果玩家很享受你的遊戲，他們會想再重新遊玩一次。一旦因任何原因結束遊戲時，你應該要提供重新遊戲的方法。</p>
<p>✅ 想想看，什麼條件下會結束一款遊戲，而它們又是如何提示你重新遊玩。</p>
<h2 id="建立目標">建立目標</h2>
<p>你需要為你的遊戲新增這些規則：</p>
<ol type="1">
<li><strong>贏得遊戲</strong>。 一旦所有敵軍艦艇被擊毀時，你便贏得這場遊戲。請額外地顯示勝利訊息。</li>
<li><strong>重新開始</strong>。 一旦你損失了所有性命，或是贏得了勝利，你應該提供方法來重新遊戲。記住！你需要重新初始化你的遊戲，所有遊戲的歷史紀錄會被移除。</li>
</ol>
<h2 id="建議步驟">建議步驟</h2>
<p>在你的 <code>your-work</code> 子資料夾中，確認檔案是否建立完成。它應該包括：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">-</span><span class="kw">|</span> <span class="ex">assets</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">enemyShip.png</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">player.png</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">laserRed.png</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">life.png</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="ex">-</span><span class="kw">|</span> <span class="ex">index.html</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="ex">-</span><span class="kw">|</span> <span class="ex">app.js</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="ex">-</span><span class="kw">|</span> <span class="ex">package.json</span></a></code></pre></div>
<p>開始 <code>your_work</code> 資料夾中的專案，輸入：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="bu">cd</span> your-work</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ex">npm</span> start</a></code></pre></div>
<p>這會啟動 HTTP 伺服器並發布網址 <code>http://localhost:5000</code>。開啟瀏覽器並輸入該網址。你的遊戲應該能被遊玩。</p>
<blockquote>
<p>要點： 要避免在 Visual Studio Code 裡出現警告訊息，編輯函式 <code>window.onload</code> 以 is，而非 let 的方式呼叫 <code>gameLoopId</code>；並在檔案正上方獨立地宣告 gameLoopId： <code>let gameLoopId;</code>。</p>
</blockquote>
<h3 id="加入程式碼">加入程式碼</h3>
<ol type="1">
<li><p><strong>追蹤結束狀態</strong>。 新增程式碼來追蹤敵人的數量，利用下列函式判斷英雄艦艇是否被擊毀：</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">function</span> <span class="at">isHeroDead</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">return</span> <span class="va">hero</span>.<span class="at">life</span> <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">function</span> <span class="at">isEnemiesDead</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="kw">const</span> enemies <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>((go) <span class="kw">=&gt;</span> <span class="va">go</span>.<span class="at">type</span> <span class="op">===</span> <span class="st">&quot;Enemy&quot;</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="va">go</span>.<span class="at">dead</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="cf">return</span> <span class="va">enemies</span>.<span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="op">}</span></a></code></pre></div></li>
<li><p><strong>加入訊息處理器</strong>。 編輯 <code>eventEmitter</code> 以處理這些狀態：</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">COLLISION_ENEMY_LASER</span><span class="op">,</span> (_<span class="op">,</span> <span class="op">{</span> first<span class="op">,</span> second <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="va">first</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="va">second</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="va">hero</span>.<span class="at">incrementPoints</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="cf">if</span> (<span class="at">isEnemiesDead</span>()) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">GAME_END_WIN</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">COLLISION_ENEMY_HERO</span><span class="op">,</span> (_<span class="op">,</span> <span class="op">{</span> enemy <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-12" title="12">    <span class="va">enemy</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13">    <span class="va">hero</span>.<span class="at">decrementLife</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-14" title="14">    <span class="cf">if</span> (<span class="at">isHeroDead</span>())  <span class="op">{</span></a>
<a class="sourceLine" id="cb4-15" title="15">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">GAME_END_LOSS</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-16" title="16">      <span class="cf">return</span><span class="op">;</span> <span class="co">// 遊戲失敗，提前結束</span></a>
<a class="sourceLine" id="cb4-17" title="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-18" title="18">    <span class="cf">if</span> (<span class="at">isEnemiesDead</span>()) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-19" title="19">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">GAME_END_WIN</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-20" title="20">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-22" title="22"></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">GAME_END_WIN</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-24" title="24">    <span class="at">endGame</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-26" title="26"></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">GAME_END_LOSS</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-28" title="28">  <span class="at">endGame</span>(<span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-29" title="29"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div></li>
<li><p><strong>加入新的訊息</strong>。 新增這些訊息到 Messages 常數中：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1">GAME_END_LOSS<span class="op">:</span> <span class="st">&quot;GAME_END_LOSS&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-2" title="2">GAME_END_WIN<span class="op">:</span> <span class="st">&quot;GAME_END_WIN&quot;</span><span class="op">,</span></a></code></pre></div></li>
<li><p><strong>加入重新開始的功能</strong> 在按下特定按鈕後，程式會重新開始遊戲。</p>
<ol type="1">
<li><strong>監聽 <code>Enter</code> 按鈕之按壓</strong>。 編輯視窗的 eventListener ，監聽按鍵的按壓：</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"> <span class="cf">else</span> <span class="cf">if</span>(<span class="va">evt</span>.<span class="at">key</span> <span class="op">===</span> <span class="st">&quot;Enter&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_ENTER</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="op">}</span></a></code></pre></div>
<ol type="1">
<li><p><strong>加入重新遊戲的訊息</strong>。 加入這段訊息到 Messages 常數中：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">KEY_EVENT_ENTER<span class="op">:</span> <span class="st">&quot;KEY_EVENT_ENTER&quot;</span><span class="op">,</span></a></code></pre></div></li>
</ol></li>
<li><p><strong>制定遊戲規則</strong>。 編制下列的遊戲規則：</p>
<ol type="1">
<li><p><strong>玩家勝利條件</strong>。 當所有敵軍艦艇被擊毀時，顯示勝利訊息。</p>
<ol type="1">
<li>首先，建立函式 <code>displayMessage()</code>：</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">function</span> <span class="at">displayMessage</span>(message<span class="op">,</span> color <span class="op">=</span> <span class="st">&quot;red&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="va">ctx</span>.<span class="at">font</span> <span class="op">=</span> <span class="st">&quot;30px Arial&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> color<span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="va">ctx</span>.<span class="at">textAlign</span> <span class="op">=</span> <span class="st">&quot;center&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="va">ctx</span>.<span class="at">fillText</span>(message<span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span> / <span class="dv">2</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span> / <span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="op">}</span></a></code></pre></div>
<ol type="1">
<li>建立函式 <code>endGame()</code>：</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">endGame</span>(win) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="at">clearInterval</span>(gameLoopId)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="co">// 設定延遲以確保所有圖像皆繪製完成</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-6" title="6">    <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-7" title="7">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&quot;black&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9">    <span class="cf">if</span> (win) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-10" title="10">      <span class="at">displayMessage</span>(</a>
<a class="sourceLine" id="cb9-11" title="11">        <span class="st">&quot;Victory!!! Pew Pew... - Press [Enter] to start a new game Captain Pew Pew&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-12" title="12">        <span class="st">&quot;green&quot;</span></a>
<a class="sourceLine" id="cb9-13" title="13">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-14" title="14">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-15" title="15">      <span class="at">displayMessage</span>(</a>
<a class="sourceLine" id="cb9-16" title="16">        <span class="st">&quot;You died !!! Press [Enter] to start a new game Captain Pew Pew&quot;</span></a>
<a class="sourceLine" id="cb9-17" title="17">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-18" title="18">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-19" title="19">  <span class="op">},</span> <span class="dv">200</span>)  </a>
<a class="sourceLine" id="cb9-20" title="20"><span class="op">}</span></a></code></pre></div></li>
<li><p><strong>重新遊戲的邏輯</strong>。 當玩家損失所有的性命，或是贏下這場遊戲，顯示遊戲重來的提示。此外，在<em>重新遊玩</em>按鍵被按壓時，重新遊戲(你可以自己決定任一個鍵盤按鍵)。</p>
<ol type="1">
<li>建立函式 <code>resetGame()</code>：</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">resetGame</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">if</span> (gameLoopId) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="at">clearInterval</span>(gameLoopId)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="va">eventEmitter</span>.<span class="at">clear</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5">    <span class="at">initGame</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-6" title="6">    gameLoopId <span class="op">=</span> <span class="at">setInterval</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-7" title="7">      <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-8" title="8">      <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&quot;black&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-9" title="9">      <span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-10" title="10">      <span class="at">drawPoints</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-11" title="11">      <span class="at">drawLife</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-12" title="12">      <span class="at">updateGameObjects</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-13" title="13">      <span class="at">drawGameObjects</span>(ctx)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-14" title="14">    <span class="op">},</span> <span class="dv">100</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="op">}</span></a></code></pre></div></li>
<li><p>在 <code>initGame()</code> 內呼叫 <code>eventEmitter</code> 來重新設定遊戲：</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_ENTER</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="at">resetGame</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div></li>
<li><p>在 EventEmitter 加入函式 <code>clear()</code>：</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="at">clear</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="kw">this</span>.<span class="at">listeners</span> <span class="op">=</span> <span class="op">{};</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="op">}</span></a></code></pre></div></li>
</ol></li>
</ol>
<p>👽 💥 🚀 恭喜你，艦長！你的遊戲已經完成了！幹得好！ 🚀 💥 👽</p>
<hr />
<h2 id="挑戰">🚀 挑戰</h2>
<p>加入遊戲音效！你能加入音效來提升遊戲品質嗎？或許在雷射擊中敵人，或是在英雄死亡、勝利時發出音效。看看這套<a href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_audio_play">沙盒</a>，了解如何使用 JavaScript 播放音效。</p>
<h2 id="課後測驗">課後測驗</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/40?loc=zh_tw">課後測驗</a></p>
<h2 id="複習與自學">複習與自學</h2>
<p>你的功課是建立一款新的小遊戲。去探索一些有趣的遊戲，決定你想建造的遊戲類型。</p>
<h2 id="作業">作業</h2>
<p><a href="assignment.zh-tw.md">建立一款遊戲</a></p>
</body>
</html>
