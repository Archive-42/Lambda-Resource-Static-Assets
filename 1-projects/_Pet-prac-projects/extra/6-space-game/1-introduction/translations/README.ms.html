<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.ms</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="membina-permainan-angkasa-bahagian-1-pengenalan">Membina Permainan Angkasa Bahagian 1: Pengenalan</h1>
<figure>
<img src="../../images/pewpew.gif" alt="video" /><figcaption>video</figcaption>
</figure>
<h2 id="kuiz-pra-kuliah">Kuiz Pra Kuliah</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/29">Kuiz Pra Kuliah</a></p>
<h3 id="warisan-dan-komposisi-dalam-pembangunan-permainan">Warisan dan Komposisi dalam pembangunan permainan</h3>
<p>Dalam pelajaran sebelumnya, tidak banyak yang perlu dikhawatirkan mengenai reka bentuk reka bentuk aplikasi yang anda buat, kerana skop projeknya sangat kecil. Namun, apabila aplikasi anda bertambah besar dan luas, keputusan seni bina menjadi perhatian yang lebih besar. Terdapat dua pendekatan utama untuk membuat aplikasi yang lebih besar dalam JavaScript: <em>komposisi</em> atau <em>pewarisan</em>. Terdapat kebaikan dan keburukan untuk kedua-duanya tetapi mari kita jelaskan dari dalam konteks permainan.</p>
<p>✅ Salah satu buku pengaturcaraan paling terkenal yang pernah ditulis ada kaitannya dengan <a href="https://en.wikipedia.org/wiki/Design_Patterns">corak reka bentuk</a>.</p>
<p>Dalam permainan, anda mempunyai <code>objek permainan</code> yang merupakan objek yang ada di layar. Ini bermakna mereka mempunyai lokasi pada sistem koordinat kartesian, yang dicirikan oleh mempunyai koordinat <code>x</code> dan <code>y</code>. Semasa anda mengembangkan permainan, anda akan melihat bahawa semua objek permainan anda mempunyai harta benda yang biasa, biasa untuk setiap permainan yang anda buat, iaitu elemen yang:</p>
<ul>
<li><strong>berdasarkan lokasi</strong> Sebilangan besar, jika tidak semua, elemen permainan berdasarkan lokasi. Ini bermaksud bahawa mereka mempunyai lokasi, <code>x</code> dan<code>y</code>.</li>
<li><strong>bergerak</strong> Ini adalah objek yang boleh berpindah ke lokasi baru. Ini biasanya pahlawan, raksasa atau NPC (watak bukan pemain), tetapi tidak misalnya, objek statik seperti pokok.</li>
<li><strong>merosakkan diri</strong> Objek-objek ini hanya wujud untuk jangka masa yang ditetapkan sebelum mereka disiapkan untuk dihapus. Biasanya ini diwakili oleh boolean <code>mati</code> atau <code>dimusnahkan</code> yang memberi isyarat kepada mesin permainan bahawa objek ini tidak lagi boleh diberikan.</li>
<li><strong>cool-down</strong> ‘Cool-down’ adalah sifat khas di antara objek yang berumur pendek. Contoh biasa ialah sekeping teks atau kesan grafik seperti letupan yang hanya dapat dilihat selama beberapa milisaat.</li>
</ul>
<p>✅ Fikirkan permainan seperti Pac-Man. Bolehkah anda mengenal pasti empat jenis objek yang disenaraikan di atas dalam permainan ini?</p>
<h3 id="menyatakan-tingkah-laku">Menyatakan tingkah laku</h3>
<p>Yang kami terangkan di atas adalah tingkah laku yang boleh dimiliki oleh objek permainan. Jadi bagaimana kita mengekodkannya? Kita boleh menyatakan tingkah laku ini sebagai kaedah yang berkaitan dengan kelas atau objek.</p>
<p><strong>Kelas</strong></p>
<p>Ideanya adalah untuk menggunakan <code>kelas</code> bersama dengan <code>pewarisan</code> untuk menyelesaikan penambahan tingkah laku tertentu ke kelas.</p>
<p>✅ Warisan adalah konsep penting untuk difahami. Ketahui lebih lanjut mengenai <a href="https://developer.mozilla.org/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">artikel MDN mengenai pewarisan</a>.</p>
<p>Diekspresikan melalui kod, objek permainan biasanya dapat terlihat seperti ini:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">//menubuhkan kelas GameObject</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">class</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="at">constructor</span>(x<span class="op">,</span> y<span class="op">,</span> type) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="kw">this</span>.<span class="at">type</span> <span class="op">=</span> type<span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">//kelas ini akan memperluaskan sifat kelas yang ada pada GameObject</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">class</span> Movable <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="at">constructor</span>(x<span class="op">,</span>y<span class="op">,</span> type) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="kw">super</span>(x<span class="op">,</span>y<span class="op">,</span> type)</a>
<a class="sourceLine" id="cb1-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-16" title="16"></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">//objek bergerak ini dapat dipindahkan di skrin</span></a>
<a class="sourceLine" id="cb1-18" title="18">  <span class="at">moveTo</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-19" title="19">    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb1-20" title="20">    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></a>
<a class="sourceLine" id="cb1-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co">//ini adalah kelas khusus yang meluaskan kelas Bergerak, sehingga dapat memanfaatkan semua sifat yang diwarisi</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw">class</span> Hero <span class="kw">extends</span> Movable <span class="op">{</span></a>
<a class="sourceLine" id="cb1-26" title="26">  <span class="at">constructor</span>(x<span class="op">,</span>y) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-27" title="27">    <span class="kw">super</span>(x<span class="op">,</span>y<span class="op">,</span> <span class="st">&#39;Hero&#39;</span>)</a>
<a class="sourceLine" id="cb1-28" title="28">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-30" title="30"></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co">//kelas ini, sebaliknya, hanya mewarisi sifat GameObject</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="kw">class</span> Tree <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb1-33" title="33">  <span class="at">constructor</span>(x<span class="op">,</span>y) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-34" title="34">    <span class="kw">super</span>(x<span class="op">,</span>y<span class="op">,</span> <span class="st">&#39;Tree&#39;</span>)</a>
<a class="sourceLine" id="cb1-35" title="35">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-37" title="37"></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co">//hero dapat bergerak...</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="kw">const</span> hero <span class="op">=</span> <span class="kw">new</span> <span class="at">Hero</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="va">hero</span>.<span class="at">moveTo</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">5</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-41" title="41"></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="co">//tetapi pokok tidak boleh</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="kw">const</span> tree <span class="op">=</span> <span class="kw">new</span> <span class="at">Tree</span>()<span class="op">;</span></a></code></pre></div>
<p>✅ Luangkan masa beberapa minit untuk membayangkan semula pahlawan Pac-Man (misalnya Inky, Pinky atau Blinky) dan bagaimana ia ditulis dalam JavaScript.</p>
<p><strong>Komposisi</strong></p>
<p>Cara yang berbeza untuk menangani pewarisan objek adalah dengan menggunakan <em>Komposisi</em>. Kemudian, objek menyatakan tingkah laku mereka seperti ini:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">//buat pemalar untuk gameObject</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> gameObject <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">x</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">//...dan satu constant untuk bergerak</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw">const</span> movable <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="at">moveTo</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">//buat pemalar movableObject terdiri daripada pemalar gameObject dan bergerak</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="kw">const</span> movableObject <span class="op">=</span> <span class="op">{</span>...<span class="at">gameObject</span><span class="op">,</span> ...<span class="at">movable</span><span class="op">};</span></a>
<a class="sourceLine" id="cb2-17" title="17"></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">//kemudian buat fungsi untuk membuat Hero baru yang mewarisi sifat movableObject</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="kw">function</span> <span class="at">createHero</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-20" title="20">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-21" title="21">    ...<span class="at">movableObject</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-22" title="22">    x<span class="op">,</span></a>
<a class="sourceLine" id="cb2-23" title="23">    y<span class="op">,</span></a>
<a class="sourceLine" id="cb2-24" title="24">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;Hero&#39;</span></a>
<a class="sourceLine" id="cb2-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-27" title="27"><span class="co">//...dan objek statik yang hanya mewarisi sifat gameObject</span></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="kw">function</span> <span class="at">createStatic</span>(x<span class="op">,</span> y<span class="op">,</span> type) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-29" title="29">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-30" title="30">    ...<span class="at">gameObject</span></a>
<a class="sourceLine" id="cb2-31" title="31">    x<span class="op">,</span></a>
<a class="sourceLine" id="cb2-32" title="32">    y<span class="op">,</span></a>
<a class="sourceLine" id="cb2-33" title="33">    type</a>
<a class="sourceLine" id="cb2-34" title="34">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="co">//buat hero dan gerakkannya</span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="kw">const</span> hero <span class="op">=</span> <span class="at">createHero</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">10</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="va">hero</span>.<span class="at">moveTo</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">5</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-39" title="39"><span class="co">//dan buat pokok statik yang hanya berdiri</span></a>
<a class="sourceLine" id="cb2-40" title="40"><span class="kw">const</span> tree <span class="op">=</span> <span class="at">createStatic</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="st">&#39;Tree&#39;</span>)<span class="op">;</span> </a></code></pre></div>
<p><strong>Corak mana yang harus saya gunakan?</strong></p>
<p>Terpulang kepada anda corak yang anda pilih. JavaScript menyokong kedua-dua paradigma ini.</p>
<p>–</p>
<p>Pola lain yang biasa dalam pengembangan permainan menangani masalah menangani pengalaman dan prestasi pengguna permainan.</p>
<h2 id="corak-pub-sub">Corak pub / sub</h2>
<p>✅ Pub / Sub bermaksud ‘publish-subscribe’</p>
<p>Corak ini mengemukakan idea bahawa bahagian aplikasi anda yang berbeza tidak boleh saling mengenali. Kenapa begitu? Ini menjadikannya lebih mudah untuk melihat apa yang berlaku secara umum jika pelbagai bahagian dipisahkan. Ini juga menjadikannya lebih mudah untuk mengubah tingkah laku secara tiba-tiba jika anda perlu Bagaimana kita mencapainya? Kami melakukan ini dengan mewujudkan beberapa konsep:</p>
<ul>
<li><strong>mesej</strong>: Mesej biasanya merupakan rentetan teks yang disertai dengan muatan pilihan (sekeping data yang menjelaskan tentang mesej itu) Mesej biasa dalam permainan boleh menjadi <code>KEY_PRESSED_ENTER</code>.</li>
<li><strong>publish</strong>: Elemen ini <em>menerbitkan</em> mesej dan mengirimkannya kepada semua pelanggan.</li>
<li><strong>subscriber</strong>: Elemen ini <em>mendengar</em> mesej tertentu dan menjalankan beberapa tugas sebagai hasil daripada menerima mesej ini, seperti menembakkan laser.</li>
</ul>
<p>Pelaksanaannya cukup kecil tetapi coraknya sangat kuat. Inilah cara ia dapat dilaksanakan:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">//sediakan kelas EventEmitter yang mengandungi pendengar</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">class</span> EventEmitter <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">this</span>.<span class="at">listeners</span> <span class="op">=</span> <span class="op">{};</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">//apabila mesej diterima, biarkan pendengar menangani muatannya</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="at">on</span>(message<span class="op">,</span> listener) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span>.<span class="at">listeners</span>[message]) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-9" title="9">      <span class="kw">this</span>.<span class="at">listeners</span>[message] <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="kw">this</span>.<span class="at">listeners</span>[message].<span class="at">push</span>(listener)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">//semasa mesej dihantar, hantarkannya kepada pendengar dengan muatan</span></a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="at">emit</span>(message<span class="op">,</span> payload <span class="op">=</span> <span class="kw">null</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-15" title="15">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">listeners</span>[message]) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-16" title="16">      <span class="kw">this</span>.<span class="at">listeners</span>[message].<span class="at">forEach</span>(l <span class="kw">=&gt;</span> <span class="at">l</span>(message<span class="op">,</span> payload))</a>
<a class="sourceLine" id="cb3-17" title="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="op">}</span></a></code></pre></div>
<p>Untuk menggunakan kod di atas, kita dapat membuat implementasi yang sangat kecil:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">//sediakan struktur mesej</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> Messages <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">HERO_MOVE_LEFT</span><span class="op">:</span> <span class="st">&#39;HERO_MOVE_LEFT&#39;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">};</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">//memanggil eventEmitter yang anda tetapkan di atas</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">const</span> eventEmitter <span class="op">=</span> <span class="kw">new</span> <span class="at">EventEmitter</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">//sediakan hero</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="kw">const</span> hero <span class="op">=</span> <span class="at">createHero</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">//biarkan eventEmitter tahu untuk menonton mesej yang berkaitan dengan pahlawan yang bergerak ke kiri, dan bertindak di atasnya</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">HERO_MOVE_LEFT</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="va">hero</span>.<span class="at">move</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13"></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">//sediakan tetingkap untuk mendengarkan acara keyup, khususnya jika anak panah kiri dipukul, mengirimkan pesan untuk menggerakkan pahlawan ke kiri</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="va">window</span>.<span class="at">addEventListener</span>(<span class="st">&#39;keyup&#39;</span><span class="op">,</span> (evt) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-16" title="16">  <span class="cf">if</span> (<span class="va">evt</span>.<span class="at">key</span> <span class="op">===</span> <span class="st">&#39;ArrowLeft&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-17" title="17">    <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">HERO_MOVE_LEFT</span>)</a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Di atas kami menyambungkan acara papan kekunci, <code>ArrowLeft</code> dan menghantar mesej <code>HERO_MOVE_LEFT</code>. Kami mendengar mesej itu dan memindahkan <code>hero</code> sebagai hasilnya. Kekuatan dengan corak ini ialah pendengar acara dan wira tidak saling mengenali antara satu sama lain. Anda boleh memetakan semula <code>ArrowLeft</code> ke kekunci <code>A</code>. Selain itu mungkin untuk melakukan sesuatu yang sama sekali berbeza pada <code>ArrowLeft</code> dengan membuat beberapa pengeditan pada fungsi <code>on</code> eventEmitter:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">HERO_MOVE_LEFT</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="va">hero</span>.<span class="at">move</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Oleh kerana keadaan menjadi lebih rumit semasa permainan anda berkembang, corak ini tetap sama dalam kerumitan dan kod anda tetap bersih. Sangat digalakkan untuk menggunakan corak ini.</p>
<hr />
<h2 id="cabaran">🚀 Cabaran</h2>
<p>Fikirkan bagaimana corak pub-sub dapat meningkatkan permainan. Bahagian mana yang harus memancarkan acara, dan bagaimana reaksi permainan terhadapnya? Inilah peluang anda untuk menjadi kreatif, memikirkan permainan baru dan bagaimana bahagiannya berkelakuan.</p>
<h2 id="kuiz-pasca-kuliah">Kuiz Pasca Kuliah</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/30">Kuiz Pasca Kuliah</a></p>
<h2 id="mengkaji-belajar-sendiri">Mengkaji &amp; Belajar Sendiri</h2>
<p>Ketahui lebih lanjut mengenai Pub/Sub dengan <a href="https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber">membaca mengenainya</a>.</p>
<h2 id="tugasan">Tugasan</h2>
<p><a href="assignment.ms.md">Mockup permainan</a></p>
</body>
</html>
