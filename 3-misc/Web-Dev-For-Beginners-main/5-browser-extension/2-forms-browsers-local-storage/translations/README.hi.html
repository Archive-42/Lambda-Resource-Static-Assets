<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.hi</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="ब्राउज़र-एक्सटेंशन-प्रोजेक्ट-पार्ट-2-एक-एपीआई-को-कॉल-करें-स्थानीय-भंडारण-का-उपयोग-करें">ब्राउज़र एक्सटेंशन प्रोजेक्ट पार्ट 2: एक एपीआई को कॉल करें, स्थानीय भंडारण का उपयोग करें</h1>
<h2 id="पूर्व-व्याख्यान-प्रश्नोत्तरी">पूर्व व्याख्यान प्रश्नोत्तरी</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/25?loc=hi">पूर्व व्याख्यान प्रश्नोत्तरी</a></p>
<h3 id="परिचय">परिचय</h3>
<p>इस पाठ में, आप अपने ब्राउज़र एक्सटेंशन के फ़ॉर्म को सबमिट करके एक एपीआई कॉल करेंगे और अपने ब्राउज़र एक्सटेंशन में परिणाम प्रदर्शित करेंगे। इसके अलावा, आप भविष्य के संदर्भ और उपयोग के लिए अपने ब्राउज़र के स्थानीय भंडारण में डेटा कैसे संग्रहीत कर सकते हैं, इसके बारे में जानेंगे।</p>
<p>✅ अपना कोड कहां रखना है, यह जानने के लिए उपयुक्त फाइलों में क्रमांकित खंडों का पालन करें</p>
<h3 id="एक्सटेंशन-में-हेरफेर-करने-के-लिए-तत्वों-को-सेट-करें">एक्सटेंशन में हेरफेर करने के लिए तत्वों को सेट करें:</h3>
इस समय तक आपने अपने ब्राउज़र एक्सटेंशन के लिए फॉर्म और
<div>
<p>के लिए HTML बना लिया है। अब से, आपको <code>/src/index.js</code> फ़ाइल में काम करना होगा और बिट द्वारा अपना एक्सटेंशन बिट बनाना होगा। अपनी परियोजना स्थापित करने और निर्माण की प्रक्रिया पर <a href="../../1-about-browsers/translations/README.hi.md">पिछले पाठ</a> देखें।</p>
<p>अपने <code>index.js</code> फ़ाइल में काम करना, विभिन्न क्षेत्रों से जुड़े मूल्यों को धारण करने के लिए कुछ <code>const</code> चर बनाकर शुरू करें:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// form fields</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> form <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">const</span> region <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.region-name&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">const</span> apiKey <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.api-key&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">// results</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">const</span> errors <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.errors&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw">const</span> loading <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.loading&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">const</span> results <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.result-container&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="kw">const</span> usage <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.carbon-usage&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">const</span> fossilfuel <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.fossil-fuel&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">const</span> myregion <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.my-region&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">const</span> clearBtn <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;.clear-btn&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>इन सभी क्षेत्रों को उनके सीएसएस वर्ग द्वारा संदर्भित किया जाता है, जैसा कि आपने इसे पिछले पाठ में HTML में सेट किया था।</p>
<h3 id="लिस्टेनेर-जोड़े">लिस्टेनेर जोड़े</h3>
<p>इसके बाद, ईवेंट श्रोताओं को फ़ॉर्म और स्पष्ट बटन में जोड़ें, जो फ़ॉर्म को रीसेट करता है, ताकि यदि कोई उपयोगकर्ता फ़ॉर्म को सबमिट करता है या उस रीसेट बटन को क्लिक करता है, तो कुछ घटित होगा, और फ़ाइल के निचले भाग में ऐप को आरंभीकृत करने के लिए कॉल जोड़ें:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">form</span>.<span class="at">addEventListener</span>(<span class="st">&#39;submit&#39;</span><span class="op">,</span> (e) <span class="kw">=&gt;</span> <span class="at">handleSubmit</span>(e))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">clearBtn</span>.<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> (e) <span class="kw">=&gt;</span> <span class="at">reset</span>(e))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="at">init</span>()<span class="op">;</span></a></code></pre></div>
<p>✅ ध्यान दें कि शॉर्टहैंड एक सबमिट या क्लिक करने के लिए सुनने के लिए प्रयोग किया जाता है, और यह कैसे घटना को हैंडल या रीसेट कार्यों के लिए पारित किया जाता है। क्या आप इस शॉर्टहैंड के बराबर लंबे प्रारूप में लिख सकते हैं? आप क्या पसंद करेंगे?</p>
<h3 id="init-फ़ंक्शन-और-reset-फ़ंक्शन-का-निर्माण-करें">Init() फ़ंक्शन और reset() फ़ंक्शन का निर्माण करें:</h3>
<p>अब आप उस फ़ंक्शन का निर्माण करने जा रहे हैं जो एक्सटेंशन को इनिशियलाइज़ करता है, जिसे init() कहा जाता है:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">function</span> <span class="at">init</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="co">//if anything is in localStorage, pick it up</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">const</span> storedApiKey <span class="op">=</span> <span class="va">localStorage</span>.<span class="at">getItem</span>(<span class="st">&#39;apiKey&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">const</span> storedRegion <span class="op">=</span> <span class="va">localStorage</span>.<span class="at">getItem</span>(<span class="st">&#39;regionName&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="co">//set icon to be generic green</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="co">//todo</span></a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="cf">if</span> (storedApiKey <span class="op">===</span> <span class="kw">null</span> <span class="op">||</span> storedRegion <span class="op">===</span> <span class="kw">null</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-10" title="10">        <span class="co">//if we don&#39;t have the keys, show the form</span></a>
<a class="sourceLine" id="cb3-11" title="11">        <span class="va">form</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;block&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12">        <span class="va">results</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-13" title="13">        <span class="va">loading</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-14" title="14">        <span class="va">clearBtn</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-15" title="15">        <span class="va">errors</span>.<span class="at">textContent</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-16" title="16">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-17" title="17">        <span class="co">//if we have saved keys/regions in localStorage, show results when they load</span></a>
<a class="sourceLine" id="cb3-18" title="18">        <span class="at">displayCarbonUsage</span>(storedApiKey<span class="op">,</span> storedRegion)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-19" title="19">        <span class="va">results</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-20" title="20">        <span class="va">form</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-21" title="21">        <span class="va">clearBtn</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;block&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-22" title="22">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="op">};</span></a>
<a class="sourceLine" id="cb3-24" title="24"></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="kw">function</span> <span class="at">reset</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-26" title="26">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-27" title="27">    <span class="co">//clear local storage for region only</span></a>
<a class="sourceLine" id="cb3-28" title="28">    <span class="va">localStorage</span>.<span class="at">removeItem</span>(<span class="st">&#39;regionName&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-29" title="29">    <span class="at">init</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="op">}</span></a></code></pre></div>
<p>इस फ़ंक्शन में, कुछ दिलचस्प तर्क है। इसके माध्यम से पढ़ना, क्या आप देख सकते हैं कि क्या होता है?</p>
<ul>
<li>यदि उपयोगकर्ता ने APIKey और क्षेत्र कोड को स्थानीय संग्रहण में संग्रहीत किया है, तो यह जांचने के लिए दो <code>const</code> लगाए गए हैं।</li>
<li>यदि उनमें से कोई भी नल है, तो अपनी शैली को ‘ब्लॉक’ के रूप में प्रदर्शित करने के लिए रूप बदलकर दिखाएं</li>
<li>रिजल्ट, लोडिंग और clearBtn को छिपाएं और किसी भी एरर टेक्स्ट को खाली स्ट्रिंग पर सेट करें</li>
<li>यदि कोई की और क्षेत्र मौजूद है, तो एक दिनचर्या शुरू करें:
<ul>
<li>कार्बन उपयोग डेटा प्राप्त करने के लिए एपीआई को कॉल करें</li>
<li>परिणाम क्षेत्र छिपाएँ</li>
<li>फॉर्म को छिपाएं</li>
<li>रीसेट बटन दिखाएं</li>
</ul></li>
</ul>
<p>आगे बढ़ने से पहले, ब्राउज़रों में उपलब्ध एक बहुत ही महत्वपूर्ण अवधारणा के बारे में सीखना उपयोगी है: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">लोकलस्टोरेज</a>.लोकलस्टोरेज, ब्राउज़र में स्ट्रिंगस को ‘की-वैल्यू’ पेयर के रूप में स्टोर करने का एक उपयोगी तरीका है। इस प्रकार के वेब स्टोरेज को ब्राउजर में डेटा को मैनेज करने के लिए जावास्क्रिप्ट द्वारा मैनिपुलेट किया जा सकता है। लोकलस्टोरीज की समय सीमा समाप्त नहीं होती है, जबकि ब्राउजर के बंद होने पर एक अन्य तरह का वेब स्टोरेज, स्टोरेज साफ हो जाता है। विभिन्न प्रकार के भंडारण में उनके उपयोग के पक्ष और विपक्ष हैं।</p>
<blockquote>
<p>नोट - आपके ब्राउज़र एक्सटेंशन का अपना स्थानीय भंडारण है; मुख्य ब्राउज़र विंडो एक अलग उदाहरण है और अलग-अलग व्यवहार करता है।</p>
</blockquote>
<p>उदाहरण के लिए, आपने अपने APIKey को एक स्ट्रिंग मान दिया है, और आप देख सकते हैं कि यह एज पर “एक वेब पेज का निरीक्षण” (आप एक ब्राउज़र का निरीक्षण करने के लिए राइट-क्लिक कर सकते हैं) पर सेट है और एप्लिकेशन टैब पर जाकर भंडारण देख सकते हैं।</p>
<figure>
<img src="../images/localstorage.png" alt="स्थानीय भंडारण फलक" /><figcaption>स्थानीय भंडारण फलक</figcaption>
</figure>
<p>✅ उन स्थितियों के बारे में सोचें जहां आप लोकलस्टोरेज में कुछ डेटा स्टोर नहीं करना चाहेंगे। सामान्य तौर पर, लोकलस्टेज में एपीआई कीज रखना एक बुरा विचार है! क्या आप देख सकते हैं क्यों? हमारे मामले में, चूंकि हमारा ऐप विशुद्ध रूप से सीखने के लिए है और ऐप स्टोर में तैनात नहीं किया जाएगा, इसलिए हम इस पद्धति का उपयोग करेंगे।</p>
<p>ध्यान दें कि आप लोकलस्टोरेज में हेरफेर करने के लिए वेब एपीआई का उपयोग करते हैं, या तो <code>getItem()</code>, <code>setItem()</code> या <code>removeItem()</code> का उपयोग करके। यह ब्राउज़रों में व्यापक रूप से समर्थित है।</p>
<p><code>DisplayCarbonUsage()</code> फ़ंक्शन का निर्माण करने से पहले जिसे <code>init()</code> कहा जाता है, चलो प्रारंभिक फॉर्म सबमिशन को संभालने के लिए कार्यक्षमता का निर्माण करते हैं।</p>
<h3 id="फॉर्म-सबमिट-करें">फॉर्म सबमिट करें</h3>
<p>एक फ़ंक्शन बनाएं जिसे <code>handleSubmit</code> कहा जाता है जो एक ईवेंट तर्क <code>(e)</code> को स्वीकार करता है । ईवेंट को प्रचार करने से रोकें (इस मामले में, हम ब्राउज़र को रिफ्रेश होने से रोकना चाहते हैं) और एक नया फ़ंक्शन, <code>setUpUser</code>, तर्कों में गुजरते हुए <code>apiKey.value</code> और <code>region.value</code> को कॉल करें। इस प्रकार, आप उन दो मानों का उपयोग करते हैं, जो प्रारंभिक फ़ील्ड के माध्यम से लाए जाते हैं जब उपयुक्त फ़ील्ड पॉपुलेट किए जाते हैं।</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">function</span> <span class="at">handleSubmit</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="at">setUpUser</span>(<span class="va">apiKey</span>.<span class="at">value</span><span class="op">,</span> <span class="va">region</span>.<span class="at">value</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>✅ अपनी मेमोरी को रीफ़्रेश करें - आपने अंतिम पाठ में जो HTML सेट किया है, उसमें दो इनपुट फ़ील्ड हैं, जिनके <code>value</code> को फ़ाइल के शीर्ष पर स्थापित किए गए <code>const</code> के माध्यम से कैप्चर किया गया है, और वे दोनों <code>required</code> हैं, इसलिए ब्राउज़र उपयोगकर्ताओं को रोकता है शून्य मानों को इनपुट करने से।</p>
<h3 id="उपयोगकर्ता-सेट-करें">उपयोगकर्ता सेट करें</h3>
<p><code>SetUpUser</code> फ़ंक्शन पर चलते हुए, यहां वह स्थान है जहां आप apiKey और क्षेत्रनाम के लिए स्थानीय संग्रहण मान सेट करते हैं। एक नया फ़ंक्शन जोड़ें:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">function</span> <span class="at">setUpUser</span>(apiKey<span class="op">,</span> regionName) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="va">localStorage</span>.<span class="at">setItem</span>(<span class="st">&#39;apiKey&#39;</span><span class="op">,</span> apiKey)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="va">localStorage</span>.<span class="at">setItem</span>(<span class="st">&#39;regionName&#39;</span><span class="op">,</span> regionName)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="va">loading</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;block&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="va">errors</span>.<span class="at">textContent</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="va">clearBtn</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;block&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="co">//make initial call</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="at">displayCarbonUsage</span>(apiKey<span class="op">,</span> regionName)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>यह फ़ंक्शन API को दिखाने के लिए एक लोडिंग संदेश सेट करता है। इस बिंदु पर, आप इस ब्राउज़र एक्सटेंशन के सबसे महत्वपूर्ण कार्य को बनाने पर पहुंचे हैं!</p>
<h3 id="कार्बन-उपयोग-प्रदर्शित-करें">कार्बन उपयोग प्रदर्शित करें</h3>
<p>अंत में यह एपीआई क्वेरी करने का समय है!</p>
<p>आगे जाने से पहले, हमें एपीआई पर चर्चा करनी चाहिए। एपीआई, या [एप्लीकेशन प्रोग्रामिंग इंटरफेस] (https://www.webopedia.com/TERM/A/API.html), वेब डेवलपर के टूलबॉक्स का एक महत्वपूर्ण तत्व है। वे एक दूसरे के साथ बातचीत और इंटरफ़ेस करने के लिए कार्यक्रमों के लिए मानक तरीके प्रदान करते हैं। उदाहरण के लिए, यदि आप एक वेब साइट का निर्माण कर रहे हैं, जिसे डेटाबेस से क्वेरी करने की आवश्यकता है, तो किसी ने आपके उपयोग के लिए एक एपीआई बनाया होगा। जबकि कई प्रकार के API हैं, जिनमें से एक सबसे लोकप्रिय है <a href="https://www.smashingmagazine.com/2018/01/understanding-use-rest-api/">REST API</a></p>
<p>✅ ‘REST’ शब्द ‘Representational State Transfer’ के लिए है और इसमें डेटा लाने के लिए विभिन्न कॉन्फ़िगर किए गए URL का उपयोग करने की सुविधा है। डेवलपर्स के लिए उपलब्ध विभिन्न प्रकार के एपीआई पर थोड़ा शोध करें। क्या प्रारूप आपको अपील करता है?</p>
<p>इस फ़ंक्शन के बारे में ध्यान देने योग्य महत्वपूर्ण बातें हैं। पहले <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code>async</code> कीवर्ड</a> को नोटिस करें। अपने कार्यों को लिखना ताकि वे अतुल्यकालिक रूप से चलाते हैं इसका मतलब है कि वे एक कार्रवाई की प्रतीक्षा करते हैं, जैसे डेटा लौटाए जाने से पहले, पूरा होने से पहले।</p>
<p>यहाँ <code>async</code> के बारे में एक त्वरित वीडियो है:</p>
<p><a href="https://youtube.com/watch?v=YwmlRkrxvkk" title="promises के प्रबंधन के लिए Async और Await"><img src="https://img.youtube.com/vi/YwmlRkrxvkk/0.jpg" alt="promises के प्रबंधन के लिए Async और Await" /></a></p>
<blockquote>
<p>Async/wait के वीडियो के लिए ऊपर दी गई छवि पर क्लिक करें।</p>
</blockquote>
<p>C02Signal API को क्वेरी करने के लिए एक नया फ़ंक्शन बनाएँ:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="im">import</span> axios <span class="im">from</span> <span class="st">&#39;../node_modules/axios&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">async</span> <span class="kw">function</span> <span class="at">displayCarbonUsage</span>(apiKey<span class="op">,</span> region) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">        <span class="cf">await</span> axios</a>
<a class="sourceLine" id="cb6-6" title="6">            .<span class="at">get</span>(<span class="st">&#39;https://api.co2signal.com/v1/latest&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-7" title="7">                <span class="dt">params</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-8" title="8">                    <span class="dt">countryCode</span><span class="op">:</span> region<span class="op">,</span></a>
<a class="sourceLine" id="cb6-9" title="9">                <span class="op">},</span></a>
<a class="sourceLine" id="cb6-10" title="10">                <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-11" title="11">                    <span class="st">&#39;auth-token&#39;</span><span class="op">:</span> apiKey<span class="op">,</span></a>
<a class="sourceLine" id="cb6-12" title="12">                <span class="op">},</span></a>
<a class="sourceLine" id="cb6-13" title="13">            <span class="op">}</span>)</a>
<a class="sourceLine" id="cb6-14" title="14">            .<span class="at">then</span>((response) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-15" title="15">                <span class="kw">let</span> CO2 <span class="op">=</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">response</span>.<span class="va">data</span>.<span class="va">data</span>.<span class="at">carbonIntensity</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-16" title="16"></a>
<a class="sourceLine" id="cb6-17" title="17">                <span class="co">//calculateColor(CO2);</span></a>
<a class="sourceLine" id="cb6-18" title="18"></a>
<a class="sourceLine" id="cb6-19" title="19">                <span class="va">loading</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-20" title="20">                <span class="va">form</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-21" title="21">                <span class="va">myregion</span>.<span class="at">textContent</span> <span class="op">=</span> region<span class="op">;</span></a>
<a class="sourceLine" id="cb6-22" title="22">                <span class="va">usage</span>.<span class="at">textContent</span> <span class="op">=</span></a>
<a class="sourceLine" id="cb6-23" title="23">                    <span class="va">Math</span>.<span class="at">round</span>(<span class="va">response</span>.<span class="va">data</span>.<span class="va">data</span>.<span class="at">carbonIntensity</span>) <span class="op">+</span> <span class="st">&#39; grams (grams C02 emitted per kilowatt hour)&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-24" title="24">                <span class="va">fossilfuel</span>.<span class="at">textContent</span> <span class="op">=</span></a>
<a class="sourceLine" id="cb6-25" title="25">                    <span class="va">response</span>.<span class="va">data</span>.<span class="va">data</span>.<span class="va">fossilFuelPercentage</span>.<span class="at">toFixed</span>(<span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-26" title="26">                    <span class="st">&#39;% (percentage of fossil fuels used to generate electricity)&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-27" title="27">                <span class="va">results</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;block&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-28" title="28">            <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-29" title="29">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-30" title="30">        <span class="va">console</span>.<span class="at">log</span>(error)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-31" title="31">        <span class="va">loading</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-32" title="32">        <span class="va">results</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&#39;none&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-33" title="33">        <span class="va">errors</span>.<span class="at">textContent</span> <span class="op">=</span> <span class="st">&#39;Sorry, we have no data for the region you have requested.&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-34" title="34">    <span class="op">}</span></a>
<a class="sourceLine" id="cb6-35" title="35"><span class="op">}</span></a></code></pre></div>
<p>यह एक बड़ा फंगक्शन है। यहाँ क्या चल रहा है?</p>
<ul>
<li>सर्वोत्तम कार्यप्रणालियों का पालन करते हुए, आप इस फ़ंक्शन का उपयोग करने के लिए एक <code>async</code> कीवर्ड का उपयोग करते हैं। फ़ंक्शन में एक <code>try/catch</code> ब्लॉक होता है क्योंकि यह एक वादा लौटाएगा जब एपीआई डेटा लौटाएगा। चूँकि आपके पास उस गति पर नियंत्रण नहीं है जो एपीआई प्रतिक्रिया देगा (यह प्रतिक्रिया नहीं दे सकता है!), आपको इस अनिश्चितता को असंगत रूप से कॉल करने की आवश्यकता है।</li>
<li>आप अपने API की का उपयोग करके अपने क्षेत्र का डेटा प्राप्त करने के लिए co2signal API की क्वेरी कर रहे हैं। उस की का उपयोग करने के लिए, आपको अपने हेडर मापदंडों में एक प्रकार के प्रमाणीकरण का उपयोग करना होगा।</li>
<li>एपीआई के जवाब देने के बाद, आप इस डेटा को दिखाने के लिए अपने स्क्रीन के कुछ हिस्सों में इसके रिस्पॉन्स डेटा के विभिन्न तत्वों को असाइन करते हैं।</li>
<li>यदि कोई त्रुटि है, या कोई परिणाम नहीं है, तो आप एक त्रुटि संदेश दिखाते हैं।</li>
</ul>
<p>✅ Asyncronous प्रोग्रामिंग पैटर्न का उपयोग करना आपके टूलबॉक्स में एक और बहुत उपयोगी उपकरण है। <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">विभिन्न तरीकों के बारे में</a> पढ़ें आप इस प्रकार के कोड को कॉन्फ़िगर कर सकते हैं।</p>
<p>बधाई हो! यदि आप अपना एक्सटेंशन बनाते हैं (<code>npm run build</code>) और इसे अपने एक्सटेंशन पेन में रिफ्रेश करें, तो आपके पास काम करने का एक्सटेंशन है! केवल एक चीज जो काम नहीं कर रही है वह आइकन है, और आप इसे अगले पाठ में ठीक कर देंगे।</p>
<hr />
<h2 id="चुनौती">🚀 चुनौती</h2>
<p>हमने इन पाठों में अब तक कई प्रकार के एपीआई पर चर्चा की है। एक वेब एपीआई चुनें और गहराई से शोध करें कि यह क्या प्रदान करता है। उदाहरण के लिए, <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">HTML ड्रैग एंड ड्रॉप एपीआई</a> जैसे ब्राउज़रों के भीतर उपलब्ध एपीआई पर एक नज़र डालें। आपकी राय में एक महान एपीआई क्या है?</p>
<h2 id="व्याख्यान-उपरांत-प्रश्नोत्तरी">व्याख्यान उपरांत प्रश्नोत्तरी</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/26?loc=hi">व्याख्यान उपरांत प्रश्नोत्तरी</a></p>
<h2 id="समीक्षा-और-स्व-अध्ययन">समीक्षा और स्व अध्ययन</h2>
<p>आपने इस पाठ में लोकलस्टोरेज और एपीआई के बारे में सीखा, दोनों पेशेवर वेब डेवलपर के लिए बहुत उपयोगी हैं। क्या आप सोच सकते हैं कि ये दोनों चीजें एक साथ कैसे काम करती हैं? इस बारे में सोचें कि आप एक वेब साइट को कैसे आर्किटेक्ट करेंगे जो एक एपीआई द्वारा उपयोग की जाने वाली वस्तुओं को संग्रहीत करेगी।</p>
<h2 id="असाइनमेंट">असाइनमेंट</h2>
<p><a href="assignment.hi.md">एक एपीआई अपनाएं</a></p>
</body>
</html>
