<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.es</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="construye-un-juego-espacial-parte-iv-adición-de-un-láser-y-detección-de-colisiones">Construye un juego espacial Parte IV: Adición de un láser y detección de colisiones</h1>
<figure>
<img src="video-url" alt="video" /><figcaption>video</figcaption>
</figure>
<h2 id="pre-lecture-prueba"><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/35">Pre-lecture prueba</a></h2>
<p>¡En esta lección aprenderá a disparar láseres con JavaScript! Agregaremos dos cosas a nuestro juego:</p>
<ul>
<li><strong>Un láser</strong>: este láser se dispara desde la nave de tu héroe y verticalmente hacia arriba</li>
<li><strong>Detección de colisiones</strong>, como parte de la implementación de la capacidad de <em>disparar</em>, también agregaremos algunas reglas de juego interesantes:
<ul>
<li><strong>El láser golpea al enemigo</strong>: El enemigo muere si es golpeado por un láser</li>
<li><strong>El láser golpea la pantalla superior</strong>: un láser se destruye si golpea la parte superior de la pantalla</li>
<li><strong>Colisión de héroe y enemigo</strong>: Un enemigo y el héroe son destruidos si se golpean entre sí.</li>
<li><strong>El enemigo golpea la parte inferior de la pantalla</strong>: un enemigo y un héroe son destruidos si el enemigo golpea la parte inferior de la pantalla.</li>
</ul></li>
</ul>
<p>En resumen, tú, <em>el héroe</em>, debes golpear a todos los enemigos con un láser antes de que logren moverse a la parte inferior de la pantalla.</p>
<p>✅ Investiga un poco sobre el primer juego de computadora jamás escrito. ¿Cuál fue su funcionalidad?</p>
<p>¡Seamos heroicos juntos!</p>
<h2 id="detección-de-colisiones">Detección de colisiones</h2>
<p>¿Cómo hacemos la detección de colisiones? Necesitamos pensar en los objetos de nuestro juego como rectángulos que se mueven. ¿Por qué podrías preguntar? Bueno, la imagen utilizada para dibujar un objeto de juego es un rectángulo: tiene una <code>x</code>,<code>y</code>, <code>width</code> y <code>height</code>.</p>
<p>Si dos rectángulos, es decir, un héroe y un enemigo <em>se cruzan</em>, tienes una colisión. Lo que debería suceder entonces depende de las reglas del juego. Para implementar la detección de colisiones, por lo tanto, necesita lo siguiente:</p>
<ol type="1">
<li><p>Una forma de obtener una representación rectangular de un objeto de juego, algo como esto:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">rectFromGameObject</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">top</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="dt">left</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="dt">bottom</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">height</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="dt">right</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">width</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="op">}</span></a></code></pre></div></li>
<li><p>Una función de comparación, esta función puede verse así:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">function</span> <span class="at">intersectRect</span>(r1<span class="op">,</span> r2) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="cf">return</span> <span class="op">!</span>(<span class="va">r2</span>.<span class="at">left</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">right</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="va">r2</span>.<span class="at">right</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">left</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="va">r2</span>.<span class="at">top</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">bottom</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="va">r2</span>.<span class="at">bottom</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">top</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">}</span></a></code></pre></div></li>
</ol>
<h2 id="cómo-destruimos-las-cosas">¿Cómo destruimos las cosas?</h2>
<p>Para destruir cosas en un juego, debes informarle al juego que ya no debería pintar este elemento en el bucle del juego que se activa en un intervalo determinado. Una forma de hacer esto es marcar un objeto del juego como <em>muerto</em> cuando algo sucede, así:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// ocurrió la colisión</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">enemy</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span></a></code></pre></div>
<p>Luego, puede proceder a clasificar los objetos <em>muertos</em> antes de volver a pintar la pantalla, así:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1">gameObjects <span class="op">=</span> <span class="va">gameObject</span>.<span class="at">filter</span>(go <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">go</span>.<span class="at">dead</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="cómo-disparamos-un-láser">¿Cómo disparamos un láser?</h2>
<p>Disparar un láser se traduce en responder a un evento clave y crear un objeto que se mueve en una dirección determinada. Por lo tanto, debemos realizar los siguientes pasos:</p>
<ol type="1">
<li><strong>Crea un objeto láser</strong>: desde la parte superior de la nave de nuestro héroe, que al ser creado comienza a moverse hacia la parte superior de la pantalla.</li>
<li><strong>Adjuntar código a un evento clave</strong>: necesitamos elegir una tecla en el teclado que represente al jugador disparando el láser.</li>
<li><strong>Crea un objeto de juego que parezca un láser</strong> cuando se presiona la tecla.</li>
</ol>
<h2 id="enfriamiento-en-nuestro-láser">Enfriamiento en nuestro láser</h2>
<p>El láser debe dispararse cada vez que presione una tecla, como <em>espacio</em>, por ejemplo. Para evitar que el juego produzca demasiados láseres en poco tiempo, debemos solucionar este problema. La solución es implementar un llamado <em>enfriamiento</em>, un temporizador, que garantiza que un láser solo se pueda disparar con cierta frecuencia. Puede implementar eso de la siguiente manera:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">class</span> Cooldown <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="at">constructor</span>(time) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">this</span>.<span class="at">cool</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">      <span class="kw">this</span>.<span class="at">cool</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="op">},</span> time)</a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="op">}</span></a>
<a class="sourceLine" id="cb5-9" title="9"></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="kw">class</span> Weapon <span class="op">{</span></a>
<a class="sourceLine" id="cb5-11" title="11">  constructor <span class="op">{</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="at">fire</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">||</span> <span class="kw">this</span>.<span class="va">cooldown</span>.<span class="at">cool</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-15" title="15">      <span class="co">// produce a laser</span></a>
<a class="sourceLine" id="cb5-16" title="16">      <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">Cooldown</span>(<span class="dv">500</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-17" title="17">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-18" title="18">      <span class="co">// do nothing - it hasn&#39;t cooled down yet.</span></a>
<a class="sourceLine" id="cb5-19" title="19">    <span class="op">}</span></a>
<a class="sourceLine" id="cb5-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="op">}</span></a></code></pre></div>
<p>✅ Consulte la lección 1 de la serie de juegos espaciales para recordar los <em>tiempos de reutilización</em>.</p>
<h2 id="qué-construir">Qué construir</h2>
<p>Tomará el código existente (que debería haber limpiado y refactorizado) de la lección anterior y lo extenderá. Empiece con el código de la parte II o utilice el código en <a href="/your-work">Part III- starter</a>.</p>
<blockquote>
<p>consejo: el láser con el que trabajará ya está en su carpeta de activos y su código hace referencia a él</p>
</blockquote>
<ul>
<li><strong>Agregue detección de colisiones</strong>, cuando un láser choca con algo, se deben aplicar las siguientes reglas:
<ol type="1">
<li><strong>El láser golpea al enemigo</strong>: el enemigo muere si es golpeado por un láser</li>
<li><strong>El láser golpea la pantalla superior</strong>: un láser se destruye si golpea la parte superior de nuestra pantalla</li>
<li><strong>Colisión de héroe y enemigo</strong>: un enemigo y el héroe son destruidos si se golpean entre sí</li>
<li><strong>El enemigo golpea la parte inferior de la pantalla</strong>: un enemigo y un héroe son destruidos si el enemigo golpea la parte inferior de la pantalla.</li>
</ol></li>
</ul>
<h2 id="pasos-recomendados">Pasos recomendados</h2>
<p>Busque los archivos que se han creado para usted en la subcarpeta <code>su-trabajo</code>. Debe contener lo siguiente:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="ex">-</span><span class="kw">|</span> <span class="ex">assets</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">enemyShip.png</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">player.png</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">laserRed.png</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="ex">-</span><span class="kw">|</span> <span class="ex">index.html</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="ex">-</span><span class="kw">|</span> <span class="ex">app.js</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="ex">-</span><span class="kw">|</span> <span class="ex">package.json</span></a></code></pre></div>
<p>Comienzas tu proyecto en la carpeta <code>your_work</code> escribiendo:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="bu">cd</span> your-work</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="ex">npm</span> start</a></code></pre></div>
<p>Lo anterior iniciará un servidor HTTP en la dirección <code>http: // localhost: 5000</code>. Abra un navegador e ingrese esa dirección, ahora mismo debería representar al héroe y a todos los enemigos, nada se mueve, todavía :).</p>
<h3 id="agregar-código">Agregar código</h3>
<ol type="1">
<li><p><strong>Configure una representación rectangular de su objeto de juego, para manejar la colisión</strong> El siguiente código le permite obtener una representación rectangular de un <code>GameObject</code>. Edite su clase GameObject para extenderla:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="at">rectFromGameObject</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">      <span class="dt">top</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-4" title="4">      <span class="dt">left</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-5" title="5">      <span class="dt">bottom</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">height</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-6" title="6">      <span class="dt">right</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">width</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-7" title="7">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="op">}</span></a></code></pre></div></li>
<li><p><strong>Agregar código que verifica la colisión</strong> Esta será una nueva función que prueba si dos rectángulos se cruzan:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">intersectRect</span>(r1<span class="op">,</span> r2) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="cf">return</span> <span class="op">!</span>(</a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="va">r2</span>.<span class="at">left</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">right</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="va">r2</span>.<span class="at">right</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">left</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="va">r2</span>.<span class="at">top</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">bottom</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-6" title="6">    <span class="va">r2</span>.<span class="at">bottom</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">top</span></a>
<a class="sourceLine" id="cb9-7" title="7">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="op">}</span></a></code></pre></div></li>
<li><strong>Agregar capacidad de disparo láser</strong>
<ol type="1">
<li><p><strong>Agregar mensaje de evento clave</strong>. La tecla <em>espacio</em> debería crear un láser justo encima de la nave del héroe. Agregue tres constantes en el objeto Mensajes:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"> KEY_EVENT_SPACE<span class="op">:</span> <span class="st">&quot;KEY_EVENT_SPACE&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-2" title="2"> COLLISION_ENEMY_LASER<span class="op">:</span> <span class="st">&quot;COLLISION_ENEMY_LASER&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-3" title="3"> COLLISION_ENEMY_HERO<span class="op">:</span> <span class="st">&quot;COLLISION_ENEMY_HERO&quot;</span><span class="op">,</span></a></code></pre></div></li>
</ol></li>
<li><p><strong>Tecla de espacio en el mango</strong>. Edite la función de teclado <code>window.addEventListener</code> para manejar espacios:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1">  } <span class="cf">else</span> <span class="cf">if</span>(<span class="va">evt</span>.<span class="at">keyCode</span> <span class="op">===</span> <span class="dv">32</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">    <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_SPACE</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="op">}</span></a></code></pre></div></li>
<li><p><strong>Agregar oyentes</strong>. Edite la función ʻinitGame () `para asegurarse de que el héroe pueda disparar cuando se presione la barra espaciadora:</p>
<pre><code>```javascript
eventEmitter.on(Messages.KEY_EVENT_SPACE, () =&gt; {
 if (hero.canFire()) {
   hero.fire();
 }
```

y agregue una nueva función `eventEmitter.on ()` para asegurar el comportamiento cuando un enemigo choca con un láser:

   ```javascript
   eventEmitter.on(Messages.COLLISION_ENEMY_LASER, (_, { first, second }) =&gt; {
     first.dead = true;
     second.dead = true;
   })
   ```</code></pre>
<p>1.<strong>Mover objeto</strong>, asegúrese de que el láser se mueva gradualmente hacia la parte superior de la pantalla. Creará una nueva clase Laser que amplíe <code>GameObject</code>, como lo hizo antes:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1">  <span class="kw">class</span> Laser <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="at">constructor</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="kw">super</span>(x<span class="op">,</span>y)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-4" title="4">    (<span class="kw">this</span>.<span class="at">width</span> <span class="op">=</span> <span class="dv">9</span>)<span class="op">,</span> (<span class="kw">this</span>.<span class="at">height</span> <span class="op">=</span> <span class="dv">33</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-5" title="5">    <span class="kw">this</span>.<span class="at">type</span> <span class="op">=</span> <span class="st">&#39;Laser&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="kw">this</span>.<span class="at">img</span> <span class="op">=</span> laserImg<span class="op">;</span></a>
<a class="sourceLine" id="cb13-7" title="7">    <span class="kw">let</span> id <span class="op">=</span> <span class="at">setInterval</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-8" title="8">      <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">y</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-9" title="9">        <span class="kw">this</span>.<span class="at">y</span> <span class="op">-=</span> <span class="dv">15</span><span class="op">;</span></a>
<a class="sourceLine" id="cb13-10" title="10">      <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-11" title="11">        <span class="kw">this</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb13-12" title="12">        <span class="at">clearInterval</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-13" title="13">      <span class="op">}</span></a>
<a class="sourceLine" id="cb13-14" title="14">    <span class="op">},</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb13-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="op">}</span></a></code></pre></div></li>
<li><p><strong>Manejar colisiones</strong>, implementar reglas de colisión para el láser. Agregue una función <code>updateGameObjects()</code> que prueba los objetos en colisión en busca de hits</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">function</span> <span class="at">updateGameObjects</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="kw">const</span> enemies <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>(go <span class="kw">=&gt;</span> <span class="va">go</span>.<span class="at">type</span> <span class="op">===</span> <span class="st">&#39;Enemy&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-3" title="3">  <span class="kw">const</span> lasers <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>((go) <span class="kw">=&gt;</span> <span class="va">go</span>.<span class="at">type</span> <span class="op">===</span> <span class="st">&quot;Laser&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">// laser hit something</span></a>
<a class="sourceLine" id="cb14-5" title="5">  <span class="va">lasers</span>.<span class="at">forEach</span>((l) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-6" title="6">    <span class="va">enemies</span>.<span class="at">forEach</span>((m) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-7" title="7">      <span class="cf">if</span> (<span class="at">intersectRect</span>(<span class="va">l</span>.<span class="at">rectFromGameObject</span>()<span class="op">,</span> <span class="va">m</span>.<span class="at">rectFromGameObject</span>())) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-8" title="8">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">COLLISION_ENEMY_LASER</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-9" title="9">        <span class="dt">first</span><span class="op">:</span> l<span class="op">,</span></a>
<a class="sourceLine" id="cb14-10" title="10">        <span class="dt">second</span><span class="op">:</span> m<span class="op">,</span></a>
<a class="sourceLine" id="cb14-11" title="11">      <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb14-13" title="13">   <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-15" title="15"></a>
<a class="sourceLine" id="cb14-16" title="16">  gameObjects <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>(go <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">go</span>.<span class="at">dead</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="op">}</span>  </a></code></pre></div>
<p>Asegúrate de agregar <code>updateGameObjects()</code> en tu bucle de juego en <code>window.onload</code>.</p>
<ol start="4" type="1">
<li><p><strong>Implemente el tiempo de reutilización</strong> en el láser, para que solo se pueda disparar con cierta frecuencia.</p>
<p>Finalmente, edite la clase Hero para que pueda enfriarse:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1">   <span class="kw">class</span> Hero <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2"> <span class="at">constructor</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-3" title="3">   <span class="kw">super</span>(x<span class="op">,</span> y)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4">   (<span class="kw">this</span>.<span class="at">width</span> <span class="op">=</span> <span class="dv">99</span>)<span class="op">,</span> (<span class="kw">this</span>.<span class="at">height</span> <span class="op">=</span> <span class="dv">75</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-5" title="5">   <span class="kw">this</span>.<span class="at">type</span> <span class="op">=</span> <span class="st">&quot;Hero&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-6" title="6">   <span class="kw">this</span>.<span class="at">speed</span> <span class="op">=</span> <span class="op">{</span> <span class="dt">x</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb15-7" title="7">   <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8"> <span class="op">}</span></a>
<a class="sourceLine" id="cb15-9" title="9"> <span class="at">fire</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-10" title="10">   <span class="va">gameObjects</span>.<span class="at">push</span>(<span class="kw">new</span> <span class="at">Laser</span>(<span class="kw">this</span>.<span class="at">x</span> <span class="op">+</span> <span class="dv">45</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span> <span class="op">-</span> <span class="dv">10</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb15-11" title="11">   <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">=</span> <span class="dv">500</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-12" title="12"></a>
<a class="sourceLine" id="cb15-13" title="13">   <span class="kw">let</span> id <span class="op">=</span> <span class="at">setInterval</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-14" title="14">     <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-15" title="15">       <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">-=</span> <span class="dv">100</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-16" title="16">     <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-17" title="17">       <span class="at">clearInterval</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-18" title="18">     <span class="op">}</span></a>
<a class="sourceLine" id="cb15-19" title="19">   <span class="op">},</span> <span class="dv">200</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-20" title="20"> <span class="op">}</span></a>
<a class="sourceLine" id="cb15-21" title="21"> <span class="at">canFire</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-22" title="22">   <span class="cf">return</span> <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">===</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-23" title="23"> <span class="op">}</span></a>
<a class="sourceLine" id="cb15-24" title="24">   <span class="op">}</span></a></code></pre></div></li>
</ol></li>
</ol>
<p>En este punto, ¡tu juego tiene algunas funciones! Puedes navegar con tus flechas, disparar un láser con tu barra espaciadora y los enemigos desaparecen cuando los golpeas. ¡Bien hecho!</p>
<p>🚀 Desafío: ¡Agrega una explosión! Echa un vistazo a los recursos del juego en <a href="../solution/spaceArt/readme.txt">el repositorio de Space Art</a> e intenta agregar una explosión cuando el láser golpea a un extraterrestre.</p>
<h2 id="post-lecture-prueba"><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/36">Post-lecture prueba</a></h2>
<h2 id="revisión-y-autoestudio">Revisión y autoestudio</h2>
<p>Experimente con los intervalos de su juego hasta ahora. ¿Qué pasa cuando los cambias? Más información sobre <a href="https://www.freecodecamp.org/news/javascript-timing-events-settimeout-and-setinterval/">eventos de tiempo de JavaScript</a>.</p>
<p><strong>Asignación</strong>: <a href="assignment.es.md">Explorar colisiones</a></p>
</body>
</html>
