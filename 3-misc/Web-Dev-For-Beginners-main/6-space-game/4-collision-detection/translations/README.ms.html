<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.ms</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="bina-permainan-angkasa-bahagian-4-menambah-laser-dan-mengesan-perlanggaran">Bina Permainan Angkasa Bahagian 4: Menambah Laser dan Mengesan Perlanggaran</h1>
<h2 id="kuiz-pra-kuliah">Kuiz Pra Kuliah</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/35">Kuiz Pra Kuliah</a></p>
<p>Dalam pelajaran ini, anda akan belajar bagaimana menembak laser dengan JavaScript! Kami akan menambah dua perkara pada permainan kami:</p>
<ul>
<li><strong>Laser</strong>: laser ini ditembak dari kapal wira anda dan menegak ke atas</li>
<li><strong>Pengesanan perlanggaran</strong>, sebagai bagian dari menerapkan kemampuan untuk <em>menembak</em> kami juga akan menambahkan beberapa peraturan permainan yang bagus:
<ul>
<li><strong>Laser menyerang musuh</strong>: Musuh mati jika terkena laser</li>
<li><strong>Laser mencecah skrin atas</strong>: Laser hancur jika memukul bahagian atas skrin</li>
<li><strong>Pertempuran musuh dan pahlawan</strong>: Musuh dan pahlawan musnah jika saling memukul</li>
<li><strong>Musuh memukul bahagian bawah layar</strong>: Musuh dan pahlawan hancur jika musuh memukul bahagian bawah layar</li>
</ul></li>
</ul>
<p>Pendek kata, anda - <em>pahlawan</em> - perlu memukul semua musuh dengan laser sebelum mereka berjaya bergerak ke bahagian bawah skrin.</p>
<p>âœ… Lakukan sedikit kajian mengenai permainan komputer pertama yang pernah ditulis. Apa fungsinya?</p>
<p>Mari sama-sama menjadi wira!</p>
<h2 id="pengesanan-perlanggaran">Pengesanan perlanggaran</h2>
<p>Bagaimanakah kita melakukan pengesanan perlanggaran? Kita perlu memikirkan objek permainan kita sebagai segi empat tepat bergerak. Mengapa anda bertanya? Nah, gambar yang digunakan untuk menggambar objek permainan adalah persegi panjang: ia memiliki <code>x</code>, <code>y</code>, <code>width</code> dan<code>height</code>.</p>
<p>Sekiranya dua segi empat tepat, iaitu pahlawan dan musuh <em>berpotongan</em>, anda akan bertembung. Apa yang harus berlaku adalah mengikut peraturan permainan. Oleh itu, untuk melaksanakan pengesanan perlanggaran anda memerlukan perkara berikut:</p>
<ol type="1">
<li><p>Cara untuk mendapatkan representasi segi empat tepat dari objek permainan, seperti ini:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">rectFromGameObject</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">top</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="dt">left</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="dt">bottom</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">height</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="dt">right</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">width</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="op">}</span></a></code></pre></div></li>
<li><p>Fungsi perbandingan, fungsi ini boleh kelihatan seperti ini:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">function</span> <span class="at">intersectRect</span>(r1<span class="op">,</span> r2) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="cf">return</span> <span class="op">!</span>(<span class="va">r2</span>.<span class="at">left</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">right</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="va">r2</span>.<span class="at">right</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">left</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="va">r2</span>.<span class="at">top</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">bottom</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="va">r2</span>.<span class="at">bottom</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">top</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">}</span></a></code></pre></div></li>
</ol>
<h2 id="bagaimanakah-kita-memusnahkan-perkara">Bagaimanakah kita memusnahkan perkara</h2>
<p>Untuk menghancurkan sesuatu dalam permainan, anda perlu memberitahu permainan bahawa permainan ini tidak lagi harus melukis item ini dalam gelung permainan yang mencetuskan pada selang waktu tertentu. Cara untuk melakukannya adalah dengan menandakan objek permainan sebagai <em>mati</em> apabila sesuatu berlaku, seperti:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// collision happened</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">enemy</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span></a></code></pre></div>
<p>Kemudian anda meneruskan untuk menyusun <em>mati</em> objek sebelum mengecat semula skrin, seperti:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1">gameObjects <span class="op">=</span> <span class="va">gameObject</span>.<span class="at">filter</span>(go <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">go</span>.<span class="at">dead</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="bagaimanakah-kita-menghidupkan-laser">Bagaimanakah kita menghidupkan laser</h2>
<p>Menyalakan laser diterjemahkan untuk bertindak balas terhadap peristiwa penting dan membuat objek yang bergerak ke arah tertentu. Oleh itu, kita perlu melakukan langkah-langkah berikut:</p>
<ol type="1">
<li><strong>Buat objek laser</strong>: dari bahagian atas kapal pahlawan kita, bahawa setelah penciptaan mula bergerak ke atas menuju bahagian atas layar.</li>
<li><strong>Lampirkan kod ke acara utama</strong>: kita perlu memilih kunci pada papan kekunci yang mewakili pemain yang menembak laser.</li>
<li><strong>Buat objek permainan yang kelihatan seperti laser</strong> apabila kekunci ditekan.</li>
</ol>
<h2 id="cooldown-menggunakan-laser-kami">Cooldown menggunakan laser kami</h2>
<p>Laser perlu menyala setiap kali anda menekan kekunci, seperti <em>ruang</em> misalnya. Untuk mengelakkan permainan menghasilkan terlalu banyak laser dalam masa yang singkat, kita perlu memperbaikinya. Penyelesaiannya adalah dengan menerapkan <em>cooldown</em>, pemasa, yang memastikan bahawa laser hanya dapat dipecat begitu kerap. Anda boleh melaksanakannya dengan cara berikut:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">class</span> Cooldown <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="at">constructor</span>(time) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">this</span>.<span class="at">cool</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">      <span class="kw">this</span>.<span class="at">cool</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="op">},</span> time)</a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="op">}</span></a>
<a class="sourceLine" id="cb5-9" title="9"></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="kw">class</span> Weapon <span class="op">{</span></a>
<a class="sourceLine" id="cb5-11" title="11">  constructor <span class="op">{</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="at">fire</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">||</span> <span class="kw">this</span>.<span class="va">cooldown</span>.<span class="at">cool</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-15" title="15">      <span class="co">// menghasilkan laser</span></a>
<a class="sourceLine" id="cb5-16" title="16">      <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">Cooldown</span>(<span class="dv">500</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-17" title="17">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-18" title="18">      <span class="co">// buat apa-apa - ia belum cooldown.</span></a>
<a class="sourceLine" id="cb5-19" title="19">    <span class="op">}</span></a>
<a class="sourceLine" id="cb5-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="op">}</span></a></code></pre></div>
<p>âœ… Rujuk pelajaran 1 dalam siri permainan ruang untuk mengingatkan diri anda mengenai <em>cooldowns</em>.</p>
<h2 id="apakah-yang-hendak-dibina">Apakah yang hendak dibina</h2>
<p>Anda akan mengambil kod yang ada (yang seharusnya anda bersihkan dan refactored) dari pelajaran sebelumnya, dan memperpanjangnya. Mulakan dengan kod dari bahagian II atau gunakan kod di <a href="/your-work">Bahagian III-starter</a></p>
<blockquote>
<p>tip: laser yang akan anda gunakan sudah ada di folder aset anda dan dirujuk oleh kod anda</p>
</blockquote>
<ul>
<li><strong>Tambahkan pengesanan perlanggaran</strong>, apabila laser bertabrakan dengan sesuatu peraturan berikut harus berlaku:
<ol type="1">
<li><strong>Laser memukul musuh</strong>: musuh mati jika terkena laser</li>
<li><strong>Laser mencecah skrin atas</strong>: Laser hancur jika menyentuh bahagian atas skrin kita</li>
<li><strong>Pertembungan musuh dan pahlawan</strong>: musuh dan pahlawan musnah jika saling memukul</li>
<li><strong>Musuh memukul bahagian bawah skrin</strong>: Musuh dan pahlawan hancur jika musuh memukul bahagian bawah skrin</li>
</ol></li>
</ul>
<h2 id="langkah-langkah-yang-disyorkan">Langkah-langkah yang disyorkan</h2>
<p>Cari fail yang telah dibuat untuk anda dalam sub folder <code>your-work</code>. Ia harus mengandungi yang berikut:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="ex">-</span><span class="kw">|</span> <span class="ex">assets</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">enemyShip.png</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">player.png</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">laserRed.png</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="ex">-</span><span class="kw">|</span> <span class="ex">index.html</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="ex">-</span><span class="kw">|</span> <span class="ex">app.js</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="ex">-</span><span class="kw">|</span> <span class="ex">package.json</span></a></code></pre></div>
<p>Anda memulakan projek anda folder <code>your_work</code> dengan mengetik:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="bu">cd</span> your-work</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="ex">npm</span> start</a></code></pre></div>
<p>Perkara di atas akan memulakan Pelayan HTTP pada alamat <code>http: // localhost: 5000</code>. Buka penyemak imbas dan masukkan alamatnya, sekarang ia harus menjadikan pahlawan dan semua musuh, tidak ada yang bergerak - namun :).</p>
<h3 id="tambah-kod">Tambah kod</h3>
<ol type="1">
<li><p><strong>Siapkan representasi segi empat tepat dari objek permainan anda, untuk menangani perlanggaran</strong> Kod di bawah ini membolehkan anda mendapatkan representasi segi empat tepat dari <code>GameObject</code>. Edit kelas GameObject anda untuk memperluasnya:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="at">rectFromGameObject</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-3" title="3">      <span class="dt">top</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-4" title="4">      <span class="dt">left</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-5" title="5">      <span class="dt">bottom</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">y</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">height</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-6" title="6">      <span class="dt">right</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">x</span> <span class="op">+</span> <span class="kw">this</span>.<span class="at">width</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-7" title="7">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="op">}</span></a></code></pre></div></li>
<li><p><strong>Tambahkan kod yang memeriksa perlanggaran</strong> Ini akan menjadi fungsi baru yang menguji sama ada dua segi empat tepat bersilang:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">intersectRect</span>(r1<span class="op">,</span> r2) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="cf">return</span> <span class="op">!</span>(</a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="va">r2</span>.<span class="at">left</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">right</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="va">r2</span>.<span class="at">right</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">left</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="va">r2</span>.<span class="at">top</span> <span class="op">&gt;</span> <span class="va">r1</span>.<span class="at">bottom</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-6" title="6">    <span class="va">r2</span>.<span class="at">bottom</span> <span class="op">&lt;</span> <span class="va">r1</span>.<span class="at">top</span></a>
<a class="sourceLine" id="cb9-7" title="7">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="op">}</span></a></code></pre></div></li>
<li><strong>Tambahkan keupayaan menembak laser</strong>
<ol type="1">
<li><p><strong>Tambah mesej peristiwa penting</strong>. Kekunci <em>ruang</em> harus membuat laser tepat di atas kapal wira. Tambahkan tiga pemalar dalam objek Mesej:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"> KEY_EVENT_SPACE<span class="op">:</span> <span class="st">&quot;KEY_EVENT_SPACE&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-2" title="2"> COLLISION_ENEMY_LASER<span class="op">:</span> <span class="st">&quot;COLLISION_ENEMY_LASER&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-3" title="3"> COLLISION_ENEMY_HERO<span class="op">:</span> <span class="st">&quot;COLLISION_ENEMY_HERO&quot;</span><span class="op">,</span></a></code></pre></div>
<ol type="1">
<li><strong>Kendalikan kekunci ruang</strong>. Edit fungsi kekunci <code>window.addEventListener</code> untuk menangani ruang:</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1">} <span class="cf">else</span> <span class="cf">if</span>(<span class="va">evt</span>.<span class="at">keyCode</span> <span class="op">===</span> <span class="dv">32</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_SPACE</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="op">}</span></a></code></pre></div>
<ol type="1">
<li><p><strong>Tambah pendengar</strong>. Edit fungsi <code>initGame ()</code> untuk memastikan bahawa pahlawan dapat melepaskan tembakan ketika spasi terkena:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_SPACE</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="cf">if</span> (<span class="va">hero</span>.<span class="at">canFire</span>()) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="va">hero</span>.<span class="at">fire</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="op">}</span></a></code></pre></div></li>
</ol>
<p>and add a new <code>eventEmitter.on()</code> function to ensure behavior when an enemy collides with a laser:</p>
<pre><code>```javascript
eventEmitter.on(Messages.COLLISION_ENEMY_LASER, (_, { first, second }) =&gt; {
  first.dead = true;
  second.dead = true;
})
```</code></pre>
<ol type="1">
<li><p><strong>Pindahkan objek</strong>, Pastikan laser bergerak ke bahagian atas skrin secara beransur-ansur. Anda akan membuat kelas Laser baru yang meluaskan <code>GameObject</code>, seperti yang telah anda lakukan sebelumnya:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">class</span> Laser <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="at">constructor</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">super</span>(x<span class="op">,</span>y)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-4" title="4">(<span class="kw">this</span>.<span class="at">width</span> <span class="op">=</span> <span class="dv">9</span>)<span class="op">,</span> (<span class="kw">this</span>.<span class="at">height</span> <span class="op">=</span> <span class="dv">33</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="kw">this</span>.<span class="at">type</span> <span class="op">=</span> <span class="st">&#39;Laser&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="kw">this</span>.<span class="at">img</span> <span class="op">=</span> laserImg<span class="op">;</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="kw">let</span> id <span class="op">=</span> <span class="at">setInterval</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="cf">if</span> (<span class="kw">this</span>.<span class="at">y</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-9" title="9">  <span class="kw">this</span>.<span class="at">y</span> <span class="op">-=</span> <span class="dv">15</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-11" title="11">  <span class="kw">this</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-12" title="12">  <span class="at">clearInterval</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-13" title="13">   <span class="op">}</span></a>
<a class="sourceLine" id="cb14-14" title="14">  <span class="op">},</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb14-15" title="15"> <span class="op">}</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="op">}</span></a></code></pre></div></li>
<li><p>** Tangani perlanggaran **, Terapkan peraturan perlanggaran untuk laser. Tambahkan fungsi <code>updateGameObjects ()</code> yang menguji objek bertembung untuk hits</p></li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">function</span> <span class="at">updateGameObjects</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2"> <span class="kw">const</span> enemies <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>(go <span class="kw">=&gt;</span> <span class="va">go</span>.<span class="at">type</span> <span class="op">===</span> <span class="st">&#39;Enemy&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-3" title="3"> <span class="kw">const</span> lasers <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>((go) <span class="kw">=&gt;</span> <span class="va">go</span>.<span class="at">type</span> <span class="op">===</span> <span class="st">&quot;Laser&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4"> <span class="co">// laser hit something</span></a>
<a class="sourceLine" id="cb15-5" title="5"> <span class="va">lasers</span>.<span class="at">forEach</span>((l) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-6" title="6"> <span class="va">enemies</span>.<span class="at">forEach</span>((m) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-7" title="7">   <span class="cf">if</span> (<span class="at">intersectRect</span>(<span class="va">l</span>.<span class="at">rectFromGameObject</span>()<span class="op">,</span> <span class="va">m</span>.<span class="at">rectFromGameObject</span>())) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-8" title="8">   <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">COLLISION_ENEMY_LASER</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-9" title="9">     <span class="dt">first</span><span class="op">:</span> l<span class="op">,</span></a>
<a class="sourceLine" id="cb15-10" title="10">     <span class="dt">second</span><span class="op">:</span> m<span class="op">,</span></a>
<a class="sourceLine" id="cb15-11" title="11">     <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-12" title="12">   <span class="op">}</span></a>
<a class="sourceLine" id="cb15-13" title="13">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-15" title="15"></a>
<a class="sourceLine" id="cb15-16" title="16">gameObjects <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>(go <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">go</span>.<span class="at">dead</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="op">}</span>  </a></code></pre></div>
<p>Pastikan untuk menambah <code>updateGameObjects ()</code> ke gelung permainan anda di <code>window.onload</code>.</p></li>
<li><p>** Terapkan cooldown ** pada laser, sehingga hanya dapat dipecat begitu kerap.</p></li>
</ol>
<p>Akhir sekali, edit kelas Wira sehingga dapat dikembalikan:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">class</span> Hero <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="at">constructor</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="kw">super</span>(x<span class="op">,</span> y)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-4" title="4">    (<span class="kw">this</span>.<span class="at">width</span> <span class="op">=</span> <span class="dv">99</span>)<span class="op">,</span> (<span class="kw">this</span>.<span class="at">height</span> <span class="op">=</span> <span class="dv">75</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="kw">this</span>.<span class="at">type</span> <span class="op">=</span> <span class="st">&quot;Hero&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-6" title="6">    <span class="kw">this</span>.<span class="at">speed</span> <span class="op">=</span> <span class="op">{</span> <span class="dt">x</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb16-7" title="7">    <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb16-9" title="9">  <span class="at">fire</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb16-10" title="10">    <span class="va">gameObjects</span>.<span class="at">push</span>(<span class="kw">new</span> <span class="at">Laser</span>(<span class="kw">this</span>.<span class="at">x</span> <span class="op">+</span> <span class="dv">45</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span> <span class="op">-</span> <span class="dv">10</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb16-11" title="11">    <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">=</span> <span class="dv">500</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-12" title="12"></a>
<a class="sourceLine" id="cb16-13" title="13">    <span class="kw">let</span> id <span class="op">=</span> <span class="at">setInterval</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-14" title="14">      <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-15" title="15">        <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">-=</span> <span class="dv">100</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-16" title="16">      <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-17" title="17">        <span class="at">clearInterval</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-18" title="18">      <span class="op">}</span></a>
<a class="sourceLine" id="cb16-19" title="19">    <span class="op">},</span> <span class="dv">200</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb16-21" title="21">  <span class="at">canFire</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb16-22" title="22">    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">cooldown</span> <span class="op">===</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-23" title="23">  <span class="op">}</span></a>
<a class="sourceLine" id="cb16-24" title="24"><span class="op">}</span></a></code></pre></div></li>
</ol>
<p>Pada ketika ini, permainan anda mempunyai beberapa fungsi! Anda boleh menavigasi dengan kekunci anak panah anda, menembak laser dengan bar ruang anda, dan musuh hilang ketika anda memukulnya. Bagus!</p>
<hr />
<h2 id="cabaran">ðŸš€ Cabaran</h2>
<p>Tambah letupan! Lihat aset permainan di <a href="../../solution/spaceArt/readme.txt">Space Art repo</a> dan cuba tambahkan letupan ketika laser memukul makhluk asing</p>
<h2 id="kuiz-pasca-kuliah">Kuiz Pasca Kuliah</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/36">Kuiz Pasca Kuliah</a></p>
<h2 id="mengkaji-belajar-sendiri">Mengkaji &amp; Belajar Sendiri</h2>
<p>Percubaan dengan selang permainan anda setakat ini. Apa yang berlaku apabila anda menukarnya? Baca lebih lanjut mengenai <a href="https://www.freecodecamp.org/news/javascript-timing-events-settimeout-and-setinterval/">acara pemasaan JavaScript</a>.</p>
<h2 id="tugasan">Tugasan</h2>
<p><a href="assignment.ms.md">Menerokai Perlanggaran</a></p>
</body>
</html>
