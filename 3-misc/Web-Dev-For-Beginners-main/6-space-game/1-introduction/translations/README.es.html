<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.es</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="construye-un-juego-espacial-parte-i-introducción">Construye un juego espacial Parte I: Introducción</h1>
<figure>
<img src="video-url" alt="video" /><figcaption>video</figcaption>
</figure>
<h2 id="pre-lecture-prueba"><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/29">Pre-lecture prueba</a></h2>
<h3 id="herencia-y-composición-en-el-desarrollo-de-juegos">Herencia y composición en el desarrollo de juegos</h3>
<p>En lecciones anteriores, no había mucha necesidad de preocuparse por la arquitectura de diseño de las aplicaciones que creó, ya que los proyectos tenían un alcance muy pequeño. Sin embargo, cuando sus aplicaciones crecen en tamaño y alcance, las decisiones de arquitectura se vuelven una preocupación mayor. Hay dos enfoques principales para crear aplicaciones más grandes en JavaScript: <em>composición</em> o <em>herencia</em>. Ambos tienen pros y contras, pero vamos a explicarlos desde el contexto de un juego.</p>
<p>✅ Uno de los libros de programación más famosos jamás escrito tiene que ver con <a href="https://en.wikipedia.org/wiki/Design_Patterns">patrones de diseño</a>.</p>
<p>En un juego tienes <code>game objects</code> que son objetos que existen en una pantalla. Esto significa que tienen una ubicación en un sistema de coordenadas cartesiano, caracterizado por tener una coordenada <code>x</code> e <code>y</code>. A medida que desarrolle un juego, notará que todos los objetos de su juego tienen una propiedad estándar, común para todos los juegos que crea, es decir, elementos que son:</p>
<ul>
<li><strong>location-based</strong> (basado en la ubicación): La mayoría, si no todos, los elementos del juego se basan en la ubicación. Esto significa que tienen una ubicación, una <code>x</code> y una<code>y</code>.</li>
<li><strong>movable</strong> (movible): Estos son objetos que pueden moverse a una nueva ubicación. Suele ser un héroe, un monstruo o un NPC (un personaje no jugador), pero no, por ejemplo, un objeto estático como un árbol.</li>
<li><strong>self-destructing</strong> (autodestructivo): Estos objetos solo existen durante un período de tiempo determinado antes de que se configuren para su eliminación. Por lo general, esto está representado por un booleano <code>dead</code> o <code>destroyed</code> que indica al motor del juego que este objeto ya no debe procesarse.</li>
<li><strong>cool-down</strong> (enfriamiento): ‘Cool-down’ es una propiedad típica entre los objetos de corta duración. Un ejemplo típico es un fragmento de texto o efecto gráfico como una explosión que solo debería verse durante unos pocos milisegundos.</li>
</ul>
<p>✅ Piense en un juego como Pac-Man. ¿Puedes identificar los cuatro tipos de objetos enumerados anteriormente en este juego?</p>
<h3 id="expresando-comportamiento">Expresando comportamiento</h3>
<p>Todo lo que describimos anteriormente son comportamientos que pueden tener los objetos del juego. Entonces, ¿cómo los codificamos? Podemos expresar este comportamiento como métodos asociados a clases u objetos.</p>
<p><strong>Clases</strong></p>
<p>La idea es usar <code>classes</code> junto con <code>inheritance</code> para lograr agregar un cierto comportamiento a una clase.</p>
<p>✅ La herencia es un concepto importante de comprender. Obtenga más información en el <a href="https://developer.mozilla.org/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">artículo de MDN sobre herencia</a>.</p>
<p>Expresado a través de código, un objeto de juego normalmente puede verse así:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">//configurar la clase GameObject</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">class</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="at">constructor</span>(x<span class="op">,</span> y<span class="op">,</span> type) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="kw">this</span>.<span class="at">type</span> <span class="op">=</span> type<span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">//esta clase extenderá las propiedades de clase inherentes del GameObject</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">class</span> Movable <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="at">constructor</span>(x<span class="op">,</span>y<span class="op">,</span> type) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="kw">super</span>(x<span class="op">,</span>y<span class="op">,</span> type)</a>
<a class="sourceLine" id="cb1-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-16" title="16"></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">//este objeto móvil se puede mover en la pantalla</span></a>
<a class="sourceLine" id="cb1-18" title="18">  <span class="at">moveTo</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-19" title="19">    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb1-20" title="20">    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></a>
<a class="sourceLine" id="cb1-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co">//esta es una clase específica que extiende la clase Movable, por lo que puede aprovechar todas las propiedades que hereda</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw">class</span> Hero <span class="kw">extends</span> Movable <span class="op">{</span></a>
<a class="sourceLine" id="cb1-26" title="26">  <span class="at">constructor</span>(x<span class="op">,</span>y) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-27" title="27">    <span class="kw">super</span>(x<span class="op">,</span>y<span class="op">,</span> <span class="st">&#39;Hero&#39;</span>)</a>
<a class="sourceLine" id="cb1-28" title="28">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-30" title="30"></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co">//esta clase, por otro lado, solo hereda las propiedades GameObject</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="kw">class</span> Tree <span class="kw">extends</span> GameObject <span class="op">{</span></a>
<a class="sourceLine" id="cb1-33" title="33">  <span class="at">constructor</span>(x<span class="op">,</span>y) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-34" title="34">    <span class="kw">super</span>(x<span class="op">,</span>y<span class="op">,</span> <span class="st">&#39;Tree&#39;</span>)</a>
<a class="sourceLine" id="cb1-35" title="35">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-36" title="36"><span class="op">}</span></a>
<a class="sourceLine" id="cb1-37" title="37"></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="co">// un héroe puede moverse...</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="kw">const</span> hero <span class="op">=</span> <span class="kw">new</span> <span class="at">Hero</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="va">hero</span>.<span class="at">moveTo</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">5</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-41" title="41"></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="co">//pero un árbol no puede</span></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="kw">const</span> tree <span class="op">=</span> <span class="kw">new</span> <span class="at">Tree</span>()<span class="op">;</span></a></code></pre></div>
<p>✅ Tómate unos minutos para volver a imaginar un héroe de Pac-Man (Inky, Pinky o Blinky, por ejemplo) y cómo se escribiría en JavaScript.</p>
<p><strong>Composición</strong></p>
<p>Una forma diferente de manejar la herencia de objetos es usando <em>Composición</em>. Entonces, los objetos expresan su comportamiento así:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">//crear un gameObject constante</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> gameObject <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">x</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">y</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-7" title="7"></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">//...y un movible constante</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw">const</span> movable <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="at">moveTo</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">//entonces la constante movableObject está compuesta por gameObject y constantes movibles</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="kw">const</span> movableObject <span class="op">=</span> <span class="op">{</span>...<span class="at">gameObject</span><span class="op">,</span> ...<span class="at">movable</span><span class="op">};</span></a>
<a class="sourceLine" id="cb2-17" title="17"></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">//luego crea una función para crear un nuevo Hero que hereda las propiedades de movableObject</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="kw">function</span> <span class="at">createHero</span>(x<span class="op">,</span> y) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-20" title="20">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-21" title="21">    ...<span class="at">movableObject</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-22" title="22">    x<span class="op">,</span></a>
<a class="sourceLine" id="cb2-23" title="23">    y<span class="op">,</span></a>
<a class="sourceLine" id="cb2-24" title="24">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;Hero&#39;</span></a>
<a class="sourceLine" id="cb2-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-27" title="27"><span class="co">//...y un objeto estático que hereda solo las propiedades de gameObject</span></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="kw">function</span> <span class="at">createStatic</span>(x<span class="op">,</span> y<span class="op">,</span> type) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-29" title="29">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-30" title="30">    ...<span class="at">gameObject</span></a>
<a class="sourceLine" id="cb2-31" title="31">    x<span class="op">,</span></a>
<a class="sourceLine" id="cb2-32" title="32">    y<span class="op">,</span></a>
<a class="sourceLine" id="cb2-33" title="33">    type</a>
<a class="sourceLine" id="cb2-34" title="34">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="co">//crea el héroe y muévelo</span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="kw">const</span> hero <span class="op">=</span> <span class="at">createHero</span>(<span class="dv">10</span><span class="op">,</span><span class="dv">10</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="va">hero</span>.<span class="at">moveTo</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">5</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-39" title="39"><span class="co">//y crea un árbol estático que solo se para alrededor</span></a>
<a class="sourceLine" id="cb2-40" title="40"><span class="kw">const</span> tree <span class="op">=</span> <span class="at">createStatic</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="st">&#39;Tree&#39;</span>)<span class="op">;</span> </a></code></pre></div>
<p><strong>¿Qué patrón debo usar?</strong></p>
<p>Depende de usted qué patrón elija. JavaScript es compatible con ambos paradigmas.</p>
<p>–</p>
<p>Otro patrón común en el desarrollo de juegos aborda el problema de manejar la experiencia y el rendimiento del usuario del juego.</p>
<h2 id="patrón-de-pubsub">Patrón de pub/sub</h2>
<p>✅ Pub/Sub significa publish-subscribe (publicar-suscribirse).</p>
<p>Este patrón aborda la idea de que las distintas partes de su aplicación no deben conocerse entre sí. ¿Porqué es eso? Hace que sea mucho más fácil ver lo que sucede en general si se separan varias partes. También facilita el cambio repentino de comportamiento si es necesario. ¿Cómo logramos esto? Hacemos esto estableciendo algunos conceptos:</p>
<ul>
<li><strong>message</strong> (mensaje: un mensaje suele ser una cadena de texto acompañada de una carga útil opcional (un dato que aclara de qué se trata el mensaje). Un mensaje típico en un juego puede ser <code>KEY_PRESSED_ENTER</code>.</li>
<li><strong>publisher</strong> (editor): este elemento <em>publica</em> un mensaje y lo envía a todos los suscriptores.</li>
<li><strong>subscriber</strong> (suscriptor): Este elemento <em>escucha</em> mensajes específicos y realiza alguna tarea como resultado de recibir este mensaje, como disparar un láser.</li>
</ul>
<p>La implementación es bastante pequeña pero es un patrón muy poderoso. Así es como se puede implementar:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">//configurar una clase EventEmitter que contenga oyentes</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">class</span> EventEmitter <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">this</span>.<span class="at">listeners</span> <span class="op">=</span> <span class="op">{};</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">//cuando se recibe un mensaje, deje que el oyente maneje su carga útil</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="at">on</span>(message<span class="op">,</span> listener) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">this</span>.<span class="at">listeners</span>[message]) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-9" title="9">      <span class="kw">this</span>.<span class="at">listeners</span>[message] <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="kw">this</span>.<span class="at">listeners</span>[message].<span class="at">push</span>(listener)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">//cuando se envía un mensaje, envíelo a un oyente con alguna carga útil</span></a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="at">emit</span>(message<span class="op">,</span> payload <span class="op">=</span> <span class="kw">null</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-15" title="15">    <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">listeners</span>[message]) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-16" title="16">      <span class="kw">this</span>.<span class="at">listeners</span>[message].<span class="at">forEach</span>(l <span class="kw">=&gt;</span> <span class="at">l</span>(message<span class="op">,</span> payload))</a>
<a class="sourceLine" id="cb3-17" title="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="op">}</span></a></code></pre></div>
<p>Para usar el código anterior, podemos crear una implementación muy pequeña:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">//configurar una estructura de mensaje</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> Messages <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">HERO_MOVE_LEFT</span><span class="op">:</span> <span class="st">&#39;HERO_MOVE_LEFT&#39;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">};</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">//invocar el eventEmitter que configuró anteriormente</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">const</span> eventEmitter <span class="op">=</span> <span class="kw">new</span> <span class="at">EventEmitter</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">//configurar un héroe</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="kw">const</span> hero <span class="op">=</span> <span class="at">createHero</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">//Informe al emisor de eventos que esté atento a los mensajes relacionados con el héroe que se mueve hacia la izquierda y actúe en consecuencia</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">HERO_MOVE_LEFT</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="va">hero</span>.<span class="at">move</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13"></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">//configurar la ventana para escuchar el evento keyup, específicamente si se golpea la flecha izquierda, emite un mensaje para mover al héroe a la izquierda</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="va">window</span>.<span class="at">addEventListener</span>(<span class="st">&#39;keyup&#39;</span><span class="op">,</span> (evt) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-16" title="16">  <span class="cf">if</span> (<span class="va">evt</span>.<span class="at">key</span> <span class="op">===</span> <span class="st">&#39;ArrowLeft&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-17" title="17">    <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">HERO_MOVE_LEFT</span>)</a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Arriba conectamos un evento de teclado, <code>ArrowLeft</code> y enviamos el mensaje <code>HERO_MOVE_LEFT</code>. Escuchamos ese mensaje y, como resultado, movemos al <code>hero</code>. El punto fuerte de este patrón es que el oyente del evento y el héroe no se conocen. Puede reasignar la ʻArrowLeft<code>a la tecla ʻA</code>. Además, sería posible hacer algo completamente diferente en <code>ArrowLeft</code> haciendo algunas ediciones en la función <code>on</code> del eventEmitter:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">HERO_MOVE_LEFT</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="va">hero</span>.<span class="at">move</span>(<span class="dv">5</span><span class="op">,</span><span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>A medida que las cosas se complican cuando tu juego crece, este patrón permanece igual en complejidad y tu código se mantiene limpio. Realmente se recomienda adoptar este patrón.</p>
<p>🚀Desafío: Piense en cómo el patrón pub-sub puede mejorar un juego. ¿Qué partes deberían emitir eventos y cómo debería reaccionar el juego ante ellos? Ahora tienes la oportunidad de ser creativo, pensar en un nuevo juego y en cómo podrían comportarse sus partes.</p>
<h2 id="post-lecture-prueba"><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/30">Post-lecture prueba</a></h2>
<h2 id="revisión-y-autoestudio">Revisión y autoestudio</h2>
<p>Obtenga más información sobre Pub / Sub al <a href="https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber?WT.mc_id=academic-13441-cxa">leer sobre él</a>.</p>
<p><strong>Tarea</strong>: <a href="assignment.es.md">Mock up a game</a></p>
</body>
</html>
