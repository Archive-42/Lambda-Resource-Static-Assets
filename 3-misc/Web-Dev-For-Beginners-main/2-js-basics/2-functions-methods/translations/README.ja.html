<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.ja</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="javascript-の基本-メソッドと関数">JavaScript の基本: メソッドと関数</h1>
<p><img src="/sketchnotes/webdev101-js-functions.png" alt="JavaScript Basics - Functions" /> &gt; Sketchnote by <a href="https://twitter.com/girlie_mac">Tomomi Imura</a></p>
<h2 id="レッスン前の小テスト">レッスン前の小テスト</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/9?loc=ja">レッスン前の小テスト</a></p>
<p>コードを書くことを考えるとき、私たちは常にコードが読みやすいようにしたいと考えています。直感的ではないように聞こえるかもしれませんが、コードは書かれた回数よりも何度も読まれます。コードを確実にメンテナンスできるようにするための開発者のツールボックスの中心的なツールの一つが <strong>関数</strong> です。</p>
<p><a href="https://youtube.com/watch?v=XgKsD6Zwvlc" title="Methods and Functions"><img src="https://img.youtube.com/vi/XgKsD6Zwvlc/0.jpg" alt="Methods and Functions" /></a></p>
<h2 id="関数">関数</h2>
<p>コアとなるのは、関数は必要に応じて実行できるコードのブロックです。これは、同じタスクを何度も実行する必要がある場合に最適です。ロジックを複数の場所に複製するのではなく (時間が来たときに更新するのが困難になります)、1つの場所に集中させ、実行する操作が必要なときにいつでも呼び出すことができます - 他の関数から関数を呼び出すこともできます!</p>
<p>他の関数から関数を呼び出すこともできます！同じくらい重要なのは、関数に名前を付ける機能です。これは些細なことのように思われるかもしれませんが、名前をつけることでコードのセクションを簡単に文書化することができます。これはボタンのラベルのようなものと考えることができます。もし “Cancel timer” と書かれたボタンをクリックすると、それが時計の動作を止めようとしていることがわかります。</p>
<h2 id="関数の作成と呼び出し">関数の作成と呼び出し</h2>
<p>関数の構文は次のようになります:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">function</span> <span class="at">nameOfFunction</span>() <span class="op">{</span> <span class="co">// 関数の定義</span></a>
<a class="sourceLine" id="cb1-2" title="2"> <span class="co">// 関数の定義/中身</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>挨拶を表示する関数を作ろうと思ったら、こんな感じになるかもしれません:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">function</span> <span class="at">displayGreeting</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello, world!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>関数を直接呼び出したい (または別スレッド、別コンテキストの関数を呼び出したい) ときはいつでも、関数名の後に <code>()</code> をつけます。関数を呼び出す前に定義しても後に定義してもよいという事実は注目に値します; JavaScript コンパイラがそれを見つけてくれます。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// 関数の呼び出し</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="at">displayGreeting</span>()<span class="op">;</span></a></code></pre></div>
<blockquote>
<p><strong>注:</strong> <strong>メソッド</strong> として知られている特殊なタイプの関数がありますが、これはすでに使ったことがあるでしょう！実際、上のデモではこれを見ました。実際、上のデモでは <code>console.log</code> を使っています。メソッドが関数と異なるのは、メソッドがオブジェクト (この例では <code>console</code>) にアタッチされているのに対し、関数はフリーフローティングです。多くの開発者がこれらの用語を互換性を持って使っているのを耳にするでしょう。</p>
</blockquote>
<h3 id="関数のベストプラクティス">関数のベストプラクティス</h3>
<p>機能を作成する際に留意すべきベストプラクティスがいくつかあります。</p>
<ul>
<li>いつものように、関数が何をするのかがわかるように、記述的な名前を使用します</li>
<li><strong>キャメルケーシング</strong> を使用して単語を組み合わせます</li>
<li>関数を特定のタスクに集中させます</li>
</ul>
<h2 id="関数への情報の受け渡し">関数への情報の受け渡し</h2>
<p>関数をより再利用可能なものにするためには、情報を渡したいことがよくあります。上の <code>displayGreeting</code> の例を考えてみると、<strong>Hello, world!</strong> しか表示されません。これでは、作成できる関数の中で最も有用なものとは言えません。挨拶する相手の名前を指定できるようにするなど、もう少し柔軟にしたい場合は、<strong>パラメータ</strong> を追加することができます。パラメータ (<strong>引数</strong> と呼ばれることもあります) は、関数に送られる追加情報です。</p>
<p>パラメータは定義部分に括弧内に記載されており、以下のようにカンマで区切られています:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">function</span> <span class="at">name</span>(param<span class="op">,</span> param2<span class="op">,</span> param3) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>名前を受け付けてそれを表示するように <code>displayGreeting</code> を更新することができます。</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">function</span> <span class="at">displayGreeting</span>(name) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">const</span> message <span class="op">=</span> <span class="vs">`Hello, </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">!`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(message)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>関数を呼び出してパラメータを渡すときは、括弧内で指定します。</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">displayGreeting</span>(<span class="st">&#39;Christopher&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">// 実行時に &quot;Hello, Christopher!&quot; と表示される</span></a></code></pre></div>
<h2 id="初期値">初期値</h2>
<p>より多くのパラメータを追加することで、関数をさらに柔軟にすることができます。しかし、すべての値を指定する必要がない場合はどうでしょうか？挨拶の例に倣って、名前は必須のままにしておくこともできますが (誰に挨拶しているのかを知る必要があります)、挨拶自体は必要に応じてカスタマイズできるようにしたいと考えています。誰かがカスタマイズしたくない場合は、代わりにデフォルト値を指定します。パラメータにデフォルト値を設定するには、変数に値を設定するのと同じ方法 - <code>parameterName = 'defaultValue'</code> でパラメータを設定します。完全な例を見るには、以下を参照してください。</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">function</span> <span class="at">displayGreeting</span>(name<span class="op">,</span> salutation<span class="op">=</span><span class="st">&#39;Hello&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span>salutation<span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>関数を呼び出すときに、<code>salutation</code> に値を設定するかどうかを決めることができます。</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="at">displayGreeting</span>(<span class="st">&#39;Christopher&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">// &quot;Hello, Christopher&quot; と表示されます。</span></a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="at">displayGreeting</span>(<span class="st">&#39;Christopher&#39;</span><span class="op">,</span> <span class="st">&#39;Hi&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">// &quot;Hi, Christopher&quot; と表示されます。</span></a></code></pre></div>
<h2 id="戻り値">戻り値</h2>
<p>今までは、私たちが作った関数は常に <a href="https://developer.mozilla.org/ja/docs/Web/API/console">console</a> に出力されていました。特に他のサービスを呼び出す関数を作成する場合には、これがまさに求めているものになることがあります。しかし、計算を実行するヘルパー関数を作成して値を返し、それを他の場所で使えるようにしたい場合はどうしたらいいでしょうか？</p>
<p>これを行うには、<strong>戻り値</strong> を使用します。戻り値は関数から返され、文字列や数値などのリテラル値を格納するのと同じように変数に格納することができます。</p>
<p>関数が何かを返す場合は、キーワード <code>return</code> が使用されます。キーワード <code>return</code> は、以下のように返されるものの値や参照を期待しています:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="cf">return</span> myVariable<span class="op">;</span></a></code></pre></div>
<p>挨拶メッセージを作成して、その値を呼び出し元に返す関数を作成することができます。</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">createGreetingMessage</span>(name) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="kw">const</span> message <span class="op">=</span> <span class="vs">`Hello, </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3">  <span class="cf">return</span> message<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>この関数を呼び出すときには、変数に値を格納します。これは、(<code>const name = 'Christopher'</code> のように) 変数に静的な値を設定するのと同じ方法です。</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> greetingMessage <span class="op">=</span> <span class="at">createGreetingMessage</span>(<span class="st">&#39;Christopher&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="関数のパラメータとしての関数">関数のパラメータとしての関数</h2>
<p>プログラミングのキャリアを積んでいくと、関数をパラメータとして受け入れる関数に出くわすようになります。この巧妙なトリックは、何かがいつ発生するか、または完了するかわからないが、レスポンスとして操作を実行する必要があることがわかっている場合によく使われます。</p>
<p>例として、タイマーを開始し、タイマーが完了したらコードを実行する <a href="https://developer.mozilla.org/ja/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout">setTimeout</a> を考えてみましょう。どのようなコードを実行したいかを伝える必要があります。関数としては完璧な仕事のように聞こえます。</p>
<p>以下のコードを実行すると、3秒後に <strong>3秒が経過しました</strong> というメッセージが表示されます。</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">function</span> <span class="at">displayDone</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;3秒が経過しました&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">// タイマーの値はミリ秒単位</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="at">setTimeout</span>(displayDone<span class="op">,</span> <span class="dv">3000</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="匿名関数">匿名関数</h3>
<p>もう一度、作ったものを見てみましょう。一度だけ使用される名前の関数を作成しています。アプリケーションが複雑になるにつれて、一度しか呼ばれない関数をたくさん作ることになるでしょう。これは理想的ではありません。しかし、常に名前を指定する必要はありません。</p>
<p>パラメータとして関数を渡すときは、事前に関数を作成する必要はなく、代わりにパラメータの一部として関数を作成することができます。同じ <code>function</code> キーワードを使用しますが、代わりにパラメータとしてビルドします。</p>
<p>上のコードを書き換えて、匿名の関数を使用してみましょう。</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="at">setTimeout</span>(<span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;3秒が経過しました&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="op">},</span> <span class="dv">3000</span>)<span class="op">;</span></a></code></pre></div>
<p>新しいコードを実行すると、同じ結果が得られることに気づくでしょう。関数を作りましたが、名前をつける必要はありませんでした。</p>
<h3 id="ファットアロー関数">ファットアロー関数</h3>
<p>多くのプログラミング言語 (JavaScript を含む) に共通するショートカットは、<strong>アロー</strong> または <strong>ファットアロー</strong> 関数と呼ばれるものを使用することです。これは、矢印のように見える <code>=&gt;</code> という特殊なインジケータを使用します。<code>=&gt;</code> を使うことで、<code>function</code> キーワードを省略することができます。</p>
<p>ファットアロー関数を使って、もう一度コードを書き換えてみましょう。</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;3 seconds has elapsed&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="op">},</span> <span class="dv">3000</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="それぞれの戦略を使うとき">それぞれの戦略を使うとき</h3>
<p>関数をパラメータとして渡すには3つの方法があることがわかりましたが、それぞれをいつ使うか迷っているかもしれません。関数を複数回使用することがわかっているのであれば、通常通りに作成してください。1 つの場所だけで使用する場合は、一般的には匿名関数を使用するのがベストです。太いアロー関数を使うか、より伝統的な <code>function</code> 構文を使うかはあなた次第ですが、最近の開発者の多くは <code>=&gt;</code> を好んでいることに気づくでしょう。</p>
<hr />
<h2 id="チャレンジ">🚀 チャレンジ</h2>
<p>関数とメソッドの違いを一文で表現できますか？試してみてください。</p>
<h2 id="レッスン後の小テスト">レッスン後の小テスト</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/10?loc=ja">レッスン後の小テスト</a></p>
<h2 id="復習と自己学習">復習と自己学習</h2>
<p>コードベースで使われることが多くなってきているアロー関数については、<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions">もう少し読み込んでみる</a>価値があると思います。この構文で関数を書いて、それを書き換える練習をしてみましょう。</p>
<h2 id="課題">課題</h2>
<p><a href="assignment.ja.md">関数で楽しむ</a></p>
</body>
</html>
