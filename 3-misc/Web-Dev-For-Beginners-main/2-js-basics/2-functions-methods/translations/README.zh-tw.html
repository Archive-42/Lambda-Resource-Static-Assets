<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.zh-tw</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="javascript-入門---函式與方法">JavaScript 入門 - 函式與方法</h1>
<p><img src="/sketchnotes/webdev101-js-functions.png" alt="JavaScript 入門 - 函式" /> &gt; 由 <a href="https://twitter.com/girlie_mac">Tomomi Imura</a> 繪製</p>
<h2 id="課前測驗">課前測驗</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/9?loc=zh_tw">課前測驗</a></p>
<p>撰寫程式碼時，我們必須確保程式碼的閱讀性。聽來不太直覺，理解程式碼的時間遠比撰寫時間來的久。裡面最需要被管理的程式項目就是<strong>函式</strong>。</p>
<p><a href="https://youtube.com/watch?v=XgKsD6Zwvlc" title="函式與方法"><img src="https://img.youtube.com/vi/XgKsD6Zwvlc/0.jpg" alt="函式與方法" /></a></p>
<blockquote>
<p>點擊上方圖片觀看關於函式的影片。</p>
</blockquote>
<h2 id="函式-function">函式 (Function)</h2>
<p>函式是程式碼區塊，會在程式執行時被呼叫運行。有些時候我們需要重複性的執行同一項作業，比起複製整個邏輯到其他區塊，函式是較完美的處理方式。不只方便維護，也可以在任何地方、任何時間被其他函式呼叫執行。</p>
<p>另一項重點是函式的名稱，聽來不太重要，但它能直接地解釋程式碼的內容。你可以想像它是按鈕上的文字，若按鈕上寫著「停止計時」，你會預期按壓按鈕後會終止計時器的運作。</p>
<h2 id="建立並呼叫函式">建立並呼叫函式</h2>
<p>函式的語法格式如下：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">function</span> <span class="at">nameOfFunction</span>() <span class="op">{</span> <span class="co">// 函式的定義</span></a>
<a class="sourceLine" id="cb1-2" title="2"> <span class="co">// 函式的說明與內容</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>如果你想建立一個打招呼的函式，它可能會以下列的格式呈現：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">function</span> <span class="at">displayGreeting</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello, world!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>如果你想呼叫這個函式，我們使用函式的名稱加上 <code>()</code>。我們不需要考慮函式是在被呼叫地方的前面或後面才被定義出來，JavaScript 的編譯器會幫你尋找它的定義為置。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// 呼叫函式</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="at">displayGreeting</span>()<span class="op">;</span></a></code></pre></div>
<blockquote>
<p><strong>注意</strong> 另一個你正使用的函式類型稱做 <strong>方法(method)</strong>。事實上，我們能在執行 <code>console.log</code> 的 demo 時能找到它。它與函式的差異在於它需要接續在物件後面，在這個例子中就是 <code>console</code>，而函式並沒有強制要求的。你會發現許多開發者在兩者之間做切換。</p>
</blockquote>
<h3 id="函式的重點觀念">函式的重點觀念</h3>
<p>在建立函式時，你需要注意一些重點：</p>
<ul>
<li>我們反覆提到的，函式的名字要能了解函式的主要功能。</li>
<li>使用<strong>駝峰式大小寫(camelCasing)</strong>來連接單字。</li>
<li>單一函式只專一在單一功能。</li>
</ul>
<h2 id="向含式傳遞資料">向含式傳遞資料</h2>
<p>為了讓函式能被重複利用，你會需要餵給函式不同的資料。以上述 <code>displayGreeting</code> 的例子中，它只能輸出文字 <strong>Hello, world!</strong>。這並不是個實用的函式。要增加函式的彈性，例如打招呼的對象，我們可以增加新的<strong>參數(parameter/argument)</strong>。它提供額外的資料給函式使用。</p>
<p>參數會寫在定義函式的地方，以括號與逗號標記與分隔：</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">function</span> <span class="at">name</span>(param<span class="op">,</span> param2<span class="op">,</span> param3) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>現在我們更新函式 <code>displayGreeting</code>，讓它支援打招呼的對象：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">function</span> <span class="at">displayGreeting</span>(name) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">const</span> message <span class="op">=</span> <span class="vs">`Hello, </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">!`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(message)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>當我們要呼叫函式時，輸入需要的參數在括號中：</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">displayGreeting</span>(<span class="st">&#39;Christopher&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">// 呼叫完，印出字串 &quot;Hello, Christopher!&quot; </span></a></code></pre></div>
<h2 id="預設值default-values">預設值(Default values)</h2>
<p>我們利用參數增加了函式的彈性。但如果我們不想每次都要指定參數給函式使用呢? 繼續之前的例子，保留對象的名稱外，我們增加招呼語的種類。我們可以定義招呼語的預設值，若使用者沒有指定哪一種招呼語時，就使用預設值。它的方法就與賦予變數數值一樣 ── <code>parameterName = 'defaultValue'</code>。例如：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">function</span> <span class="at">displayGreeting</span>(name<span class="op">,</span> salutation<span class="op">=</span><span class="st">&#39;Hello&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`</span><span class="sc">${</span>salutation<span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>當我們呼叫函式時，我們可以選擇是否要指定招呼語到 <code>salutation</code> 中。</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="at">displayGreeting</span>(<span class="st">&#39;Christopher&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">// 輸出字串 &quot;Hello, Christopher&quot;</span></a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="at">displayGreeting</span>(<span class="st">&#39;Christopher&#39;</span><span class="op">,</span> <span class="st">&#39;Hi&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">// 輸出字串 &quot;Hi, Christopher&quot;</span></a></code></pre></div>
<h2 id="回傳值return-values">回傳值(Return values)</h2>
<p>目前為止，我們的函式只能輸出字串到<a href="https://developer.mozilla.org/en-US/docs/Web/API/console">console</a>上。這或許是我們希望的結果，尤其是需要呼叫其他服務的時候。萬一今天我想建立一個額外的函式負責做資料處理與運算呢?</p>
<p>此時，我們可以利用<strong>回傳值</strong>。回傳值由函式輸出，就像變數一樣儲存像是字串或是數字的結果。</p>
<p>如果函式有定義回傳值，那就需要使用關鍵字 <code>return</code> 。關鍵字 <code>return</code> 需要附帶回傳的數值或是參考物件在後方，如：</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="cf">return</span> myVariable<span class="op">;</span></a></code></pre></div>
<p>我們建立一個函式專門建立招呼訊息並回傳給呼叫者：</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">createGreetingMessage</span>(name) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="kw">const</span> message <span class="op">=</span> <span class="vs">`Hello, </span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3">  <span class="cf">return</span> message<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>當函式被呼叫時，變數會儲存函式回傳的數值。這就像我們給變數定值一樣： <code>const name = 'Christopher'</code>。</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> greetingMessage <span class="op">=</span> <span class="at">createGreetingMessage</span>(<span class="st">&#39;Christopher&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="將函式作為函式參數使用">將函式作為函式參數使用</h2>
<p>在你的程式旅程中，你會見到有函式將其他函式當作參數使用。這個俐落的手法常被用在一種情況：我們不知道 A 事件什麼時候發生與完成，但我們要在 A 事件後執行 B 事件。</p>
<p>舉例來說，考慮函式<a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout">setTimeout</a>，它會啟動計時機制，並在倒數完後執行下一個程式。我們需要告訴函式哪一個函式要在時間到後執行，一個完美的例子！</p>
<p>執行下方的程式，三秒鐘之後你會看到訊息<strong>已經過三秒鐘</strong>。</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">function</span> <span class="at">displayDone</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;已經過三秒鐘&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">// 計時單位為毫秒。</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="at">setTimeout</span>(displayDone<span class="op">,</span> <span class="dv">3000</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="不記名函式anonymous-functions">不記名函式(Anonymous functions)</h3>
<p>回顧我們所建的函式，這些函式都只被執行了一次。當程式越來越複雜，我們可能建了許多的函式，但他們可能都只被呼叫了一次。這並不是理想的方式，那不如，不要給它函式名稱！</p>
<p>我們可以傳遞函式作為參數使用，也可以直接在參數裡建立新的函式。同樣使用關鍵字 <code>function</code>，但我們寫在參數欄當中。</p>
<p>試著以不記名函式的方式改寫程式碼：</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="at">setTimeout</span>(<span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;3 seconds has elapsed&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="op">},</span> <span class="dv">3000</span>)<span class="op">;</span></a></code></pre></div>
<p>執行上述程式後可以得到相同的結果。我們建立了一個函式，一個沒有名字的函式！</p>
<h3 id="箭頭函式fat-arrow-functions">箭頭函式(Fat arrow functions)</h3>
<p>許多程式語言，包含 JavaScript，都有一個常見的快捷語法稱作<strong>箭頭(arrow/fat arrow)</strong>函式。 它使用 <code>=&gt;</code> 表示法，就像是箭頭一樣，如同它的名稱！使用 <code>=&gt;</code> 可以省略關鍵字 <code>function</code>。</p>
<p>再一次改寫程式碼，這次我們使用箭頭函式：</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;3 seconds has elapsed&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="op">},</span> <span class="dv">3000</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="使用不同策略的時機">使用不同策略的時機</h3>
<p>現在你已經學會了三種將函式作為參數的方法了。你可能會好奇使用它們的時機點為何。如果你知道你會重複使用一個函式，請使用正常的方法；如果你知道函式只用在特定的函式內一次，這就是用無記名函式的時機；箭頭函式與傳統 <code>function</code> 語法則是取決與你自己，但多數的開發者比較偏好使用 <code>=&gt;</code>。</p>
<hr />
<h2 id="挑戰">🚀 挑戰</h2>
<p>你能用一句話清楚地說明這些函式與方法的差別嗎? 試試看吧！</p>
<h2 id="課後測驗">課後測驗</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/10?loc=zh_tw">課後測驗</a></p>
<h2 id="複習與自學">複習與自學</h2>
<p>這很值得去閱讀<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">關於箭頭函式的資料</a>，它們越來越常被用在程式碼上。試著寫個函式，再改寫成箭頭語法。</p>
<h2 id="作業">作業</h2>
<p><a href="assignment.zh-tw.md">把玩函式</a></p>
</body>
</html>
