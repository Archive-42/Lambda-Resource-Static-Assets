<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.ko</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="은행-앱-제작하기-파트-1-웹-앱의-html-템플릿과-라우터">은행 앱 제작하기 파트 1: 웹 앱의 HTML 템플릿과 라우터</h1>
<h2 id="강의-전-퀴즈">강의 전 퀴즈</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/41?loc=ko">Pre-lecture quiz</a></p>
<h3 id="소개">소개</h3>
<p>브라우저에 JavaScript가 등장한 이후, 웹 사이트는 그 어느 순간보다 상호 작용하며 복잡해지고 있습니다. 웹 기술은 일반적으로 <a href="https://en.wikipedia.org/wiki/Web_application">web applications</a>라고 불리는 브라우저로 직접 실행되는 완전한 기능의 애플리케이션을 만들 때 사용됩니다. 웹 앱은 매우 대화형이므로, 사용자는 작업되는 순간에 전체 페이지가 다시 불러오며 기다리는 것을 원치 않습니다. 원활한 사용자 경험을 제공하기 위해, JavaScript로 DOM을 사용하여 HTML을 직접 갱신합니다.</p>
<p>이번 강의에서는, 전체 HTML 페이지를 다시 불러오지 않으면서 출력하고 갱신할 여러 화면을 만들기 위해 HTML 템플릿을 사용할 것이므로, 은행 웹 앱을 만들기 위한 기초를 레이아웃합니다.</p>
<h3 id="준비물">준비물</h3>
<p>이 강의에서 만들 웹 앱을 테스트하려면 로컬 웹 서버가 필요합니다. 없는 경우에는, <a href="https://nodejs.org">Node.js</a>를 설치하고 프로젝트 폴더에서 <code>npx lite-server</code> 명령을 수행할 수 있습니다. 로컬 웹 서버를 만들고 브라우저에서 앱을 엽니다.</p>
<h3 id="준비">준비</h3>
<p>컴퓨터에서, <code>index.html</code> 파일이 있는 <code>bank</code>라는 폴더를 만듭니다. 이 HTML <a href="https://en.wikipedia.org/wiki/Boilerplate_code">boilerplate</a>에서 시작할 것 입니다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="kw">&lt;title&gt;</span>Bank App<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="co">&lt;!-- This is where you&#39;ll work --&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<hr />
<h2 id="html-템플릿">HTML 템플릿</h2>
<p>웹 페이지에 여러 화면을 만드려는 경우에는, 하나의 솔루션은 출력하려는 모든 화면에 대해 각자 HTML 파일을 만드는 것입니다. 그러나, 이 솔루션에는 몇 가지 불편한 점이 있습니다:</p>
<ul>
<li>화면 전환 시 전체 HTML을 다시 불러와야 하므로, 속도가 느릴 수 있습니다.</li>
<li>서로 다른 화면 간 데이터 공유가 어렵습니다.</li>
</ul>
<p>또 다른 방법은 HTML 파일이 하나일 때, <code>&lt;template&gt;</code> 요소로 여러 <a href="https://developer.mozilla.org/docs/Web/HTML/Element/template">HTML templates</a>을 정의하는 것입니다. 템플릿은 브라우저에 보이지 않는 재사용 가능한 HTML 블록이면서, JavaScript를 사용해서 런타임에 인스턴스화합니다.</p>
<h3 id="작업">작업</h3>
<p>두 화면이 있는 은행 앱을 만들 것입니다: 로그인 페이지와 대시보드. 먼저, 앱의 다양한 화면을 인스턴스화할 때 사용할 placeholder 요소를 HTML 본문에 추가하겠습니다:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;app&quot;</span><span class="kw">&gt;</span>Loading...<span class="kw">&lt;/div&gt;</span></a></code></pre></div>
<p>나중에 JavaScript로 쉽게 찾도록 <code>id</code>를 제공합니다.</p>
<blockquote>
<p>Tip: 이 요소의 내용은 바뀌므로, 앱이 불러와지는 동안 보여지는 로딩 메시지 또는 인디케이터를 넣을 수 있습니다.</p>
</blockquote>
<p>다음은, 로그인 페이지 HTML 템플릿 아래에 추가하겠습니다. 지금은 탐색하며 사용할 버튼이 포함된 제목과 섹션만 여기에 넣겠습니다.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">&lt;template</span><span class="ot"> id=</span><span class="st">&quot;login&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="kw">&lt;h1&gt;</span>Bank App<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="kw">&lt;section&gt;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">&lt;button&gt;</span>Login<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="kw">&lt;/section&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">&lt;/template&gt;</span></a></code></pre></div>
<p>그러고 대시보드 페이지에 대한 다른 HTML 템플릿을 추가합니다. 이 페이지에는 다른 섹션도 포함됩니다:</p>
<ul>
<li>제목과 로그아웃 버튼이 있는 헤더</li>
<li>은행 계정의 현재 잔액</li>
<li>테이블에 표시된, 트랜잭션 목록</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">&lt;template</span><span class="ot"> id=</span><span class="st">&quot;dashboard&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">&lt;header&gt;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">&lt;h1&gt;</span>Bank App<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="kw">&lt;button&gt;</span>Logout<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="kw">&lt;/header&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="kw">&lt;section&gt;</span></a>
<a class="sourceLine" id="cb4-7" title="7">    Balance: 100$</a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="kw">&lt;/section&gt;</span></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="kw">&lt;section&gt;</span></a>
<a class="sourceLine" id="cb4-10" title="10">    <span class="kw">&lt;h2&gt;</span>Transactions<span class="kw">&lt;/h2&gt;</span></a>
<a class="sourceLine" id="cb4-11" title="11">    <span class="kw">&lt;table&gt;</span></a>
<a class="sourceLine" id="cb4-12" title="12">      <span class="kw">&lt;thead&gt;</span></a>
<a class="sourceLine" id="cb4-13" title="13">        <span class="kw">&lt;tr&gt;</span></a>
<a class="sourceLine" id="cb4-14" title="14">          <span class="kw">&lt;th&gt;</span>Date<span class="kw">&lt;/th&gt;</span></a>
<a class="sourceLine" id="cb4-15" title="15">          <span class="kw">&lt;th&gt;</span>Object<span class="kw">&lt;/th&gt;</span></a>
<a class="sourceLine" id="cb4-16" title="16">          <span class="kw">&lt;th&gt;</span>Amount<span class="kw">&lt;/th&gt;</span></a>
<a class="sourceLine" id="cb4-17" title="17">        <span class="kw">&lt;/tr&gt;</span></a>
<a class="sourceLine" id="cb4-18" title="18">      <span class="kw">&lt;/thead&gt;</span></a>
<a class="sourceLine" id="cb4-19" title="19">      <span class="kw">&lt;tbody&gt;&lt;/tbody&gt;</span></a>
<a class="sourceLine" id="cb4-20" title="20">    <span class="kw">&lt;/table&gt;</span></a>
<a class="sourceLine" id="cb4-21" title="21">  <span class="kw">&lt;/section&gt;</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="kw">&lt;/template&gt;</span></a></code></pre></div>
<blockquote>
<p>Tip: HTML 템플릿을 만들 때, 모양을 확인하려면, <code>&lt;!--&gt;</code>로 묶어 <code>&lt;template&gt;</code> 혹은 <code>&lt;/template&gt;</code> 줄을 주석 처리할 수 있습니다.</p>
</blockquote>
<p>✅ 템플릿에 <code>id</code> 속성을 사용하는 이유는 무엇일까요? 강의처럼 다른 것을 쓸 수 있나요?</p>
<h2 id="javascript로-템플릿-출력하기">JavaScript로 템플릿 출력하기</h2>
<p>브라우저에서 현재 HTML 파일을 시도하면, <code>Loading...</code>이 출력되는 것을 볼 수 있습니다. HTML 템플릿을 인스턴스화하고 출력하기 위해 JavaScript 코드를 추가했기 때문입니다.</p>
<p>템플릿 인스턴스화는 일반적으로 3 단계로 진행됩니다:</p>
<ol type="1">
<li><a href="https://developer.mozilla.org/docs/Web/API/Document/getElementById"><code>document.getElementById</code></a>를 사용한 예시로, DOM에서 템플릿 요소 검색합니다.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/Node/cloneNode"><code>cloneNode</code></a>로, 템플릿 요소를 복제합니다.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/Node/appendChild"><code>appendChild</code></a>를 사용한 예시로, 보이는 요소 아래의 DOM에 붙입니다.</li>
</ol>
<p>✅ DOM에 붙이기 전에 템플릿을 복제해야하는 이유는 무엇일까요? 이 단계를 넘기면 어떻게 될까요?</p>
<h3 id="작업-1">작업</h3>
<p>프로젝트 폴더에 <code>app.js</code>라는 새 파일을 만들고 HTML의 <code>&lt;head&gt;</code> 섹션에서 해당 파일을 가져옵니다:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;app.js&quot;</span><span class="ot"> defer</span><span class="kw">&gt;&lt;/script&gt;</span></a></code></pre></div>
<p>이제 <code>app.js</code>에서, 새로운 함수인 <code>updateRoute</code>를 만듭니다:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">function</span> <span class="at">updateRoute</span>(templateId) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="kw">const</span> template <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(templateId)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="kw">const</span> view <span class="op">=</span> <span class="va">template</span>.<span class="va">content</span>.<span class="at">cloneNode</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="kw">const</span> app <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;app&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="va">app</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="va">app</span>.<span class="at">appendChild</span>(view)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>우리가 하는 일은 정확히 위에서 설명한 3단계입니다. id <code>templateId</code>로 템플릿을 인스턴스화하고, 복제된 콘텐츠를 앱 placeholder에 넣습니다. 템플릿의 전체 하위 트리를 복사하려면 <code>cloneNode(true)</code>로 사용해야 합니다.</p>
<p>이제 템플릿 중 하나를 사용하여 이 함수를 호출하고 결과를 봅니다.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="at">updateRoute</span>(<span class="st">&#39;login&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>✅ 이 <code>app.innerHTML = '';</code> 코드의 목적은 무엇인가요? 없다면 어떻게 될까요?</p>
<h2 id="라우터-생성하기">라우터 생성하기</h2>
<p>웹 앱에 대해 이야기할 때, <strong>URLs</strong>을 보여주기 위해 특정 화면에 매핑하려는 의도를 <em>Routing</em>이라고 합니다. 여러 HTML 파일에, 웹 사이트에서 파일 경로가 URL에 반영되므로 자동으로 수행됩니다. 예를 들면, 프로젝트 폴더에 다음 파일이 있습니다:</p>
<pre><code>mywebsite/index.html
mywebsite/login.html
mywebsite/admin/index.html</code></pre>
<p>만약 상위에 <code>mywebsite</code>로 웹 서버를 생성하면, URL 맵핑은 이렇게 이루어집니다:</p>
<pre><code>https://site.com            --&gt; mywebsite/index.html
https://site.com/login.html --&gt; mywebsite/login.html
https://site.com/admin/     --&gt; mywebsite/admin/index.html</code></pre>
<p>그러나, 웹 앱이라면 모든 화면이 포함된 단일 HTML 파일을 사용하므로 이러한 기본 동작은 도와주지 못합니다. 이 맵을 수동으로 만들고 JavaScript로 출력되는 템플릿을 갱신해야 합니다.</p>
<h3 id="작업-2">작업</h3>
<p>간단한 객체로 URL 경로와 템플릿 사이에서 <a href="https://en.wikipedia.org/wiki/Associative_array">map</a>을 구현합니다. <code>app.js</code> 파일의 상단에 객체를 추가합니다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> routes <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="st">&#39;/login&#39;</span><span class="op">:</span> <span class="op">{</span> <span class="dt">templateId</span><span class="op">:</span> <span class="st">&#39;login&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb10-3" title="3">  <span class="st">&#39;/dashboard&#39;</span><span class="op">:</span> <span class="op">{</span> <span class="dt">templateId</span><span class="op">:</span> <span class="st">&#39;dashboard&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>이제 <code>updateRoute</code> 함수를 약간 수정합니다. <code>templateId</code>를 인수로 직접 주는 대신, 먼저 현재 URL을 보고 찾은 다음, 맵을 사용하여 해당 템플릿 ID 값을 가져오려 합니다. <a href="https://developer.mozilla.org/docs/Web/API/Location/pathname"><code>window.location.pathname</code></a>으로 URL에서 경로 섹션만 가져올 수 있습니다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">function</span> <span class="at">updateRoute</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="kw">const</span> path <span class="op">=</span> <span class="va">window</span>.<span class="va">location</span>.<span class="at">pathname</span><span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="kw">const</span> route <span class="op">=</span> routes[path]<span class="op">;</span></a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5">  <span class="kw">const</span> template <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="va">route</span>.<span class="at">templateId</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="kw">const</span> view <span class="op">=</span> <span class="va">template</span>.<span class="va">content</span>.<span class="at">cloneNode</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7">  <span class="kw">const</span> app <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;app&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-8" title="8">  <span class="va">app</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb11-9" title="9">  <span class="va">app</span>.<span class="at">appendChild</span>(view)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>여기에서 선언한 라우터를 해당 템플릿에 매핑했습니다. 브라우저에서 수동으로 URL을 변경하여 잘 작동하는지 볼 수 있습니다.</p>
<p>✅ URL에 알 수 없는 경로를 입력하면 어떤 일이 벌어지나요? 어떻게 해결할 수 있나요?</p>
<h2 id="네비게이션-추가하기">네비게이션 추가하기</h2>
<p>앱의 다음 단계는 URL을 수동으로 안 바꾸고 페이지 사이를 이동할 수 있도록 추가하는 것입니다. 이는 두 가지를 의미합니다:</p>
<ol type="1">
<li>현재 URL로 갱신하기</li>
<li>새로운 URL를 기반으로 출력된 템플릿 갱신하기</li>
</ol>
<p>두 번째 부분은 <code>updateRoute</code> 함수로 이미 처리했으므로, 현재 URL로 갱신하는 방법을 알아냅니다.</p>
<p>HTML 앵커 요소 <a href="https://developer.mozilla.org/docs/Web/HTML/Element/a"><code>&lt;a&gt;</code></a>를 사용하여 다른 URL에 대한 하이퍼링크를 만들 수 있지만, 여기에서 사용하면 브라우저가 HTML을 다시 불러오게 됩니다.</p>
<p>대신 URL을 업데이트 할 수 있는 JavaScript와 더 구체적으로 <a href="https://developer.mozilla.org/docs/Web/API/History/pushState"><code>history.pushState</code></a>를 사용해야합니다. HTML을 다시 불러오지 않고 검색 기록에 새로운 항목을 만듭니다.</p>
<h3 id="작업-3">작업</h3>
<p>앱에서 탐색할 때 사용할 수 있는 새로운 함수를 만들어 보겠습니다:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">function</span> <span class="at">navigate</span>(path) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="va">window</span>.<span class="va">history</span>.<span class="at">pushState</span>(<span class="op">{},</span> path<span class="op">,</span> <span class="va">window</span>.<span class="va">location</span>.<span class="at">origin</span> <span class="op">+</span> path)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="at">updateRoute</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>이 메소드는 먼저 주어진 경로에 따라 현재 URL을 갱신한 다음에, 템플릿을 업데이트합니다. <code>window.location.origin</code> 속성은 URL 최상위를 반환하므로, 주어진 경로에서 전체 URL을 다시 구성할 수 있습니다.</p>
<p>이제 함수가 있으므로, 경로가 정의된 라우터와 일치하지 않는 경우에 발생할 문제를 해결할 수 있습니다. 일치하는 경로를 찾을 수 없는 경우에는 기존 경로 중 하나에 fallback로 추가하고자 <code>updateRoute</code> 함수를 수정합니다.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">function</span> <span class="at">updateRoute</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="kw">const</span> path <span class="op">=</span> <span class="va">window</span>.<span class="va">location</span>.<span class="at">pathname</span><span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3">  <span class="kw">const</span> route <span class="op">=</span> routes[path]<span class="op">;</span></a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5">  <span class="cf">if</span> (<span class="op">!</span>route) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="cf">return</span> <span class="at">navigate</span>(<span class="st">&#39;/login&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-8" title="8"></a>
<a class="sourceLine" id="cb13-9" title="9">  ...</a></code></pre></div>
<p>만약 라우터를 찾지 못한다면, <code>login</code> 페이지로 리다이렉트됩니다.</p>
<p>HTML의 <em>Login</em>과 <em>Logout</em> 버튼에 바인딩을 추가하여 내비게이션 시스템을 완성해봅니다.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">&lt;button</span><span class="ot"> onclick=</span><span class="st">&quot;navigate(&#39;/dashboard&#39;)&quot;</span><span class="kw">&gt;</span>Login<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb14-2" title="2">...</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">&lt;button</span><span class="ot"> onclick=</span><span class="st">&quot;navigate(&#39;/login&#39;)&quot;</span><span class="kw">&gt;</span>Logout<span class="kw">&lt;/button&gt;</span></a></code></pre></div>
<p><a href="https://developer.mozilla.org/docs/Web/API/GlobalEventHandlers/onclick"><code>onclick</code></a> 속성을 사용하여 <code>click</code> 이벤트를 JavaScript 코드로 바인딩합니다, 여기에서 <code>navigate()</code> 함수를 호출합니다.</p>
<p>이 버튼들을 클릭해보세요, 이제 앱의 여러 화면들을 이동할 수 있습니다.</p>
<p>✅ <code>history.pushState</code> 메소드는 HTML5 표준의 일부이며 <a href="https://caniuse.com/?search=pushState">모든 모던 브라우저</a>에서 구현됩니다. 옛날 브라우저의 웹 앱을 제작하는 경우, 이 API 대신 사용할 수 있는 트릭이 있습니다: 경로 앞에 <a href="https://en.wikipedia.org/wiki/URI_fragment">hash (<code>#</code>)</a>를 사용한다면 일반 앵커 탐색처럼 동작하면서 페이지를 다시 안 불러오는 라우팅을 구현할 수 있습니다, 페이지 내에 내부 링크를 만드는 것이 목적입니다.</p>
<h2 id="브라우저의-뒤로가기와-앞으로가기-버튼-제어하기">브라우저의 뒤로가기와 앞으로가기 버튼 제어하기</h2>
<p><code>history.pushState</code>를 사용하면 브라우저의 탐색 기록에 새로운 항목이 생성됩니다. 브라우저의 <em>back button</em>을 누르고 있으면 다음처럼 내용이 표시되는지 볼 수 있습니다:</p>
<figure>
<img src=".././history.png" alt="Screenshot of navigation history" /><figcaption>Screenshot of navigation history</figcaption>
</figure>
<p>뒤로가기 버튼을 몇 번 클릭하면, 현재 URL이 변경되며 히스토리가 갱신되지만 동일한 템플릿이 계속 출력되는 것을 볼 수 있습니다.</p>
<p>히스토리가 바뀔 때마다 <code>updateRoute()</code>를 호출해야 한다는 사실을 모르기 때문입니다. <a href="https://developer.mozilla.org/docs/Web/API/History/pushState"><code>history.pushState</code> documentation</a>을 살펴보면, 상태가 바뀌는 지 확인할 수 있습니다 - 다른 URL로 이동했다고 의미합니다. - <a href="https://developer.mozilla.org/docs/Web/API/Window/popstate_event"><code>popstate</code></a> 이벤트가 연결됩니다. 이 이슈를 해결하는 데 사용할 것입니다.</p>
<h3 id="작업-4">작업</h3>
<p>브라우저 히스토리가 바뀔 때마다 출력된 템플릿을 갱신하도록 <code>updateRoute()</code>를 호출하는 새 함수를 붙입니다. <code>app.js</code> 파일 하단에서 작업합니다:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="va">window</span>.<span class="at">onpopstate</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="at">updateRoute</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="at">updateRoute</span>()<span class="op">;</span></a></code></pre></div>
<blockquote>
<p>Note: 여기서는 간결함을 위해 <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Functions/Arrow_functions">arrow function</a>을 사용하여 <code>popstate</code> 이벤트 핸들러를 선언했지만, 일반적인 함수와 동일하게 작동합니다.</p>
</blockquote>
<p>다음은 화살표 함수에 대한 복습 동영상입니다:</p>
<p><a href="https://youtube.com/watch?v=OP6eEbOj2sc" title="Arrow Functions"><img src="https://img.youtube.com/vi/OP6eEbOj2sc/0.jpg" alt="Arrow Functions" /></a></p>
<p>이제 브라우저의 뒤로가기와 앞으로가기 버튼을 사용해보세요, 그리고 이 순간마다 올바르게 갱신되어 출력되는 지에 대하여 확인합니다.</p>
<hr />
<h2 id="도전">🚀 도전</h2>
<p>이 앱의 크레딧을 보여주는 세 번째 페이지에 새로운 템플릿과 라우터를 추가합니다.</p>
<h2 id="강의-후-퀴즈">강의 후 퀴즈</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/42?loc=ko">Post-lecture quiz</a></p>
<h2 id="리뷰-자기주도-학습">리뷰 &amp; 자기주도 학습</h2>
<p>라우팅은 웹 개발의 놀랍고 까다로운 부분 중 하나입니다, 특히 웹의 페이지 새로고침 동작에서 단일 페이지 애플리케이션 페이지 새로고침으로 이동함에 따라 더욱 더 그렇습니다. <a href="https://docs.microsoft.com/azure/static-web-apps/routes?WT.mc_id=academic-13441-cxa">how the Azure Static Web App service</a>의 라우터 제어에 대해 약간 봅니다. 그 문서에 기술된 몇 가지 결정이 필요한 이유를 설명할 수 있나요?</p>
<h2 id="과제">과제</h2>
<p><a href="../assignment.md">Improve the routing</a></p>
</body>
</html>
