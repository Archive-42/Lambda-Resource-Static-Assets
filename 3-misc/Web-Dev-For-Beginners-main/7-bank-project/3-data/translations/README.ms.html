<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.ms</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="bina-aplikasi-perbankan-bahagian-3-kaedah-mengambil-dan-menggunakan-data">Bina Aplikasi Perbankan Bahagian 3: Kaedah Mengambil dan Menggunakan Data</h1>
<h2 id="kuiz-pra-kuliah">Kuiz Pra Kuliah</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/45">Kuiz Pra Kuliah</a></p>
<h3 id="pengenalan">Pengenalan</h3>
<p>Inti setiap aplikasi web ada <em>data</em>. Data boleh dilakukan dalam pelbagai bentuk, tetapi tujuan utamanya adalah untuk menunjukkan maklumat kepada pengguna. Dengan aplikasi web menjadi semakin interaktif dan kompleks, bagaimana pengguna mengakses dan berinteraksi dengan maklumat kini menjadi bahagian penting dalam pembangunan web.</p>
<p>Dalam pelajaran ini, kita akan melihat cara mengambil data dari pelayan secara asinkron, dan menggunakan data ini untuk memaparkan maklumat di laman web tanpa memuatkan semula HTML.</p>
<h3 id="prasyarat">Prasyarat</h3>
<p>Anda perlu membina bahagian <a href="../2-forms/README.md">Borang Log Masuk dan Pendaftaran</a> dari aplikasi web untuk pelajaran ini. Anda juga perlu memasang <a href="https://nodejs.org">Node.js</a> dan <a href="../api/README.md">jalankan API pelayan</a> secara tempatan supaya anda mendapat data akaun.</p>
<p>Anda boleh menguji bahawa pelayan berjalan dengan betul dengan menjalankan perintah ini di terminal:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">curl</span> http://localhost:5000/api</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># -&gt; harus mengembalikan &quot;Bank API v1.0.0&quot; sebagai hasilnya</span></a></code></pre></div>
<hr />
<h2 id="ajax-dan-pengambilan-data">AJAX dan pengambilan data</h2>
<p>Laman web tradisional mengemas kini kandungan yang dipaparkan ketika pengguna memilih pautan atau mengirimkan data menggunakan borang, dengan memuatkan semula halaman HTML penuh. Setiap kali data baru dimuat, pelayan web mengembalikan halaman HTML baru yang perlu diproses oleh penyemak imbas, mengganggu tindakan pengguna semasa dan membatasi interaksi semasa muat semula. Alur kerja ini juga disebut <em>Aplikasi Multi-Halaman</em> atau <em>MPA</em>.</p>
<figure>
<img src="./images/mpa.png" alt="Kemas kini aliran kerja dalam aplikasi berbilang halaman" /><figcaption>Kemas kini aliran kerja dalam aplikasi berbilang halaman</figcaption>
</figure>
<p>Ketika aplikasi web mula menjadi lebih kompleks dan interaktif, teknik baru yang disebut <a href="https://en.wikipedia.org/wiki/Ajax_(programming)">AJAX (Asynchronous JavaScript and XML)</a> muncul. Teknik ini membolehkan aplikasi web mengirim dan mengambil data dari pelayan secara asinkron menggunakan JavaScript, tanpa harus memuat semula halaman HTML, menghasilkan kemas kini yang lebih cepat dan interaksi pengguna yang lebih lancar. Apabila data baru diterima dari pelayan, halaman HTML semasa juga dapat diperbarui dengan JavaScript menggunakan API <a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model">DOM</a>. Dari masa ke masa, pendekatan ini telah berkembang menjadi apa yang sekarang disebut <a href="https://en.wikipedia.org/wiki/Single-page_application"><em>Aplikasi Halaman Tunggal</em> atau <em>SPA</em></a>.</p>
<figure>
<img src="./images/spa.png" alt="Kemas kini alur kerja dalam aplikasi satu halaman" /><figcaption>Kemas kini alur kerja dalam aplikasi satu halaman</figcaption>
</figure>
<p>Semasa AJAX pertama kali diperkenalkan, satu-satunya API yang tersedia untuk mengambil data secara asinkron adalah <a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest"><code>XMLHttpRequest</code></a>. Tetapi penyemak imbas moden kini juga melaksanakan <a href="https://developer.mozilla.org/docs/Web/API/Fetch_API"><code>Fetch</code> API</a>, yang menggunakan janji dan lebih sesuai untuk dimanipulasi Data JSON.</p>
<blockquote>
<p>Walaupun semua penyemak imbas moden menyokong <code>Fetch API</code>, jika anda mahu aplikasi web anda berfungsi pada penyemak imbas lama atau penyemak imbas lama, sebaiknya periksa <a href="https://caniuse.com/fetch">jadual keserasian di caniuse.com</a> pertama.</p>
</blockquote>
<h3 id="tugas">Tugas</h3>
<p>Dalam <a href="../2-form/README.md">pelajaran sebelumnya</a> kami melaksanakan borang pendaftaran untuk membuat akaun. Kami sekarang akan menambahkan kod untuk log masuk menggunakan akaun yang ada, dan mengambil datanya. Buka fail <code>app.js</code> dan tambahkan fungsi <code>login</code> baru:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">login</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="kw">const</span> loginForm <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;loginForm&#39;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="kw">const</span> user <span class="op">=</span> <span class="va">loginForm</span>.<span class="va">user</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Di sini kita mulakan dengan mengambil elemen borang dengan <code>getElementById()</code>, dan kemudian kita mendapat nama pengguna dari input dengan <code>loginForm.user.value</code>. Setiap kawalan borang dapat diakses dengan namanya (diatur dalam HTML menggunakan atribut <code>name</code>) sebagai harta bentuk.</p>
<p>Dengan cara yang serupa dengan apa yang kami lakukan untuk pendaftaran, kami akan membuat fungsi lain untuk melakukan permintaan pelayan, tetapi kali ini untuk mengambil data akaun:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">getAccount</span>(user) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="st">&#39;//localhost:5000/api/accounts/&#39;</span> <span class="op">+</span> <span class="at">encodeURIComponent</span>(user))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="cf">return</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="cf">return</span> <span class="op">{</span> <span class="dt">error</span><span class="op">:</span> <span class="va">error</span>.<span class="at">message</span> <span class="op">||</span> <span class="st">&#39;Unknown error&#39;</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="op">}</span></a></code></pre></div>
<p>Kami menggunakan API <code>fetch</code> untuk meminta data secara tidak serentak dari pelayan, tetapi kali ini kami tidak memerlukan parameter tambahan selain URL untuk dipanggil, kerana kami hanya meminta data. Secara lalai, <code>fetch</code> membuat permintaan HTTP <a href="https://developer.mozilla.org/docs/Web/HTTP/Methods/GET"><code>GET</code></a>, itulah yang kami cari di sini.</p>
<p>✅ <code>encodeURIComponent()</code> adalah fungsi yang melarikan diri daripada watak khas untuk URL. Masalah apa yang mungkin kita hadapi jika kita tidak memanggil fungsi ini dan menggunakan nilai <code>pengguna</code> secara langsung di URL?</p>
<p>Sekarang mari kita kemas kini fungsi <code>login</code> kami untuk menggunakan <code>getAccount</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">login</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">const</span> loginForm <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;loginForm&#39;</span>)</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw">const</span> user <span class="op">=</span> <span class="va">loginForm</span>.<span class="va">user</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="at">getAccount</span>(user)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="cf">if</span> (<span class="va">data</span>.<span class="at">error</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="cf">return</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;loginError&#39;</span><span class="op">,</span> <span class="va">data</span>.<span class="at">error</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-9" title="9"></a>
<a class="sourceLine" id="cb4-10" title="10">  account <span class="op">=</span> data<span class="op">;</span></a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="at">navigate</span>(<span class="st">&#39;/dashboard&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="op">}</span></a></code></pre></div>
<p>Pertama, kerana <code>getAccount</code> adalah fungsi tak segerak, kita perlu memadankannya dengan kata kunci <code>await</code> untuk menunggu hasil pelayan. Seperti permintaan pelayan, kami juga harus menangani kes ralat. Buat masa ini kami hanya akan menambahkan mesej log untuk memaparkan ralat, dan kembali kepadanya kemudian.</p>
<p>Kemudian kita harus menyimpan data di suatu tempat sehingga nanti kita dapat menggunakannya untuk memaparkan maklumat papan pemuka. Oleh kerana pemboleh ubah <code>account</code> belum ada, kami akan membuat pemboleh ubah global untuknya di bahagian atas fail kami:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">let</span> account <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></a></code></pre></div>
<p>Setelah data pengguna disimpan ke dalam variabel kita dapat menavigasi dari halaman <em>login</em> ke papan pemuka * menggunakan fungsi <code>navigate()</code> yang sudah kita miliki.</p>
<p>Akhirnya, kita perlu memanggil fungsi <code>login</code> kita semasa borang log masuk dihantar, dengan mengubah HTML:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">&lt;form</span><span class="ot"> id=</span><span class="st">&quot;loginForm&quot;</span><span class="ot"> action=</span><span class="st">&quot;javascript:login()&quot;</span><span class="kw">&gt;</span></a></code></pre></div>
<p>Uji bahawa semuanya berfungsi dengan betul dengan mendaftarkan akaun baru dan cuba log masuk menggunakan akaun yang sama.</p>
<p>Sebelum beralih ke bahagian seterusnya, kita juga dapat menyelesaikan fungsi <code>register</code> dengan menambahkan ini di bahagian bawah fungsi:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">account <span class="op">=</span> result<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="at">navigate</span>(<span class="st">&#39;/dashboard&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>✅ Tahukah anda bahawa secara lalai, anda hanya dapat memanggil API pelayan dari <em>domain dan port yang sama</em> daripada halaman web yang anda lihat? Ini adalah mekanisme keselamatan yang dikuatkuasakan oleh penyemak imbas. Tetapi tunggu, aplikasi web kami berjalan di <code>localhost: 3000</code> sedangkan API pelayan berjalan di <code>localhost: 5000</code>, mengapa ia berfungsi? Dengan menggunakan teknik yang disebut <a href="https://developer.mozilla.org/docs/Web/HTTP/CORS">Cross-Origin Resource Sharing (CORS)</a>, adalah mungkin untuk melakukan permintaan HTTP bersilang asal jika pelayan menambah tajuk khas untuk respons, yang memungkinkan pengecualian untuk domain tertentu.</p>
<blockquote>
<p>Ketahui lebih lanjut mengenai API dengan mengambil <a href="https://docs.microsoft.com/learn/modules/use-apis-discover-museum-art?WT.mc_id=academic-13441-cxa">pelajaran</a></p>
</blockquote>
<h2 id="kemas-kini-html-untuk-memaparkan-data">Kemas kini HTML untuk memaparkan data</h2>
<p>Sekarang kita mempunyai data pengguna, kita harus mengemas kini HTML yang ada untuk memaparkannya. Kami sudah tahu cara mendapatkan elemen dari DOM menggunakan contohnya <code>document.getElementById()</code>. Setelah anda mempunyai elemen asas, berikut adalah beberapa API yang boleh anda gunakan untuk mengubahnya atau menambahkan elemen anak padanya:</p>
<ul>
<li><p>Dengan menggunakan sifat <a href="https://developer.mozilla.org/docs/Web/API/Node/textContent"><code>textContent</code></a>, anda boleh mengubah teks elemen. Perhatikan bahawa mengubah nilai ini akan membuang semua anak elemen (jika ada) dan menggantinya dengan teks yang disediakan. Oleh itu, ini juga kaedah yang berkesan untuk membuang semua anak dari elemen tertentu dengan memberikan string kosong "" kepadanya.</p></li>
<li><p>Menggunakan <a href="https://developer.mozilla.org/docs/Web/API/DocumentcreateElement"><code>document.createElement()</code></a> bersama dengan <a href="https://developer.mozilla.org/docs/Web/API/ParentNode/append"><code>append()</code></a> kaedah anda boleh membuat dan melampirkan satu atau lebih elemen anak baru.</p></li>
</ul>
<p>✅ Menggunakan sifat <a href="https://developer.mozilla.org/docs/Web/API/Element/innerHTML"><code>innerHTML</code></a> elemen juga mungkin untuk mengubah kandungan HTMLnya, tetapi yang ini harus dielakkan kerana terdedah kepada serangan <a href="https://developer.mozilla.org/docs/Glossary/Cross-site_scripting">cross-site scripting (XSS)</a> serangan.</p>
<h3 id="tugas-1">Tugas</h3>
<p>Sebelum beralih ke skrin papan pemuka, ada satu perkara lagi yang harus kita lakukan di halaman <em>log masuk</em>. Pada masa ini, jika anda cuba log masuk dengan nama pengguna yang tidak ada, mesej ditunjukkan di konsol tetapi untuk pengguna biasa tidak ada yang berubah dan anda tidak tahu apa yang berlaku.</p>
<p>Mari tambahkan elemen placeholder dalam borang log masuk di mana kita dapat memaparkan mesej ralat jika diperlukan. Tempat yang bagus adalah tepat sebelum log masuk <code>&lt;button&gt;</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb8-1" title="1">...</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;loginError&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">&lt;button&gt;</span>Login<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb8-4" title="4">...</a></code></pre></div>
<p>Elemen <code>&lt;div&gt;</code> ini kosong, yang bermaksud bahawa tidak ada yang akan dipaparkan di layar sehingga kami menambahkan beberapa kandungan ke dalamnya. Kami juga memberikannya <code>id</code> sehingga kami dapat mengambilnya dengan mudah dengan JavaScript.</p>
<p>Kembali ke fail <code>app.js</code> dan buat fungsi pembantu baru <code>updateElement</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">updateElement</span>(id<span class="op">,</span> text) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">const</span> element <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="va">element</span>.<span class="at">textContent</span> <span class="op">=</span> text<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Yang ini cukup mudah: diberi elemen <em>id</em> dan <em>teks</em>, ia akan mengemas kini kandungan teks elemen DOM dengan <code>id</code> yang sepadan. Mari gunakan kaedah ini sebagai ganti mesej ralat sebelumnya dalam fungsi <code>login</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="cf">if</span> (<span class="va">data</span>.<span class="at">error</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">return</span> <span class="at">updateElement</span>(<span class="st">&#39;loginError&#39;</span><span class="op">,</span> <span class="va">data</span>.<span class="at">error</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Sekiranya anda cuba log masuk dengan akaun yang tidak sah, anda akan melihat seperti ini:</p>
<figure>
<img src="../images/login-error.png" alt="Tangkapan skrin yang menunjukkan mesej ralat yang ditunjukkan semasa log masuk" /><figcaption>Tangkapan skrin yang menunjukkan mesej ralat yang ditunjukkan semasa log masuk</figcaption>
</figure>
<p>Sekarang kita mempunyai teks ralat yang muncul secara visual, tetapi jika anda mencubanya dengan pembaca skrin, anda akan melihat bahawa tidak ada yang diumumkan. Agar teks yang ditambahkan secara dinamis ke halaman diumumkan oleh pembaca skrin, ia perlu menggunakan sesuatu yang disebut <a href="https://developer.mozilla.org/docs/Web/Accessibility/ARIA/ARIA_Live_Regions">Live Region</a>. Di sini kita akan menggunakan jenis kawasan langsung yang disebut amaran:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;loginError&quot;</span><span class="ot"> role=</span><span class="st">&quot;alert&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a></code></pre></div>
<p>Terapkan tingkah laku yang sama untuk kesalahan fungsi <code>register</code> (jangan lupa untuk mengemas kini HTML).</p>
<h2 id="paparkan-maklumat-di-papan-pemuka">Paparkan maklumat di papan pemuka</h2>
<p>Dengan menggunakan teknik yang sama seperti yang baru kita lihat, kita juga akan menjaga memaparkan maklumat akaun di halaman papan pemuka.</p>
<p>Seperti inilah objek akaun yang diterima dari pelayan:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">&quot;user&quot;</span><span class="fu">:</span> <span class="st">&quot;test&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">&quot;currency&quot;</span><span class="fu">:</span> <span class="st">&quot;$&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Test account&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-5" title="5">  <span class="dt">&quot;balance&quot;</span><span class="fu">:</span> <span class="dv">75</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="dt">&quot;transactions&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span> <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-10-01&quot;</span><span class="fu">,</span> <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;Pocket money&quot;</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">50</span> <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span> <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-10-03&quot;</span><span class="fu">,</span> <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;Book&quot;</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">-10</span> <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb12-9" title="9">    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span> <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-10-04&quot;</span><span class="fu">,</span> <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;Sandwich&quot;</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">-5</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb12-10" title="10">  <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="fu">}</span></a></code></pre></div>
<blockquote>
<p>Catatan: untuk menjadikan hidup anda lebih mudah, anda boleh menggunakan akaun <code>test</code> yang sudah ada yang sudah diisi dengan data.</p>
</blockquote>
<h3 id="tugas-2">Tugas</h3>
<p>Mari mulakan dengan mengganti bahagian “Baki” dalam HTML untuk menambahkan elemen ruang letak:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">&lt;section&gt;</span></a>
<a class="sourceLine" id="cb13-2" title="2">  Balance: <span class="kw">&lt;span</span><span class="ot"> id=</span><span class="st">&quot;balance&quot;</span><span class="kw">&gt;&lt;/span&gt;&lt;span</span><span class="ot"> id=</span><span class="st">&quot;currency&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">&lt;/section&gt;</span></a></code></pre></div>
<p>Kami juga akan menambah bahagian baru di bawah untuk memaparkan keterangan akaun:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">&lt;h2</span><span class="ot"> id=</span><span class="st">&quot;description&quot;</span><span class="kw">&gt;&lt;/h2&gt;</span></a></code></pre></div>
<p>✅ Oleh kerana perihalan akaun berfungsi sebagai tajuk untuk kandungan di bawahnya, ia ditandakan secara semantik sebagai tajuk. Ketahui lebih lanjut mengenai bagaimana <a href="https://www.nomensa.com/blog/2017/how-structure-headings-web-accessibility">struktur tajuk</a> penting untuk dilayari, dan lihat halaman secara kritis untuk menentukan apa lagi boleh menjadi tajuk.</p>
<p>Seterusnya, kami akan membuat fungsi baru di <code>app.js</code> untuk mengisi ruang letak:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">function</span> <span class="at">updateDashboard</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="cf">if</span> (<span class="op">!</span>account) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="cf">return</span> <span class="at">navigate</span>(<span class="st">&#39;/login&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="at">updateElement</span>(<span class="st">&#39;description&#39;</span><span class="op">,</span> <span class="va">account</span>.<span class="at">description</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-7" title="7">  <span class="at">updateElement</span>(<span class="st">&#39;balance&#39;</span><span class="op">,</span> <span class="va">account</span>.<span class="va">balance</span>.<span class="at">toFixed</span>(<span class="dv">2</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8">  <span class="at">updateElement</span>(<span class="st">&#39;currency&#39;</span><span class="op">,</span> <span class="va">account</span>.<span class="at">currency</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>Pertama, kami memeriksa bahawa kami mempunyai data akaun yang kami perlukan sebelum melangkah lebih jauh. Kemudian kami menggunakan fungsi <code>updateElement()</code> yang kami buat sebelumnya untuk mengemas kini HTML.</p>
<blockquote>
<p>Untuk menjadikan paparan keseimbangan lebih cantik, kami menggunakan kaedah <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed"><code>toFixed(2)</code></a> untuk daya memaparkan nilai dengan 2 digit selepas titik perpuluhan.</p>
</blockquote>
<p>Sekarang kita perlu memanggil fungsi <code>updateDashboard()</code> setiap kali papan pemuka dimuat. Sekiranya anda sudah menyelesaikan <a href="../1-template-route/assignment.md">tugasan 1</a> ini harus dilakukan dengan mudah, jika tidak, anda boleh menggunakan pelaksanaan berikut.</p>
<p>Tambahkan kod ini ke akhir fungsi <code>updateRoute()</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="cf">if</span> (<span class="kw">typeof</span> <span class="va">route</span>.<span class="at">init</span> <span class="op">===</span> <span class="st">&#39;function&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="va">route</span>.<span class="at">init</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>And update the routes definition with:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">const</span> routes <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="st">&#39;/login&#39;</span><span class="op">:</span> <span class="op">{</span> <span class="dt">templateId</span><span class="op">:</span> <span class="st">&#39;login&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb17-3" title="3">  <span class="st">&#39;/dashboard&#39;</span><span class="op">:</span> <span class="op">{</span> <span class="dt">templateId</span><span class="op">:</span> <span class="st">&#39;dashboard&#39;</span><span class="op">,</span> <span class="dt">init</span><span class="op">:</span> updateDashboard <span class="op">}</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>Dengan perubahan ini, setiap kali halaman dashboard ditampilkan, fungsi <code>updateDashboard()</code> dipanggil. Selepas log masuk, anda seharusnya dapat melihat baki akaun, mata wang dan keterangan.</p>
<h2 id="buat-baris-jadual-secara-dinamik-dengan-templat-html">Buat baris jadual secara dinamik dengan templat HTML</h2>
<p>Dalam <a href="../1-template-route/README.md">first lesson</a> kami menggunakan templat HTML bersama dengan <a href="https://developer.mozilla.org/docs/Web/API/Node/appendChild"><code>appendChild()</code></a> kaedah untuk melaksanakan navigasi di aplikasi kami. Templat juga dapat lebih kecil dan digunakan untuk mengisi bahagian halaman yang berulang secara dinamis.</p>
<p>Kami akan menggunakan pendekatan yang serupa untuk memaparkan senarai transaksi dalam jadual HTML.</p>
<h3 id="tugas-3">Tugas</h3>
<p>Tambahkan templat baru dalam HTML <code>&lt;body&gt;</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">&lt;template</span><span class="ot"> id=</span><span class="st">&quot;transaction&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="kw">&lt;tr&gt;</span></a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="kw">&lt;td&gt;&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb18-4" title="4">    <span class="kw">&lt;td&gt;&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb18-5" title="5">    <span class="kw">&lt;td&gt;&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="kw">&lt;/tr&gt;</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="kw">&lt;/template&gt;</span></a></code></pre></div>
<p>Templat ini mewakili satu baris jadual, dengan 3 lajur yang ingin kita isi: <em>tarikh</em>, <em>objek</em> dan <em>jumlah</em> transaksi.</p>
<p>Kemudian, tambahkan sifat <code>id</code> ini ke elemen<code>&lt;tbody&gt;</code>di dalam templat papan pemuka untuk memudahkan pencarian menggunakan JavaScript:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">&lt;tbody</span><span class="ot"> id=</span><span class="st">&quot;transactions&quot;</span><span class="kw">&gt;&lt;/tbody&gt;</span></a></code></pre></div>
<p>HTML kami sudah siap, mari beralih ke kod JavaScript dan buat fungsi baru <code>createTransactionRow</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">function</span> <span class="at">createTransactionRow</span>(transaction) <span class="op">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="kw">const</span> template <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;transaction&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="kw">const</span> transactionRow <span class="op">=</span> <span class="va">template</span>.<span class="va">content</span>.<span class="at">cloneNode</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-4" title="4">  <span class="kw">const</span> tr <span class="op">=</span> <span class="va">transactionRow</span>.<span class="at">querySelector</span>(<span class="st">&#39;tr&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-5" title="5">  <span class="va">tr</span>.<span class="at">children</span>[<span class="dv">0</span>].<span class="at">textContent</span> <span class="op">=</span> <span class="va">transaction</span>.<span class="at">date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-6" title="6">  <span class="va">tr</span>.<span class="at">children</span>[<span class="dv">1</span>].<span class="at">textContent</span> <span class="op">=</span> <span class="va">transaction</span>.<span class="at">object</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-7" title="7">  <span class="va">tr</span>.<span class="at">children</span>[<span class="dv">2</span>].<span class="at">textContent</span> <span class="op">=</span> <span class="va">transaction</span>.<span class="va">amount</span>.<span class="at">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-8" title="8">  <span class="cf">return</span> transactionRow<span class="op">;</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>Fungsi ini melakukan apa yang disiratkan namanya: menggunakan templat yang kita buat sebelumnya, ia membuat baris jadual baru dan mengisi isinya menggunakan data transaksi. Kami akan menggunakannya dalam fungsi <code>updateDashboard()</code> kami untuk mengisi jadual:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">const</span> transactionsRows <span class="op">=</span> <span class="va">document</span>.<span class="at">createDocumentFragment</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="cf">for</span> (<span class="kw">const</span> transaction <span class="kw">of</span> <span class="va">account</span>.<span class="at">transactions</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb21-3" title="3">  <span class="kw">const</span> transactionRow <span class="op">=</span> <span class="at">createTransactionRow</span>(transaction)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="va">transactionsRows</span>.<span class="at">appendChild</span>(transactionRow)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="at">updateElement</span>(<span class="st">&#39;transactions&#39;</span><span class="op">,</span> transactionsRows)<span class="op">;</span></a></code></pre></div>
<p>Di sini kita menggunakan kaedah <a href="https://developer.mozilla.org/docs/Web/API/Document/createDocumentFragment"><code>document.createDocumentFragment()</code></a> yang membuat serpihan DOM baru yang boleh kita gunakan , sebelum akhirnya melampirkannya ke jadual HTML kami.</p>
<p>Masih ada satu perkara lagi yang harus kita lakukan sebelum kod ini dapat berfungsi, kerana fungsi <code>updateElement()</code> kami pada masa ini hanya menyokong kandungan teks. Mari ubah kodnya sedikit:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">function</span> <span class="at">updateElement</span>(id<span class="op">,</span> textOrNode) <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="kw">const</span> element <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="va">element</span>.<span class="at">textContent</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span> <span class="co">// Removes all children</span></a>
<a class="sourceLine" id="cb22-4" title="4">  <span class="va">element</span>.<span class="at">append</span>(textOrNode)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>Kami menggunakan kaedah <a href="https://developer.mozilla.org/docs/Web/API/ParentNode/append"><code>append()</code></a> kerana ia membolehkan melampirkan teks atau [DOM Nodes] (https : //developer.mozilla.org/docs/Web/API/Node) ke elemen induk, yang sangat sesuai untuk semua kes penggunaan kami.</p>
<p>Sekiranya anda cuba menggunakan akaun <code>test</code> untuk log masuk, kini anda akan melihat senarai transaksi di papan pemuka 🎉.</p>
<hr />
<h2 id="cabaran">🚀 Cabaran</h2>
<p>Bekerjasama untuk menjadikan halaman papan pemuka kelihatan seperti aplikasi perbankan sebenar. Sekiranya anda sudah menggayakan aplikasi anda, cuba gunakan <a href="https://developer.mozilla.org/docs/Web/CSS/Media_Queries">pertanyaan media</a> untuk membuat <a href="https://developer.mozilla.org/docs/Web/Progressive_web_apps/Responsive/responsive_design_building_blocks">responsive design</a> berfungsi dengan baik pada kedua-dua desktop dan peranti mudah alih.</p>
<p>Berikut adalah contoh halaman papan pemuka yang digayakan:</p>
<figure>
<img src="../../images/screen2.png" alt="Tangkapan skrin hasil contoh papan pemuka selepas menggayakan" /><figcaption>Tangkapan skrin hasil contoh papan pemuka selepas menggayakan</figcaption>
</figure>
<h2 id="kuiz-pasca-kuliah">Kuiz Pasca Kuliah</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/46">Kuiz Pasca Kuliah</a></p>
<h2 id="tugasan">Tugasan</h2>
<p><a href="assignment.ms.md">Refaktor dan komen kod anda</a></p>
</body>
</html>
