<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="winston">winston</h1>
<p>A logger for just about everything.</p>
<p><a href="https://www.npmjs.com/package/winston"><img src="https://img.shields.io/npm/v/winston.svg?style=flat-square" alt="Version npm" /></a><a href="https://npmcharts.com/compare/winston?minimal=true"><img src="https://img.shields.io/npm/dm/winston.svg?style=flat-square" alt="npm Downloads" /></a><a href="https://travis-ci.org/winstonjs/winston"><img src="https://img.shields.io/travis/winstonjs/winston/master.svg?style=flat-square" alt="Build Status" /></a><a href="https://david-dm.org/winstonjs/winston"><img src="https://img.shields.io/david/winstonjs/winston.svg?style=flat-square" alt="Dependencies" /></a></p>
<p><a href="https://nodei.co/npm/winston/"><img src="https://nodei.co/npm/winston.png?downloads=true&amp;downloadRank=true" alt="NPM" /></a></p>
<p><a href="https://gitter.im/winstonjs/winston?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/winstonjs/winston" /></a></p>
<h2 id="winston3">winston@3</h2>
<p>See the <a href="UPGRADE-3.0.md">Upgrade Guide</a> for more information. Bug reports and PRs welcome!</p>
<h2 id="looking-for-winston2.x-documentation">Looking for <code>winston@2.x</code> documentation?</h2>
<p>Please note that the documentation below is for <code>winston@3</code>. <a href="https://github.com/winstonjs/winston/tree/2.x">Read the <code>winston@2.x</code> documentation</a>.</p>
<h2 id="motivation">Motivation</h2>
<p><code>winston</code> is designed to be a simple and universal logging library with support for multiple transports. A transport is essentially a storage device for your logs. Each <code>winston</code> logger can have multiple transports (see: <a href="#transports">Transports</a>) configured at different levels (see: <a href="#logging-levels">Logging levels</a>). For example, one may want error logs to be stored in a persistent remote location (like a database), but all logs output to the console or a local file.</p>
<p><code>winston</code> aims to decouple parts of the logging process to make it more flexible and extensible. Attention is given to supporting flexibility in log formatting (see: <a href="#formats">Formats</a>) &amp; levels (see: <a href="#using-custom-logging-levels">Using custom logging levels</a>), and ensuring those APIs decoupled from the implementation of transport logging (i.e. how the logs are stored / indexed, see: <a href="#adding-custom-transports">Adding Custom Transports</a>) to the API that they exposed to the programmer.</p>
<h2 id="quick-start">Quick Start</h2>
<p>TL;DR? Check out the <a href="https://github.com/winstonjs/winston/blob/master/examples/quick-start.js">quick start example</a> in <code>./examples/</code>. There are a number of other examples in <a href="https://github.com/winstonjs/winston/tree/master/examples"><code>./examples/*.js</code></a>. Don’t see an example you think should be there? Submit a pull request to add it!</p>
<h2 id="usage">Usage</h2>
<p>The recommended way to use <code>winston</code> is to create your own logger. The simplest way to do this is using <code>winston.createLogger</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> winston <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="dt">format</span><span class="op">:</span> <span class="va">winston</span>.<span class="va">format</span>.<span class="at">json</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="dt">defaultMeta</span><span class="op">:</span> <span class="op">{</span> <span class="dt">service</span><span class="op">:</span> <span class="st">&#39;user-service&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="co">//</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="co">// - Write all logs with level `error` and below to `error.log`</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="co">// - Write all logs with level `info` and below to `combined.log`</span></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="co">//</span></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;error.log&#39;</span><span class="op">,</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb1-13" title="13">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb1-14" title="14">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-16" title="16"></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co">//</span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co">// If we&#39;re not in production then log to the `console` with the format:</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">// `${info.level}: ${info.message} JSON.stringify({ ...rest }) `</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">//</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="cf">if</span> (<span class="va">process</span>.<span class="va">env</span>.<span class="at">NODE_ENV</span> <span class="op">!==</span> <span class="st">&#39;production&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-22" title="22">  <span class="va">logger</span>.<span class="at">add</span>(<span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-23" title="23">    <span class="dt">format</span><span class="op">:</span> <span class="va">winston</span>.<span class="va">format</span>.<span class="at">simple</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb1-24" title="24">  <span class="op">}</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="op">}</span></a></code></pre></div>
<p>You may also log directly via the default logger exposed by <code>require('winston')</code>, but this merely intended to be a convenient shared logger to use throughout your application if you so choose.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#logging">Logging</a>
<ul>
<li><a href="#creating-your-own-logger">Creating your logger</a></li>
<li><a href="#streams-objectmode-and-info-objects">Streams, <code>objectMode</code>, and <code>info</code> objects</a></li>
</ul></li>
<li><a href="#formats">Formats</a>
<ul>
<li><a href="#combining-formats">Combining formats</a></li>
<li><a href="#string-interpolation">String interpolation</a></li>
<li><a href="#filtering-info-objects">Filtering <code>info</code> Objects</a></li>
<li><a href="#creating-custom-formats">Creating custom formats</a></li>
</ul></li>
<li><a href="#logging-levels">Logging levels</a>
<ul>
<li><a href="#using-logging-levels">Using logging levels</a></li>
<li><a href="#using-custom-logging-levels">Using custom logging levels</a></li>
</ul></li>
<li><a href="#transports">Transports</a>
<ul>
<li><a href="#multiple-transports-of-the-same-type">Multiple transports of the same type</a></li>
<li><a href="#adding-custom-transports">Adding Custom Transports</a></li>
<li><a href="#common-transport-options">Common Transport options</a></li>
</ul></li>
<li><a href="#exceptions">Exceptions</a>
<ul>
<li><a href="#handling-uncaught-exceptions-with-winston">Handling Uncaught Exceptions with winston</a></li>
<li><a href="#to-exit-or-not-to-exit">To Exit or Not to Exit</a></li>
</ul></li>
<li><a href="#rejections">Rejections</a>
<ul>
<li><a href="#handling-uncaught-promise-rejections-with-winston">Handling Uncaught Promise Rejections with winston</a><br />
</li>
</ul></li>
<li><a href="#profiling">Profiling</a></li>
<li><a href="#streaming-logs">Streaming Logs</a></li>
<li><a href="#querying-logs">Querying Logs</a></li>
<li><a href="#further-reading">Further Reading</a>
<ul>
<li><a href="#using-the-default-logger">Using the default logger</a></li>
<li><a href="#awaiting-logs-to-be-written-in-winston">Awaiting logs to be written in <code>winston</code></a></li>
<li><a href="#working-with-multiple-loggers-in-winston">Working with multiple Loggers in <code>winston</code></a></li>
</ul></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#run-tests">Run Tests</a></li>
</ul>
<h2 id="logging">Logging</h2>
<p>Logging levels in <code>winston</code> conform to the severity ordering specified by <a href="https://tools.ietf.org/html/rfc5424">RFC5424</a>: <em>severity of all levels is assumed to be numerically <strong>ascending</strong> from most important to least important.</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> levels <span class="op">=</span> <span class="op">{</span> </a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">error</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">warn</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">info</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">http</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">verbose</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="dt">debug</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="dt">silly</span><span class="op">:</span> <span class="dv">6</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="op">};</span></a></code></pre></div>
<h3 id="creating-your-own-logger">Creating your own Logger</h3>
<p>You get started by creating a logger using <code>winston.createLogger</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb3-5" title="5">  ]</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>A logger accepts the following parameters:</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 49%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>level</code></td>
<td><code>'info'</code></td>
<td>Log only if <a href="#streams-objectmode-and-info-objects"><code>info.level</code></a> less than or equal to this level</td>
</tr>
<tr class="even">
<td><code>levels</code></td>
<td><code>winston.config.npm.levels</code></td>
<td>Levels (and colors) representing log priorities</td>
</tr>
<tr class="odd">
<td><code>format</code></td>
<td><code>winston.format.json</code></td>
<td>Formatting for <code>info</code> messages (see: <a href="#formats">Formats</a>)</td>
</tr>
<tr class="even">
<td><code>transports</code></td>
<td><code>[]</code> <em>(No transports)</em></td>
<td>Set of logging targets for <code>info</code> messages</td>
</tr>
<tr class="odd">
<td><code>exitOnError</code></td>
<td><code>true</code></td>
<td>If false, handled exceptions will not cause <code>process.exit</code></td>
</tr>
<tr class="even">
<td><code>silent</code></td>
<td><code>false</code></td>
<td>If true, all logs are suppressed</td>
</tr>
</tbody>
</table>
<p>The levels provided to <code>createLogger</code> will be defined as convenience methods on the <code>logger</code> returned.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">// Logging</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="va">logger</span>.<span class="at">log</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Hello distributed log files!&#39;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="va">logger</span>.<span class="at">info</span>(<span class="st">&#39;Hello again distributed logs&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>You can add or remove transports from the <code>logger</code> once it has been provided to you from <code>winston.createLogger</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> files <span class="op">=</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> console <span class="op">=</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4">logger</a>
<a class="sourceLine" id="cb5-5" title="5">  .<span class="at">clear</span>()          <span class="co">// Remove all transports</span></a>
<a class="sourceLine" id="cb5-6" title="6">  .<span class="at">add</span>(console)     <span class="co">// Add console transport</span></a>
<a class="sourceLine" id="cb5-7" title="7">  .<span class="at">add</span>(files)       <span class="co">// Add file transport</span></a>
<a class="sourceLine" id="cb5-8" title="8">  .<span class="at">remove</span>(console)<span class="op">;</span> <span class="co">// Remove console transport</span></a></code></pre></div>
<p>You can also wholesale reconfigure a <code>winston.Logger</code> instance using the <code>configure</code> method:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb6-6" title="6">  ]</a>
<a class="sourceLine" id="cb6-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">//</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">// Replaces the previous transports with those in the</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">// new configuration wholesale.</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">//</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="kw">const</span> DailyRotateFile <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston-daily-rotate-file&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="va">logger</span>.<span class="at">configure</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;verbose&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-16" title="16">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb6-17" title="17">    <span class="kw">new</span> <span class="at">DailyRotateFile</span>(opts)</a>
<a class="sourceLine" id="cb6-18" title="18">  ]</a>
<a class="sourceLine" id="cb6-19" title="19"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="creating-child-loggers">Creating child loggers</h3>
<p>You can create child loggers from existing loggers to pass metadata overrides:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb7-4" title="4">  ]</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="kw">const</span> childLogger <span class="op">=</span> <span class="va">logger</span>.<span class="at">child</span>(<span class="op">{</span> <span class="dt">requestId</span><span class="op">:</span> <span class="st">&#39;451&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="streams-objectmode-and-info-objects">Streams, <code>objectMode</code>, and <code>info</code> objects</h3>
<p>In <code>winston</code>, both <code>Logger</code> and <code>Transport</code> instances are treated as <a href="https://nodejs.org/api/stream.html#stream_object_mode"><code>objectMode</code></a> streams that accept an <code>info</code> object.</p>
<p>The <code>info</code> parameter provided to a given format represents a single log message. The object itself is mutable. Every <code>info</code> must have at least the <code>level</code> and <code>message</code> properties:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> info <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span>                 <span class="co">// Level of the logging message  </span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Hey! Log something?&#39;</span> <span class="co">// Descriptive message being logged.</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>Properties <strong>besides level and message</strong> are considered as “<code>meta</code>”. i.e.:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">const</span> <span class="op">{</span> level<span class="op">,</span> message<span class="op">,</span> ...<span class="at">meta</span> <span class="op">}</span> <span class="op">=</span> info<span class="op">;</span></a></code></pre></div>
<p>Several of the formats in <code>logform</code> itself add additional properties:</p>
<table>
<thead>
<tr class="header">
<th>Property</th>
<th>Format added by</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>splat</code></td>
<td><code>splat()</code></td>
<td>String interpolation splat for <code>%d %s</code>-style messages.</td>
</tr>
<tr class="even">
<td><code>timestamp</code></td>
<td><code>timestamp()</code></td>
<td>timestamp the message was received.</td>
</tr>
<tr class="odd">
<td><code>label</code></td>
<td><code>label()</code></td>
<td>Custom label associated with each message.</td>
</tr>
<tr class="even">
<td><code>ms</code></td>
<td><code>ms()</code></td>
<td>Number of milliseconds since the previous log message.</td>
</tr>
</tbody>
</table>
<p>As a consumer you may add whatever properties you wish – <em>internal state is maintained by <code>Symbol</code> properties:</em></p>
<ul>
<li><code>Symbol.for('level')</code> <em><strong>(READ-ONLY)</strong>:</em> equal to <code>level</code> property. <strong>Is treated as immutable by all code.</strong></li>
<li><code>Symbol.for('message'):</code> complete string message set by “finalizing formats”:
<ul>
<li><code>json</code></li>
<li><code>logstash</code></li>
<li><code>printf</code></li>
<li><code>prettyPrint</code></li>
<li><code>simple</code></li>
</ul></li>
<li><code>Symbol.for('splat')</code>: additional string interpolation arguments. <em>Used exclusively by <code>splat()</code> format.</em></li>
</ul>
<p>These Symbols are stored in another package: <code>triple-beam</code> so that all consumers of <code>logform</code> can have the same Symbol reference. i.e.:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> <span class="op">{</span> LEVEL<span class="op">,</span> MESSAGE<span class="op">,</span> SPLAT <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;triple-beam&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="va">console</span>.<span class="at">log</span>(LEVEL <span class="op">===</span> <span class="va">Symbol</span>.<span class="at">for</span>(<span class="st">&#39;level&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">// true</span></a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="va">console</span>.<span class="at">log</span>(MESSAGE <span class="op">===</span> <span class="va">Symbol</span>.<span class="at">for</span>(<span class="st">&#39;message&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">// true</span></a>
<a class="sourceLine" id="cb10-8" title="8"></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="va">console</span>.<span class="at">log</span>(SPLAT <span class="op">===</span> <span class="va">Symbol</span>.<span class="at">for</span>(<span class="st">&#39;splat&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">// true</span></a></code></pre></div>
<blockquote>
<p><strong>NOTE:</strong> any <code>{ message }</code> property in a <code>meta</code> object provided will automatically be concatenated to any <code>msg</code> already provided: For example the below will concatenate ‘world’ onto ‘hello’:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;error&#39;</span><span class="op">,</span> <span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;world&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="va">logger</span>.<span class="at">info</span>(<span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;world&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
</blockquote>
<h2 id="formats">Formats</h2>
<p>Formats in <code>winston</code> can be accessed from <code>winston.format</code>. They are implemented in <a href="https://github.com/winstonjs/logform"><code>logform</code></a>, a separate module from <code>winston</code>. This allows flexibility when writing your own transports in case you wish to include a default format with your transport.</p>
<p>In modern versions of <code>node</code> template strings are very performant and are the recommended way for doing most end-user formatting. If you want to bespoke format your logs, <code>winston.format.printf</code> is for you:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> <span class="op">{</span> createLogger<span class="op">,</span> format<span class="op">,</span> transports <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw">const</span> <span class="op">{</span> combine<span class="op">,</span> timestamp<span class="op">,</span> label<span class="op">,</span> printf <span class="op">}</span> <span class="op">=</span> format<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3"></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">const</span> myFormat <span class="op">=</span> <span class="at">printf</span>((<span class="op">{</span> level<span class="op">,</span> message<span class="op">,</span> label<span class="op">,</span> timestamp <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-5" title="5">  <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>timestamp<span class="sc">}</span><span class="vs"> [</span><span class="sc">${</span>label<span class="sc">}</span><span class="vs">] </span><span class="sc">${</span>level<span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>message<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-7" title="7"></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb12-9" title="9">  <span class="dt">format</span><span class="op">:</span> <span class="at">combine</span>(</a>
<a class="sourceLine" id="cb12-10" title="10">    <span class="at">label</span>(<span class="op">{</span> <span class="dt">label</span><span class="op">:</span> <span class="st">&#39;right meow!&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb12-11" title="11">    <span class="at">timestamp</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb12-12" title="12">    myFormat</a>
<a class="sourceLine" id="cb12-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb12-14" title="14">  <span class="dt">transports</span><span class="op">:</span> [<span class="kw">new</span> <span class="va">transports</span>.<span class="at">Console</span>()]</a>
<a class="sourceLine" id="cb12-15" title="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>To see what built-in formats are available and learn more about creating your own custom logging formats, see <a href="https://github.com/winstonjs/logform#readme"><code>logform</code></a>.</p>
<h3 id="combining-formats">Combining formats</h3>
<p>Any number of formats may be combined into a single format using <code>format.combine</code>. Since <code>format.combine</code> takes no <code>opts</code>, as a convenience it returns pre-created instance of the combined format.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">const</span> <span class="op">{</span> createLogger<span class="op">,</span> format<span class="op">,</span> transports <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">const</span> <span class="op">{</span> combine<span class="op">,</span> timestamp<span class="op">,</span> label<span class="op">,</span> prettyPrint <span class="op">}</span> <span class="op">=</span> format<span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb13-5" title="5">  <span class="dt">format</span><span class="op">:</span> <span class="at">combine</span>(</a>
<a class="sourceLine" id="cb13-6" title="6">    <span class="at">label</span>(<span class="op">{</span> <span class="dt">label</span><span class="op">:</span> <span class="st">&#39;right meow!&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb13-7" title="7">    <span class="at">timestamp</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb13-8" title="8">    <span class="at">prettyPrint</span>()</a>
<a class="sourceLine" id="cb13-9" title="9">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb13-10" title="10">  <span class="dt">transports</span><span class="op">:</span> [<span class="kw">new</span> <span class="va">transports</span>.<span class="at">Console</span>()]</a>
<a class="sourceLine" id="cb13-11" title="11"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb13-12" title="12"></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="va">logger</span>.<span class="at">log</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb13-14" title="14">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-15" title="15">  <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;What time is the testing at?&#39;</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co">// Outputs:</span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="co">// { level: &#39;info&#39;,</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">//   message: &#39;What time is the testing at?&#39;,</span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="co">//   label: &#39;right meow!&#39;,</span></a>
<a class="sourceLine" id="cb13-21" title="21"><span class="co">//   timestamp: &#39;2017-09-30T03:57:26.875Z&#39; }</span></a></code></pre></div>
<h3 id="string-interpolation">String interpolation</h3>
<p>The <code>log</code> method provides the string interpolation using <a href="https://nodejs.org/dist/latest/docs/api/util.html#util_util_format_format_args">util.format</a>. <strong>It must be enabled using <code>format.splat()</code>.</strong></p>
<p>Below is an example that defines a format with string interpolation of messages using <code>format.splat</code> and then serializes the entire <code>info</code> message using <code>format.simple</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">const</span> <span class="op">{</span> createLogger<span class="op">,</span> format<span class="op">,</span> transports <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb14-3" title="3">  <span class="dt">format</span><span class="op">:</span> <span class="va">format</span>.<span class="at">combine</span>(</a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="va">format</span>.<span class="at">splat</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb14-5" title="5">    <span class="va">format</span>.<span class="at">simple</span>()</a>
<a class="sourceLine" id="cb14-6" title="6">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb14-7" title="7">  <span class="dt">transports</span><span class="op">:</span> [<span class="kw">new</span> <span class="va">transports</span>.<span class="at">Console</span>()]</a>
<a class="sourceLine" id="cb14-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-9" title="9"></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">// info: test message my string {}</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="st">&#39;test message %s&#39;</span><span class="op">,</span> <span class="st">&#39;my string&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-12" title="12"></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">// info: test message 123 {}</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="st">&#39;test message %d&#39;</span><span class="op">,</span> <span class="dv">123</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-15" title="15"></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">// info: test message first second {number: 123}</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="st">&#39;test message %s, %s&#39;</span><span class="op">,</span> <span class="st">&#39;first&#39;</span><span class="op">,</span> <span class="st">&#39;second&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">number</span><span class="op">:</span> <span class="dv">123</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="filtering-info-objects">Filtering <code>info</code> Objects</h3>
<p>If you wish to filter out a given <code>info</code> Object completely when logging then simply return a falsey value.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">const</span> <span class="op">{</span> createLogger<span class="op">,</span> format<span class="op">,</span> transports <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-2" title="2"></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="co">// Ignore log messages if they have { private: true }</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="kw">const</span> ignorePrivate <span class="op">=</span> <span class="at">format</span>((info<span class="op">,</span> opts) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-5" title="5">  <span class="cf">if</span> (<span class="va">info</span>.<span class="at">private</span>) <span class="op">{</span> <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="cf">return</span> info<span class="op">;</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8"></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb15-10" title="10">  <span class="dt">format</span><span class="op">:</span> <span class="va">format</span>.<span class="at">combine</span>(</a>
<a class="sourceLine" id="cb15-11" title="11">    <span class="at">ignorePrivate</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb15-12" title="12">    <span class="va">format</span>.<span class="at">json</span>()</a>
<a class="sourceLine" id="cb15-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb15-14" title="14">  <span class="dt">transports</span><span class="op">:</span> [<span class="kw">new</span> <span class="va">transports</span>.<span class="at">Console</span>()]</a>
<a class="sourceLine" id="cb15-15" title="15"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-16" title="16"></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="co">// Outputs: {&quot;level&quot;:&quot;error&quot;,&quot;message&quot;:&quot;Public error to share&quot;}</span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="va">logger</span>.<span class="at">log</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb15-19" title="19">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb15-20" title="20">  <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Public error to share&#39;</span></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-22" title="22"></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="co">// Messages with { private: true } will not be written when logged.</span></a>
<a class="sourceLine" id="cb15-24" title="24"><span class="va">logger</span>.<span class="at">log</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb15-25" title="25">  <span class="dt">private</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb15-26" title="26">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb15-27" title="27">  <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;This is super secret - hide it.&#39;</span></a>
<a class="sourceLine" id="cb15-28" title="28"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Use of <code>format.combine</code> will respect any falsey values return and stop evaluation of later formats in the series. For example:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> <span class="op">{</span> format <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">const</span> <span class="op">{</span> combine<span class="op">,</span> timestamp<span class="op">,</span> label <span class="op">}</span> <span class="op">=</span> format<span class="op">;</span></a>
<a class="sourceLine" id="cb16-3" title="3"></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="kw">const</span> willNeverThrow <span class="op">=</span> <span class="va">format</span>.<span class="at">combine</span>(</a>
<a class="sourceLine" id="cb16-5" title="5">  <span class="at">format</span>(info <span class="kw">=&gt;</span> <span class="op">{</span> <span class="cf">return</span> <span class="kw">false</span> <span class="op">}</span>)()<span class="op">,</span> <span class="co">// Ignores everything</span></a>
<a class="sourceLine" id="cb16-6" title="6">  <span class="at">format</span>(info <span class="kw">=&gt;</span> <span class="op">{</span> <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Never reached&#39;</span>) <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb16-7" title="7">)<span class="op">;</span></a></code></pre></div>
<h3 id="creating-custom-formats">Creating custom formats</h3>
<p>Formats are prototypal objects (i.e. class instances) that define a single method: <code>transform(info, opts)</code> and return the mutated <code>info</code>:</p>
<ul>
<li><code>info</code>: an object representing the log message.</li>
<li><code>opts</code>: setting specific to the current instance of the format.</li>
</ul>
<p>They are expected to return one of two things:</p>
<ul>
<li><strong>An <code>info</code> Object</strong> representing the modified <code>info</code> argument. Object references need not be preserved if immutability is preferred. All current built-in formats consider <code>info</code> mutable, but [immutablejs] is being considered for future releases.</li>
<li><strong>A falsey value</strong> indicating that the <code>info</code> argument should be ignored by the caller. (See: <a href="#filtering-info-objects">Filtering <code>info</code> Objects</a>) below.</li>
</ul>
<p><code>winston.format</code> is designed to be as simple as possible. To define a new format simple pass it a <code>transform(info, opts)</code> function to get a new <code>Format</code>.</p>
<p>The named <code>Format</code> returned can be used to create as many copies of the given <code>Format</code> as desired:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">const</span> <span class="op">{</span> format <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">const</span> volume <span class="op">=</span> <span class="at">format</span>((info<span class="op">,</span> opts) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-4" title="4">  <span class="cf">if</span> (<span class="va">opts</span>.<span class="at">yell</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-5" title="5">    <span class="va">info</span>.<span class="at">message</span> <span class="op">=</span> <span class="va">info</span>.<span class="va">message</span>.<span class="at">toUpperCase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb17-6" title="6">  <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> (<span class="va">opts</span>.<span class="at">whisper</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-7" title="7">    <span class="va">info</span>.<span class="at">message</span> <span class="op">=</span> <span class="va">info</span>.<span class="va">message</span>.<span class="at">toLowerCase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb17-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb17-9" title="9"></a>
<a class="sourceLine" id="cb17-10" title="10">  <span class="cf">return</span> info<span class="op">;</span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-12" title="12"></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">// `volume` is now a function that returns instances of the format.</span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="kw">const</span> scream <span class="op">=</span> <span class="at">volume</span>(<span class="op">{</span> <span class="dt">yell</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="va">console</span>.<span class="at">dir</span>(<span class="va">scream</span>.<span class="at">transform</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb17-16" title="16">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-17" title="17">  <span class="dt">message</span><span class="op">:</span> <span class="vs">`sorry for making you YELL in your head!`</span></a>
<a class="sourceLine" id="cb17-18" title="18"><span class="op">},</span> <span class="va">scream</span>.<span class="at">options</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb17-19" title="19"><span class="co">// {</span></a>
<a class="sourceLine" id="cb17-20" title="20"><span class="co">//   level: &#39;info&#39;</span></a>
<a class="sourceLine" id="cb17-21" title="21"><span class="co">//   message: &#39;SORRY FOR MAKING YOU YELL IN YOUR HEAD!&#39;</span></a>
<a class="sourceLine" id="cb17-22" title="22"><span class="co">// }</span></a>
<a class="sourceLine" id="cb17-23" title="23"></a>
<a class="sourceLine" id="cb17-24" title="24"><span class="co">// `volume` can be used multiple times to create different formats.</span></a>
<a class="sourceLine" id="cb17-25" title="25"><span class="kw">const</span> whisper <span class="op">=</span> <span class="at">volume</span>(<span class="op">{</span> <span class="dt">whisper</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-26" title="26"><span class="va">console</span>.<span class="at">dir</span>(<span class="va">whisper</span>.<span class="at">transform</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb17-27" title="27">  <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-28" title="28">  <span class="dt">message</span><span class="op">:</span> <span class="vs">`WHY ARE THEY MAKING US YELL SO MUCH!`</span></a>
<a class="sourceLine" id="cb17-29" title="29"><span class="op">},</span> <span class="va">whisper</span>.<span class="at">options</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb17-30" title="30"><span class="co">// {</span></a>
<a class="sourceLine" id="cb17-31" title="31"><span class="co">//   level: &#39;info&#39;</span></a>
<a class="sourceLine" id="cb17-32" title="32"><span class="co">//   message: &#39;why are they making us yell so much!&#39;</span></a>
<a class="sourceLine" id="cb17-33" title="33"><span class="co">// }</span></a></code></pre></div>
<h2 id="logging-levels">Logging Levels</h2>
<p>Logging levels in <code>winston</code> conform to the severity ordering specified by <a href="https://tools.ietf.org/html/rfc5424">RFC5424</a>: <em>severity of all levels is assumed to be numerically <strong>ascending</strong> from most important to least important.</em></p>
<p>Each <code>level</code> is given a specific integer priority. The higher the priority the more important the message is considered to be, and the lower the corresponding integer priority. For example, as specified exactly in RFC5424 the <code>syslog</code> levels are prioritized from 0 to 7 (highest to lowest).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="op">{</span> </a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="dt">emerg</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">alert</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">crit</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-5" title="5">  <span class="dt">error</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="dt">warning</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-7" title="7">  <span class="dt">notice</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-8" title="8">  <span class="dt">info</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb18-9" title="9">  <span class="dt">debug</span><span class="op">:</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>Similarly, <code>npm</code> logging levels are prioritized from 0 to 6 (highest to lowest):</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="op">{</span> </a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="dt">error</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb19-3" title="3">  <span class="dt">warn</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="dt">info</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb19-5" title="5">  <span class="dt">http</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></a>
<a class="sourceLine" id="cb19-6" title="6">  <span class="dt">verbose</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb19-7" title="7">  <span class="dt">debug</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb19-8" title="8">  <span class="dt">silly</span><span class="op">:</span> <span class="dv">6</span> </a>
<a class="sourceLine" id="cb19-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>If you do not explicitly define the levels that <code>winston</code> should use, the <code>npm</code> levels above will be used.</p>
<h3 id="using-logging-levels">Using Logging Levels</h3>
<p>Setting the level for your logging message can be accomplished in one of two ways. You can pass a string representing the logging level to the log() method or use the level specified methods defined on every winston Logger.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">// Any logger instance</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;silly&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;debug&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;verbose&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;warn&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="va">logger</span>.<span class="at">log</span>(<span class="st">&#39;error&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="va">logger</span>.<span class="at">info</span>(<span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="va">logger</span>.<span class="at">warn</span>(<span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="va">logger</span>.<span class="at">error</span>(<span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-13" title="13"></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="co">//</span></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co">// Default logger</span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">//</span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="va">winston</span>.<span class="at">log</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-18" title="18"><span class="va">winston</span>.<span class="at">info</span>(<span class="st">&quot;127.0.0.1 - there&#39;s no place like home&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p><code>winston</code> allows you to define a <code>level</code> property on each transport which specifies the <strong>maximum</strong> level of messages that a transport should log. For example, using the <code>syslog</code> levels you could log only <code>error</code> messages to the console and everything <code>info</code> and below to a file (which includes <code>error</code> messages):</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb21-2" title="2">  <span class="dt">levels</span><span class="op">:</span> <span class="va">winston</span>.<span class="va">config</span>.<span class="va">syslog</span>.<span class="at">levels</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-3" title="3">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb21-4" title="4">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb21-5" title="5">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb21-6" title="6">      <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-7" title="7">      <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span></a>
<a class="sourceLine" id="cb21-8" title="8">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb21-9" title="9">  ]</a>
<a class="sourceLine" id="cb21-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>You may also dynamically change the log level of a transport:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">const</span> transports <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="dt">console</span><span class="op">:</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;warn&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="dt">file</span><span class="op">:</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span><span class="op">,</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb22-4" title="4"><span class="op">};</span></a>
<a class="sourceLine" id="cb22-5" title="5"></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb22-7" title="7">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb22-8" title="8">    <span class="va">transports</span>.<span class="at">console</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-9" title="9">    <span class="va">transports</span>.<span class="at">file</span></a>
<a class="sourceLine" id="cb22-10" title="10">  ]</a>
<a class="sourceLine" id="cb22-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-12" title="12"></a>
<a class="sourceLine" id="cb22-13" title="13"><span class="va">logger</span>.<span class="at">info</span>(<span class="st">&#39;Will not be logged in either transport!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-14" title="14"><span class="va">transports</span>.<span class="va">console</span>.<span class="at">level</span> <span class="op">=</span> <span class="st">&#39;info&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="va">transports</span>.<span class="va">file</span>.<span class="at">level</span> <span class="op">=</span> <span class="st">&#39;info&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-16" title="16"><span class="va">logger</span>.<span class="at">info</span>(<span class="st">&#39;Will be logged in both transports!&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p><code>winston</code> supports customizable logging levels, defaulting to npm style logging levels. Levels must be specified at the time of creating your logger.</p>
<h3 id="using-custom-logging-levels">Using Custom Logging Levels</h3>
<p>In addition to the predefined <code>npm</code>, <code>syslog</code>, and <code>cli</code> levels available in <code>winston</code>, you can also choose to define your own:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">const</span> myCustomLevels <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb23-2" title="2">  <span class="dt">levels</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb23-3" title="3">    <span class="dt">foo</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-4" title="4">    <span class="dt">bar</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-5" title="5">    <span class="dt">baz</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-6" title="6">    <span class="dt">foobar</span><span class="op">:</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb23-7" title="7">  <span class="op">},</span></a>
<a class="sourceLine" id="cb23-8" title="8">  <span class="dt">colors</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb23-9" title="9">    <span class="dt">foo</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-10" title="10">    <span class="dt">bar</span><span class="op">:</span> <span class="st">&#39;green&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-11" title="11">    <span class="dt">baz</span><span class="op">:</span> <span class="st">&#39;yellow&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-12" title="12">    <span class="dt">foobar</span><span class="op">:</span> <span class="st">&#39;red&#39;</span></a>
<a class="sourceLine" id="cb23-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb23-14" title="14"><span class="op">};</span></a>
<a class="sourceLine" id="cb23-15" title="15"></a>
<a class="sourceLine" id="cb23-16" title="16"><span class="kw">const</span> customLevelLogger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb23-17" title="17">  <span class="dt">levels</span><span class="op">:</span> <span class="va">myCustomLevels</span>.<span class="at">levels</span></a>
<a class="sourceLine" id="cb23-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-19" title="19"></a>
<a class="sourceLine" id="cb23-20" title="20"><span class="va">customLevelLogger</span>.<span class="at">foobar</span>(<span class="st">&#39;some foobar level-ed message&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>Although there is slight repetition in this data structure, it enables simple encapsulation if you do not want to have colors. If you do wish to have colors, in addition to passing the levels to the Logger itself, you must make winston aware of them:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="va">winston</span>.<span class="at">addColors</span>(<span class="va">myCustomLevels</span>.<span class="at">colors</span>)<span class="op">;</span></a></code></pre></div>
<p>This enables loggers using the <code>colorize</code> formatter to appropriately color and style the output of custom levels.</p>
<p>Additionally, you can also change background color and font style. For example,</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1">baz<span class="op">:</span> <span class="st">&#39;italic yellow&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-2" title="2">foobar<span class="op">:</span> <span class="st">&#39;bold red cyanBG&#39;</span></a></code></pre></div>
<p>Possible options are below.</p>
<ul>
<li><p>Font styles: <code>bold</code>, <code>dim</code>, <code>italic</code>, <code>underline</code>, <code>inverse</code>, <code>hidden</code>, <code>strikethrough</code>.</p></li>
<li><p>Font foreground colors: <code>black</code>, <code>red</code>, <code>green</code>, <code>yellow</code>, <code>blue</code>, <code>magenta</code>, <code>cyan</code>, <code>white</code>, <code>gray</code>, <code>grey</code>.</p></li>
<li><p>Background colors: <code>blackBG</code>, <code>redBG</code>, <code>greenBG</code>, <code>yellowBG</code>, <code>blueBG</code> <code>magentaBG</code>, <code>cyanBG</code>, <code>whiteBG</code></p></li>
</ul>
<h3 id="colorizing-standard-logging-levels">Colorizing Standard logging levels</h3>
<p>To colorize the standard logging level add</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="va">winston</span>.<span class="va">format</span>.<span class="at">combine</span>(</a>
<a class="sourceLine" id="cb26-2" title="2">  <span class="va">winston</span>.<span class="va">format</span>.<span class="at">colorize</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb26-3" title="3">  <span class="va">winston</span>.<span class="va">format</span>.<span class="at">json</span>()</a>
<a class="sourceLine" id="cb26-4" title="4">)<span class="op">;</span></a></code></pre></div>
<p>where <code>winston.format.json()</code> is whatever other formatter you want to use. The <code>colorize</code> formatter must come before any formatters adding text you wish to color.</p>
<h2 id="transports">Transports</h2>
<p>There are several <a href="docs/transports.md#winston-core">core transports</a> included in <code>winston</code>, which leverage the built-in networking and file I/O offered by Node.js core. In addition, there are <a href="docs/transports.md#additional-transports">additional transports</a> written by members of the community.</p>
<h2 id="multiple-transports-of-the-same-type">Multiple transports of the same type</h2>
<p>It is possible to use multiple transports of the same type e.g. <code>winston.transports.File</code> when you construct the transport.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb27-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb27-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb27-4" title="4">      <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-5" title="5">      <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span></a>
<a class="sourceLine" id="cb27-6" title="6">    <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb27-7" title="7">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb27-8" title="8">      <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;errors.log&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-9" title="9">      <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span></a>
<a class="sourceLine" id="cb27-10" title="10">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb27-11" title="11">  ]</a>
<a class="sourceLine" id="cb27-12" title="12"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>If you later want to remove one of these transports you can do so by using the transport itself. e.g.:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">const</span> combinedLogs <span class="op">=</span> <span class="va">logger</span>.<span class="va">transports</span>.<span class="at">find</span>(transport <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">  <span class="cf">return</span> <span class="va">transport</span>.<span class="at">filename</span> <span class="op">===</span> <span class="st">&#39;combined.log&#39;</span></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb28-4" title="4"></a>
<a class="sourceLine" id="cb28-5" title="5"><span class="va">logger</span>.<span class="at">remove</span>(combinedLogs)<span class="op">;</span></a></code></pre></div>
<h2 id="adding-custom-transports">Adding Custom Transports</h2>
<p>Adding a custom transport is easy. All you need to do is accept any options you need, implement a log() method, and consume it with <code>winston</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">const</span> Transport <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston-transport&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="kw">const</span> util <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;util&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-3" title="3"></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="co">//</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="co">// Inherit from `winston-transport` so you can take advantage</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="co">// of the base functionality and `.exceptions.handle()`.</span></a>
<a class="sourceLine" id="cb29-7" title="7"><span class="co">//</span></a>
<a class="sourceLine" id="cb29-8" title="8"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="kw">class</span> YourCustomTransport <span class="kw">extends</span> Transport <span class="op">{</span></a>
<a class="sourceLine" id="cb29-9" title="9">  <span class="at">constructor</span>(opts) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-10" title="10">    <span class="kw">super</span>(opts)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-11" title="11">    <span class="co">//</span></a>
<a class="sourceLine" id="cb29-12" title="12">    <span class="co">// Consume any custom options here. e.g.:</span></a>
<a class="sourceLine" id="cb29-13" title="13">    <span class="co">// - Connection information for databases</span></a>
<a class="sourceLine" id="cb29-14" title="14">    <span class="co">// - Authentication information for APIs (e.g. loggly, papertrail, </span></a>
<a class="sourceLine" id="cb29-15" title="15">    <span class="co">//   logentries, etc.).</span></a>
<a class="sourceLine" id="cb29-16" title="16">    <span class="co">//</span></a>
<a class="sourceLine" id="cb29-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb29-18" title="18"></a>
<a class="sourceLine" id="cb29-19" title="19">  <span class="at">log</span>(info<span class="op">,</span> callback) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-20" title="20">    <span class="at">setImmediate</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-21" title="21">      <span class="kw">this</span>.<span class="at">emit</span>(<span class="st">&#39;logged&#39;</span><span class="op">,</span> info)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-22" title="22">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-23" title="23"></a>
<a class="sourceLine" id="cb29-24" title="24">    <span class="co">// Perform the writing to the remote service</span></a>
<a class="sourceLine" id="cb29-25" title="25">    <span class="at">callback</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb29-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb29-27" title="27"><span class="op">};</span></a></code></pre></div>
<h2 id="common-transport-options">Common Transport options</h2>
<p>As every transport inherits from <a href="https://github.com/winstonjs/winston-transport">winston-transport</a>, it’s possible to set a custom format and a custom log level on each transport separately:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb30-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb30-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb30-4" title="4">      <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;error.log&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-5" title="5">      <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;error&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-6" title="6">      <span class="dt">format</span><span class="op">:</span> <span class="va">winston</span>.<span class="va">format</span>.<span class="at">json</span>()</a>
<a class="sourceLine" id="cb30-7" title="7">    <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb30-8" title="8">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">Http</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb30-9" title="9">      <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;warn&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-10" title="10">      <span class="dt">format</span><span class="op">:</span> <span class="va">winston</span>.<span class="va">format</span>.<span class="at">json</span>()</a>
<a class="sourceLine" id="cb30-11" title="11">    <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb30-12" title="12">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb30-13" title="13">      <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-14" title="14">      <span class="dt">format</span><span class="op">:</span> <span class="va">winston</span>.<span class="va">format</span>.<span class="at">combine</span>(</a>
<a class="sourceLine" id="cb30-15" title="15">        <span class="va">winston</span>.<span class="va">format</span>.<span class="at">colorize</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb30-16" title="16">        <span class="va">winston</span>.<span class="va">format</span>.<span class="at">simple</span>()</a>
<a class="sourceLine" id="cb30-17" title="17">      )</a>
<a class="sourceLine" id="cb30-18" title="18">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb30-19" title="19">  ]</a>
<a class="sourceLine" id="cb30-20" title="20"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="exceptions">Exceptions</h2>
<h3 id="handling-uncaught-exceptions-with-winston">Handling Uncaught Exceptions with winston</h3>
<p>With <code>winston</code>, it is possible to catch and log <code>uncaughtException</code> events from your process. With your own logger instance you can enable this behavior when it’s created or later on in your applications lifecycle:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">const</span> <span class="op">{</span> createLogger<span class="op">,</span> transports <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-2" title="2"></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="co">// Enable exception handling when you create your logger.</span></a>
<a class="sourceLine" id="cb31-4" title="4"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb31-5" title="5">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb31-6" title="6">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>) </a>
<a class="sourceLine" id="cb31-7" title="7">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb31-8" title="8">  <span class="dt">exceptionHandlers</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb31-9" title="9">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;exceptions.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb31-10" title="10">  ]</a>
<a class="sourceLine" id="cb31-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-12" title="12"></a>
<a class="sourceLine" id="cb31-13" title="13"><span class="co">// Or enable it later on by adding a transport or using `.exceptions.handle`</span></a>
<a class="sourceLine" id="cb31-14" title="14"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb31-15" title="15">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb31-16" title="16">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>) </a>
<a class="sourceLine" id="cb31-17" title="17">  ]</a>
<a class="sourceLine" id="cb31-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-19" title="19"></a>
<a class="sourceLine" id="cb31-20" title="20"><span class="co">// Call exceptions.handle with a transport to handle exceptions</span></a>
<a class="sourceLine" id="cb31-21" title="21"><span class="va">logger</span>.<span class="va">exceptions</span>.<span class="at">handle</span>(</a>
<a class="sourceLine" id="cb31-22" title="22">  <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;exceptions.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb31-23" title="23">)<span class="op">;</span></a></code></pre></div>
<p>If you want to use this feature with the default logger, simply call <code>.exceptions.handle()</code> with a transport instance.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb32-2" title="2"><span class="co">// You can add a separate exception logger by passing it to `.exceptions.handle`</span></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb32-4" title="4"><span class="va">winston</span>.<span class="va">exceptions</span>.<span class="at">handle</span>(</a>
<a class="sourceLine" id="cb32-5" title="5">  <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;path/to/exceptions.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb32-6" title="6">)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-7" title="7"></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="co">//</span></a>
<a class="sourceLine" id="cb32-9" title="9"><span class="co">// Alternatively you can set `handleExceptions` to true when adding transports</span></a>
<a class="sourceLine" id="cb32-10" title="10"><span class="co">// to winston.</span></a>
<a class="sourceLine" id="cb32-11" title="11"><span class="co">//</span></a>
<a class="sourceLine" id="cb32-12" title="12"><span class="va">winston</span>.<span class="at">add</span>(<span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb32-13" title="13">  <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;path/to/combined.log&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb32-14" title="14">  <span class="dt">handleExceptions</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb32-15" title="15"><span class="op">}</span>))<span class="op">;</span></a></code></pre></div>
<h3 id="to-exit-or-not-to-exit">To Exit or Not to Exit</h3>
<p>By default, winston will exit after logging an uncaughtException. If this is not the behavior you want, set <code>exitOnError = false</code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span> <span class="dt">exitOnError</span><span class="op">:</span> <span class="kw">false</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-2" title="2"></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="co">// or, like this:</span></a>
<a class="sourceLine" id="cb33-5" title="5"><span class="co">//</span></a>
<a class="sourceLine" id="cb33-6" title="6"><span class="va">logger</span>.<span class="at">exitOnError</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a></code></pre></div>
<p>When working with custom logger instances, you can pass in separate transports to the <code>exceptionHandlers</code> property or set <code>handleExceptions</code> on any transport.</p>
<h5 id="example-1">Example 1</h5>
<div class="sourceCode" id="cb34"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb34-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb34-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;path/to/combined.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb34-4" title="4">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb34-5" title="5">  <span class="dt">exceptionHandlers</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb34-6" title="6">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;path/to/exceptions.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb34-7" title="7">  ]</a>
<a class="sourceLine" id="cb34-8" title="8"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h5 id="example-2">Example 2</h5>
<div class="sourceCode" id="cb35"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb35-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb35-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb35-4" title="4">      <span class="dt">handleExceptions</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb35-5" title="5">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb35-6" title="6">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb35-7" title="7">  <span class="dt">exitOnError</span><span class="op">:</span> <span class="kw">false</span></a>
<a class="sourceLine" id="cb35-8" title="8"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The <code>exitOnError</code> option can also be a function to prevent exit on only certain types of errors:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">function</span> <span class="at">ignoreEpipe</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-2" title="2">  <span class="cf">return</span> <span class="va">err</span>.<span class="at">code</span> <span class="op">!==</span> <span class="st">&#39;EPIPE&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb36-4" title="4"></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span> <span class="dt">exitOnError</span><span class="op">:</span> ignoreEpipe <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-6" title="6"></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="co">//</span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="co">// or, like this:</span></a>
<a class="sourceLine" id="cb36-9" title="9"><span class="co">//</span></a>
<a class="sourceLine" id="cb36-10" title="10"><span class="va">logger</span>.<span class="at">exitOnError</span> <span class="op">=</span> ignoreEpipe<span class="op">;</span></a></code></pre></div>
<h2 id="rejections">Rejections</h2>
<h3 id="handling-uncaught-promise-rejections-with-winston">Handling Uncaught Promise Rejections with winston</h3>
<p>With <code>winston</code>, it is possible to catch and log <code>uncaughtRejection</code> events from your process. With your own logger instance you can enable this behavior when it’s created or later on in your applications lifecycle:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">const</span> <span class="op">{</span> createLogger<span class="op">,</span> transports <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-2" title="2"></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="co">// Enable rejection handling when you create your logger.</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb37-5" title="5">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb37-6" title="6">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>) </a>
<a class="sourceLine" id="cb37-7" title="7">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb37-8" title="8">  <span class="dt">rejectionHandlers</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb37-9" title="9">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;rejections.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb37-10" title="10">  ]</a>
<a class="sourceLine" id="cb37-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-12" title="12"></a>
<a class="sourceLine" id="cb37-13" title="13"><span class="co">// Or enable it later on by adding a transport or using `.rejections.handle`</span></a>
<a class="sourceLine" id="cb37-14" title="14"><span class="kw">const</span> logger <span class="op">=</span> <span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb37-15" title="15">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb37-16" title="16">    <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>) </a>
<a class="sourceLine" id="cb37-17" title="17">  ]</a>
<a class="sourceLine" id="cb37-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-19" title="19"></a>
<a class="sourceLine" id="cb37-20" title="20"><span class="co">// Call rejections.handle with a transport to handle rejections</span></a>
<a class="sourceLine" id="cb37-21" title="21"><span class="va">logger</span>.<span class="va">rejections</span>.<span class="at">handle</span>(</a>
<a class="sourceLine" id="cb37-22" title="22">  <span class="kw">new</span> <span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;rejections.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb37-23" title="23">)<span class="op">;</span></a></code></pre></div>
<p>If you want to use this feature with the default logger, simply call <code>.rejections.handle()</code> with a transport instance.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="co">// You can add a separate rejection logger by passing it to `.rejections.handle`</span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb38-4" title="4"><span class="va">winston</span>.<span class="va">rejections</span>.<span class="at">handle</span>(</a>
<a class="sourceLine" id="cb38-5" title="5">  <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;path/to/rejections.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb38-6" title="6">)<span class="op">;</span></a>
<a class="sourceLine" id="cb38-7" title="7"></a>
<a class="sourceLine" id="cb38-8" title="8"><span class="co">//</span></a>
<a class="sourceLine" id="cb38-9" title="9"><span class="co">// Alternatively you can set `handleRejections` to true when adding transports</span></a>
<a class="sourceLine" id="cb38-10" title="10"><span class="co">// to winston.</span></a>
<a class="sourceLine" id="cb38-11" title="11"><span class="co">//</span></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="va">winston</span>.<span class="at">add</span>(<span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb38-13" title="13">  <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;path/to/combined.log&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb38-14" title="14">  <span class="dt">handleRejections</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb38-15" title="15"><span class="op">}</span>))<span class="op">;</span></a></code></pre></div>
<h2 id="profiling">Profiling</h2>
<p>In addition to logging messages and metadata, <code>winston</code> also has a simple profiling mechanism implemented for any logger:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb39-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="co">// Start profile of &#39;test&#39;</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="va">logger</span>.<span class="at">profile</span>(<span class="st">&#39;test&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-5" title="5"></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="at">setTimeout</span>(<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb39-7" title="7">  <span class="co">//</span></a>
<a class="sourceLine" id="cb39-8" title="8">  <span class="co">// Stop profile of &#39;test&#39;. Logging will now take place:</span></a>
<a class="sourceLine" id="cb39-9" title="9">  <span class="co">//   &#39;17 Jan 21:00:00 - info: test duration=1000ms&#39;</span></a>
<a class="sourceLine" id="cb39-10" title="10">  <span class="co">//</span></a>
<a class="sourceLine" id="cb39-11" title="11">  <span class="va">logger</span>.<span class="at">profile</span>(<span class="st">&#39;test&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-12" title="12"><span class="op">},</span> <span class="dv">1000</span>)<span class="op">;</span></a></code></pre></div>
<p>Also you can start a timer and keep a reference that you can call `.done()`` on:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" title="1"> <span class="co">// Returns an object corresponding to a specific timing. When done</span></a>
<a class="sourceLine" id="cb40-2" title="2"> <span class="co">// is called the timer will finish and log the duration. e.g.:</span></a>
<a class="sourceLine" id="cb40-3" title="3"> <span class="co">//</span></a>
<a class="sourceLine" id="cb40-4" title="4"> <span class="kw">const</span> profiler <span class="op">=</span> <span class="va">logger</span>.<span class="at">startTimer</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb40-5" title="5"> <span class="at">setTimeout</span>(<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb40-6" title="6">   <span class="va">profiler</span>.<span class="at">done</span>(<span class="op">{</span> <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;Logging message&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb40-7" title="7"> <span class="op">},</span> <span class="dv">1000</span>)<span class="op">;</span></a></code></pre></div>
<p>All profile messages are set to ‘info’ level by default, and both message and metadata are optional. For individual profile messages, you can override the default log level by supplying a metadata object with a <code>level</code> property:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb41-1" title="1"><span class="va">logger</span>.<span class="at">profile</span>(<span class="st">&#39;test&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;debug&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="querying-logs">Querying Logs</h2>
<p><code>winston</code> supports querying of logs with Loggly-like options. <a href="https://www.loggly.com/docs/api-retrieving-data/">See Loggly Search API</a>. Specifically: <code>File</code>, <code>Couchdb</code>, <code>Redis</code>, <code>Loggly</code>, <code>Nssocket</code>, and <code>Http</code>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">const</span> options <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb42-2" title="2">  <span class="dt">from</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>() <span class="op">-</span> (<span class="dv">24</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">60</span> <span class="op">*</span> <span class="dv">1000</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb42-3" title="3">  <span class="dt">until</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb42-4" title="4">  <span class="dt">limit</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></a>
<a class="sourceLine" id="cb42-5" title="5">  <span class="dt">start</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb42-6" title="6">  <span class="dt">order</span><span class="op">:</span> <span class="st">&#39;desc&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb42-7" title="7">  <span class="dt">fields</span><span class="op">:</span> [<span class="st">&#39;message&#39;</span>]</a>
<a class="sourceLine" id="cb42-8" title="8"><span class="op">};</span></a>
<a class="sourceLine" id="cb42-9" title="9"></a>
<a class="sourceLine" id="cb42-10" title="10"><span class="co">//</span></a>
<a class="sourceLine" id="cb42-11" title="11"><span class="co">// Find items logged between today and yesterday.</span></a>
<a class="sourceLine" id="cb42-12" title="12"><span class="co">//</span></a>
<a class="sourceLine" id="cb42-13" title="13"><span class="va">logger</span>.<span class="at">query</span>(options<span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> results) <span class="op">{</span></a>
<a class="sourceLine" id="cb42-14" title="14">  <span class="cf">if</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb42-15" title="15">    <span class="co">/* </span><span class="al">TODO</span><span class="co">: handle me */</span></a>
<a class="sourceLine" id="cb42-16" title="16">    <span class="cf">throw</span> err<span class="op">;</span></a>
<a class="sourceLine" id="cb42-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb42-18" title="18"></a>
<a class="sourceLine" id="cb42-19" title="19">  <span class="va">console</span>.<span class="at">log</span>(results)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-20" title="20"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="streaming-logs">Streaming Logs</h2>
<p>Streaming allows you to stream your logs back from your chosen transport.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb43-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb43-2" title="2"><span class="co">// Start at the end.</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb43-4" title="4"><span class="va">winston</span>.<span class="at">stream</span>(<span class="op">{</span> <span class="dt">start</span><span class="op">:</span> <span class="dv">-1</span> <span class="op">}</span>).<span class="at">on</span>(<span class="st">&#39;log&#39;</span><span class="op">,</span> <span class="kw">function</span>(log) <span class="op">{</span></a>
<a class="sourceLine" id="cb43-5" title="5">  <span class="va">console</span>.<span class="at">log</span>(log)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="further-reading">Further Reading</h2>
<h3 id="using-the-default-logger">Using the Default Logger</h3>
<p>The default logger is accessible through the <code>winston</code> module directly. Any method that you could call on an instance of a logger is available on the default logger:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb44-1" title="1"><span class="kw">const</span> winston <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-2" title="2"></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="va">winston</span>.<span class="at">log</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="st">&#39;Hello distributed log files!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-4" title="4"><span class="va">winston</span>.<span class="at">info</span>(<span class="st">&#39;Hello again distributed logs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-5" title="5"></a>
<a class="sourceLine" id="cb44-6" title="6"><span class="va">winston</span>.<span class="at">level</span> <span class="op">=</span> <span class="st">&#39;debug&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="va">winston</span>.<span class="at">log</span>(<span class="st">&#39;debug&#39;</span><span class="op">,</span> <span class="st">&#39;Now my debug messages are written to console!&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>By default, no transports are set on the default logger. You must add or remove transports via the <code>add()</code> and <code>remove()</code> methods:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">const</span> files <span class="op">=</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;combined.log&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-2" title="2"><span class="kw">const</span> console <span class="op">=</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb45-3" title="3"></a>
<a class="sourceLine" id="cb45-4" title="4"><span class="va">winston</span>.<span class="at">add</span>(console)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-5" title="5"><span class="va">winston</span>.<span class="at">add</span>(files)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-6" title="6"><span class="va">winston</span>.<span class="at">remove</span>(console)<span class="op">;</span></a></code></pre></div>
<p>Or do it with one call to configure():</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb46-1" title="1"><span class="va">winston</span>.<span class="at">configure</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb46-2" title="2">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb46-3" title="3">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;somefile.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb46-4" title="4">  ]</a>
<a class="sourceLine" id="cb46-5" title="5"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>For more documentation about working with each individual transport supported by <code>winston</code> see the <a href="docs/transports.md"><code>winston</code> Transports</a> document.</p>
<h3 id="awaiting-logs-to-be-written-in-winston">Awaiting logs to be written in <code>winston</code></h3>
<p>Often it is useful to wait for your logs to be written before exiting the process. Each instance of <code>winston.Logger</code> is also a [Node.js stream]. A <code>finish</code> event will be raised when all logs have flushed to all transports after the stream has been ended.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">const</span> transport <span class="op">=</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb47-2" title="2"><span class="kw">const</span> logger <span class="op">=</span> <span class="va">winston</span>.<span class="at">createLogger</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb47-3" title="3">  <span class="dt">transports</span><span class="op">:</span> [transport]</a>
<a class="sourceLine" id="cb47-4" title="4"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-5" title="5"></a>
<a class="sourceLine" id="cb47-6" title="6"><span class="va">logger</span>.<span class="at">on</span>(<span class="st">&#39;finish&#39;</span><span class="op">,</span> <span class="kw">function</span> (info) <span class="op">{</span></a>
<a class="sourceLine" id="cb47-7" title="7">  <span class="co">// All `info` log messages has now been logged</span></a>
<a class="sourceLine" id="cb47-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-9" title="9"></a>
<a class="sourceLine" id="cb47-10" title="10"><span class="va">logger</span>.<span class="at">info</span>(<span class="st">&#39;CHILL WINSTON!&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">seriously</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-11" title="11"><span class="va">logger</span>.<span class="at">end</span>()<span class="op">;</span></a></code></pre></div>
<p>It is also worth mentioning that the logger also emits an ‘error’ event which you should handle or suppress if you don’t want unhandled exceptions:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb48-1" title="1"><span class="co">//</span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="co">// Handle errors</span></a>
<a class="sourceLine" id="cb48-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb48-4" title="4"><span class="va">logger</span>.<span class="at">on</span>(<span class="st">&#39;error&#39;</span><span class="op">,</span> <span class="kw">function</span> (err) <span class="op">{</span> <span class="co">/* Do Something */</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="working-with-multiple-loggers-in-winston">Working with multiple Loggers in winston</h3>
<p>Often in larger, more complex, applications it is necessary to have multiple logger instances with different settings. Each logger is responsible for a different feature area (or category). This is exposed in <code>winston</code> in two ways: through <code>winston.loggers</code> and instances of <code>winston.Container</code>. In fact, <code>winston.loggers</code> is just a predefined instance of <code>winston.Container</code>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">const</span> winston <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-2" title="2"><span class="kw">const</span> <span class="op">{</span> format <span class="op">}</span> <span class="op">=</span> winston<span class="op">;</span></a>
<a class="sourceLine" id="cb49-3" title="3"><span class="kw">const</span> <span class="op">{</span> combine<span class="op">,</span> label<span class="op">,</span> json <span class="op">}</span> <span class="op">=</span> format<span class="op">;</span></a>
<a class="sourceLine" id="cb49-4" title="4"></a>
<a class="sourceLine" id="cb49-5" title="5"><span class="co">//</span></a>
<a class="sourceLine" id="cb49-6" title="6"><span class="co">// Configure the logger for `category1`</span></a>
<a class="sourceLine" id="cb49-7" title="7"><span class="co">//</span></a>
<a class="sourceLine" id="cb49-8" title="8"><span class="va">winston</span>.<span class="va">loggers</span>.<span class="at">add</span>(<span class="st">&#39;category1&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb49-9" title="9">  <span class="dt">format</span><span class="op">:</span> <span class="at">combine</span>(</a>
<a class="sourceLine" id="cb49-10" title="10">    <span class="at">label</span>(<span class="op">{</span> <span class="dt">label</span><span class="op">:</span> <span class="st">&#39;category one&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb49-11" title="11">    <span class="at">json</span>()</a>
<a class="sourceLine" id="cb49-12" title="12">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb49-13" title="13">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb49-14" title="14">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;silly&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb49-15" title="15">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;somefile.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb49-16" title="16">  ]</a>
<a class="sourceLine" id="cb49-17" title="17"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-18" title="18"></a>
<a class="sourceLine" id="cb49-19" title="19"><span class="co">//</span></a>
<a class="sourceLine" id="cb49-20" title="20"><span class="co">// Configure the logger for `category2`</span></a>
<a class="sourceLine" id="cb49-21" title="21"><span class="co">//</span></a>
<a class="sourceLine" id="cb49-22" title="22"><span class="va">winston</span>.<span class="va">loggers</span>.<span class="at">add</span>(<span class="st">&#39;category2&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb49-23" title="23">  <span class="dt">format</span><span class="op">:</span> <span class="at">combine</span>(</a>
<a class="sourceLine" id="cb49-24" title="24">    <span class="at">label</span>(<span class="op">{</span> <span class="dt">label</span><span class="op">:</span> <span class="st">&#39;category two&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb49-25" title="25">    <span class="at">json</span>()</a>
<a class="sourceLine" id="cb49-26" title="26">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb49-27" title="27">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb49-28" title="28">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Http</span>(<span class="op">{</span> <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;localhost&#39;</span><span class="op">,</span> <span class="dt">port</span><span class="op">:</span><span class="dv">8080</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb49-29" title="29">  ]</a>
<a class="sourceLine" id="cb49-30" title="30"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Now that your loggers are setup, you can require winston <em>in any file in your application</em> and access these pre-configured loggers:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">const</span> winston <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb50-2" title="2"></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb50-4" title="4"><span class="co">// Grab your preconfigured loggers</span></a>
<a class="sourceLine" id="cb50-5" title="5"><span class="co">//</span></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="kw">const</span> category1 <span class="op">=</span> <span class="va">winston</span>.<span class="va">loggers</span>.<span class="at">get</span>(<span class="st">&#39;category1&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb50-7" title="7"><span class="kw">const</span> category2 <span class="op">=</span> <span class="va">winston</span>.<span class="va">loggers</span>.<span class="at">get</span>(<span class="st">&#39;category2&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb50-8" title="8"></a>
<a class="sourceLine" id="cb50-9" title="9"><span class="va">category1</span>.<span class="at">info</span>(<span class="st">&#39;logging to file and console transports&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb50-10" title="10"><span class="va">category2</span>.<span class="at">info</span>(<span class="st">&#39;logging to http transport&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>If you prefer to manage the <code>Container</code> yourself, you can simply instantiate one:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">const</span> winston <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;winston&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb51-2" title="2"><span class="kw">const</span> <span class="op">{</span> format <span class="op">}</span> <span class="op">=</span> winston<span class="op">;</span></a>
<a class="sourceLine" id="cb51-3" title="3"><span class="kw">const</span> <span class="op">{</span> combine<span class="op">,</span> label<span class="op">,</span> json <span class="op">}</span> <span class="op">=</span> format<span class="op">;</span></a>
<a class="sourceLine" id="cb51-4" title="4"></a>
<a class="sourceLine" id="cb51-5" title="5"><span class="kw">const</span> container <span class="op">=</span> <span class="kw">new</span> <span class="va">winston</span>.<span class="at">Container</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb51-6" title="6"></a>
<a class="sourceLine" id="cb51-7" title="7"><span class="va">container</span>.<span class="at">add</span>(<span class="st">&#39;category1&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb51-8" title="8">  <span class="dt">format</span><span class="op">:</span> <span class="at">combine</span>(</a>
<a class="sourceLine" id="cb51-9" title="9">    <span class="at">label</span>(<span class="op">{</span> <span class="dt">label</span><span class="op">:</span> <span class="st">&#39;category one&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb51-10" title="10">    <span class="at">json</span>()</a>
<a class="sourceLine" id="cb51-11" title="11">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb51-12" title="12">  <span class="dt">transports</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb51-13" title="13">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">Console</span>(<span class="op">{</span> <span class="dt">level</span><span class="op">:</span> <span class="st">&#39;silly&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb51-14" title="14">    <span class="kw">new</span> <span class="va">winston</span>.<span class="va">transports</span>.<span class="at">File</span>(<span class="op">{</span> <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;somefile.log&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb51-15" title="15">  ]</a>
<a class="sourceLine" id="cb51-16" title="16"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb51-17" title="17"></a>
<a class="sourceLine" id="cb51-18" title="18"><span class="kw">const</span> category1 <span class="op">=</span> <span class="va">container</span>.<span class="at">get</span>(<span class="st">&#39;category1&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb51-19" title="19"><span class="va">category1</span>.<span class="at">info</span>(<span class="st">&#39;logging to file and console transports&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="installation">Installation</h2>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" title="1"><span class="ex">npm</span> install winston</a></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb53-1" title="1"><span class="ex">yarn</span> add winston</a></code></pre></div>
<h2 id="run-tests">Run Tests</h2>
<p>All of the winston tests are written with <a href="https://mochajs.org"><code>mocha</code></a>, <a href="https://github.com/istanbuljs/nyc"><code>nyc</code></a>, and <a href="https://github.com/bigpipe/assume"><code>assume</code></a>. They can be run with <code>npm</code>.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" title="1"><span class="ex">npm</span> test</a></code></pre></div>
<h4 id="author-charlie-robbins">Author: <a href="http://github.com/indexzero">Charlie Robbins</a></h4>
<h4 id="contributors-jarrett-cruger-david-hyde-chris-alderson">Contributors: <a href="https://github.com/jcrugzz">Jarrett Cruger</a>, <a href="https://github.com/dabh">David Hyde</a>, <a href="https://github.com/chrisalderson">Chris Alderson</a></h4>
</body>
</html>
