<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="python-searchengine">python-searchengine</h1>
<p>Simple search engine implementation in Python for illustrative purposes to go with <a href="https://bart.degoe.de/building-a-full-text-search-engine-150-lines-of-code/">this blog post</a>.</p>
<h2 id="requirements">Requirements</h2>
<p>Python 3.7 or greater.</p>
<h2 id="usage">Usage</h2>
<p>Run from the command line (this program will exit afterwards):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">pip</span> install -r requirements.txt</a>
<a class="sourceLine" id="cb1-2" title="2">$ <span class="ex">python</span> run.py</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="ex">Parsing</span> XML took 701.6900851726532 seconds</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="ex">index_documents</span> took 701.6901140213013 seconds</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ex">Index</span> contains 6274026 documents</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="ex">search</span> took 0.2980232238769531 milliseconds</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="ex">search</span> took 0.07561087608337402 seconds</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="ex">search</span> took 0.1850128173828125 milliseconds</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="ex">search</span> took 0.2769007682800293 seconds</a></code></pre></div>
<p>Run from interactive console:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1">Python <span class="dv">3</span>.<span class="fl">8.0</span> (v3.<span class="fl">8.0</span>:fa919fdf25, Oct <span class="dv">14</span> <span class="dv">2019</span>, <span class="dv">10</span>:<span class="dv">23</span>:<span class="dv">27</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">Type <span class="st">&#39;copyright&#39;</span>, <span class="st">&#39;credits&#39;</span> <span class="kw">or</span> <span class="st">&#39;license&#39;</span> <span class="cf">for</span> more information</a>
<a class="sourceLine" id="cb2-3" title="3">IPython <span class="dv">7</span>.<span class="fl">17.0</span> <span class="op">--</span> An enhanced Interactive Python. Type <span class="st">&#39;?&#39;</span> <span class="cf">for</span> <span class="bu">help</span>.</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">In [<span class="dv">1</span>]: run run.py</a>
<a class="sourceLine" id="cb2-6" title="6">Parsing XML took <span class="fl">701.6900851726532</span> seconds</a>
<a class="sourceLine" id="cb2-7" title="7">index_documents took <span class="fl">701.6901140213013</span> seconds</a>
<a class="sourceLine" id="cb2-8" title="8">Index contains <span class="dv">6274026</span> documents</a>
<a class="sourceLine" id="cb2-9" title="9">search took <span class="fl">0.2980232238769531</span> milliseconds</a>
<a class="sourceLine" id="cb2-10" title="10">search took <span class="fl">0.07561087608337402</span> seconds</a>
<a class="sourceLine" id="cb2-11" title="11">search took <span class="fl">0.1850128173828125</span> milliseconds</a>
<a class="sourceLine" id="cb2-12" title="12">search took <span class="fl">0.2769007682800293</span> seconds</a>
<a class="sourceLine" id="cb2-13" title="13"></a>
<a class="sourceLine" id="cb2-14" title="14">In [<span class="dv">2</span>]: index.search(<span class="st">&#39;python programming LanGuAGe&#39;&#39;, rank=True)[:5]</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="st">search took 0.4620552062988281 milliseconds</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="st">Out[2]:</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="st">[(Abstract(ID=1018719, title=&#39;</span>Wikipedia: Python syntax <span class="kw">and</span> semantics<span class="st">&#39;, abstract=&#39;</span>The syntax of the Python programming language <span class="kw">is</span> the <span class="bu">set</span> of rules that defines how a Python program will be written <span class="kw">and</span> interpreted (by both the runtime system <span class="kw">and</span> by human readers). The Python language has many similarities to Perl, C, <span class="kw">and</span> Java.<span class="st">&#39;, url=&#39;</span>https:<span class="op">//</span>en.wikipedia.org<span class="op">/</span>wiki<span class="op">/</span>Python_syntax_and_semantics<span class="st">&#39;),</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="st">  25.91623091682463),</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="st"> (Abstract(ID=2541116, title=&#39;</span>Wikipedia: History of Python<span class="st">&#39;, abstract=&quot;The programming language Python was conceived in the late 1980s, and its implementation was started in December 1989 by Guido van Rossum at CWI in the Netherlands as a successor to ABC capable of exception handling and interfacing with the Amoeba operating system. Van Rossum is Python&#39;</span>s principal author, <span class="kw">and</span> his continuing central role <span class="kw">in</span> deciding the direction of Python <span class="kw">is</span> reflected <span class="kw">in</span> the title given to him by the Python community, Benevolent Dictator <span class="cf">for</span> Life (BDFL).<span class="st">&quot;, url=&#39;https://en.wikipedia.org/wiki/History_of_Python&#39;),</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="st">  25.474817047863255),</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="st"> (Abstract(ID=4723564, title=&#39;Wikipedia: Zen of Python&#39;, abstract=&#39;The Zen of Python is a collection of 19 &quot;</span>guiding principles<span class="st">&quot; for writing computer programs that influence the design of the Python programming language. Software engineer Tim Peters wrote this set of principles and posted it on the Python mailing list in 1999.&#39;, url=&#39;https://en.wikipedia.org/wiki/Zen_of_Python&#39;),</span></a>
<a class="sourceLine" id="cb2-22" title="22"><span class="st">  23.697300894161387),</span></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="st"> (Abstract(ID=2906166, title=&#39;Wikipedia: Core Python Programming&#39;, abstract=&#39;Core Python Programming is a textbook on the Python programming language, written by Wesley J. Chun.&#39;, url=&#39;https://en.wikipedia.org/wiki/Core_Python_Programming&#39;),</span></a>
<a class="sourceLine" id="cb2-24" title="24"><span class="st">  21.919784740459527),</span></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="st"> (Abstract(ID=2131166, title=&#39;Wikipedia: Comparison of programming languages (object-oriented programming)&#39;, abstract=&#39;This comparison of programming languages compares how object-oriented programming languages such as C++, Java, Smalltalk, Object Pascal, Perl, Python, and others manipulate data structures.&#39;, url=&#39;https://en.wikipedia.org/wiki/Comparison_of_programming_languages_(object-oriented_programming)&#39;),</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="st">  20.407894768933833)]</span></a></code></pre></div>
<h2 id="using-a-smaller-data-set">Using a smaller data set</h2>
<p>The code will download the complete set of 6.7m Wikipedia abstracts. If you want to play around with a smaller data set, just pick one of the numbered gzip files from https://dumps.wikimedia.org/enwiki/latest/ and change the URL in <a href="https://github.com/bartdegoede/python-searchengine/blob/master/download.py#L5">download.py</a>.</p>
</body>
</html>
