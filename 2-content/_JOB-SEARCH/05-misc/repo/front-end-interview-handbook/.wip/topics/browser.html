<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>browser</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="browser">Browser</h1>
<h2 id="glossary">Glossary</h2>
<ul>
<li><strong>BOM</strong> - The Browser Object Model (BOM) is a browser-specific convention referring to all the objects exposed by the web browser. The <code>window</code> object is one of them.</li>
<li><strong>CSSOM</strong> - CSS Object Model.</li>
<li><strong>DOM</strong> - The Document Object Model (DOM) is a cross-platform and language-independent convention for representing and interacting with objects in HTML, XHTML, and XML documents.</li>
<li><strong>Reflow</strong> - When the changes affect document contents or structure, or element position, a reflow (or relayout) happens.</li>
<li><strong>Repaint</strong> - When changing element styles which don’t affect the element’s position on a page (such as <code>background-color</code>, <code>border-color</code>, <code>visibility</code>), the browser just repaints the element again with the new styles applied (that means a “repaint” or “restyle” is happening).</li>
<li><strong>Composite</strong> - TODO</li>
</ul>
<h2 id="rendering">Rendering</h2>
<p>High level flow of how browsers render a webpage:</p>
<ol type="1">
<li>DOM</li>
</ol>
<ul>
<li>The DOM (Document Object Model) is formed from the HTML that is received from a server.</li>
<li>Characters -&gt; Tokens -&gt; Nodes -&gt; DOM.</li>
<li>DOM construction is incremental.</li>
<li>CSS and JS are requested as the respective <code>&lt;link&gt;</code> and <code>&lt;script&gt;</code> tags are encountered.</li>
</ul>
<ol type="1">
<li>CSSOM</li>
</ol>
<ul>
<li>Styles are loaded and parsed, forming the CSSOM (CSS Object Model).</li>
<li>Characters -&gt; Tokens -&gt; Nodes -&gt; CSSOM.</li>
<li>CSSOM construction is not incremental.</li>
<li>Browser blocks page rendering until it receives and processes all the CSS.</li>
<li>CSS is render blocking.</li>
</ul>
<ol type="1">
<li>Render Tree</li>
</ol>
<ul>
<li>On top of DOM and CSSOM, a render tree is created, which is a set of objects to be rendered. Render tree reflects the DOM structure except for invisible elements (like the
<head>
tag or elements that have <code>display: none</code>; set). Each text string is represented in the rendering tree as a separate renderer. Each of the rendering objects contains its corresponding DOM object (or a text block) plus the calculated styles. In other words, the render tree describes the visual representation of a DOM.</li>
</ul>
<ol type="1">
<li>Layout</li>
</ol>
<ul>
<li>For each render tree element, its coordinates are calculated, which is called “layout”. Browsers use a flow method which only required one pass to layout all the elements (tables require more than one pass).</li>
</ul>
<ol type="1">
<li>Painting</li>
</ol>
<ul>
<li>Finally, this gets actually displayed in a browser window, a process called “painting”.</li>
</ul>
<h6 id="references">References</h6>
<ul>
<li>http://taligarsiel.com/Projects/howbrowserswork1.htm</li>
<li>https://medium.freecodecamp.org/its-not-dark-magic-pulling-back-the-curtains-from-your-stylesheets-c8d677fa21b2</li>
</ul>
<h2 id="repaint">Repaint</h2>
<p>When changing element styles which don’t affect the element’s position on a page (such as <code>background-color</code>, <code>border-color</code>, <code>visibility</code>), the browser just repaints the element again with the new styles applied (that means a “repaint” or “restyle” is happening).</p>
<h2 id="reflow">Reflow</h2>
<p>When the changes affect document contents or structure, or element position, a reflow (or relayout) happens. These changes are usually triggered by: - DOM manipulation (element addition, deletion, altering, or changing element order) - Contents changes, including text changes in form fields - Calculation or altering of CSS properties - Adding or removing style sheets - Changing the “class” attribute - Browser window manipulation (resizing, scrolling); Pseudo-class activation (<code>:hover</code>)</p>
<h4 id="references-1">References</h4>
<ul>
<li><a href="http://taligarsiel.com/Projects/howbrowserswork1.htm">How Browsers Work</a></li>
<li><a href="http://frontendbabel.info/articles/webpage-rendering-101/">What Every Frontend Developer Should Know About Webpage Rendering</a></li>
<li><a href="http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/">Rendering: repaint, reflow/relayout, restyle</a></li>
<li><a href="https://hacks.mozilla.org/2017/09/building-the-dom-faster-speculative-parsing-async-defer-and-preload/">Building the DOM faster: speculative parsing, async, defer and preload</a></li>
</ul>
</body>
</html>
