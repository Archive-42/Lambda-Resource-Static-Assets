<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ONNXOpCoverage</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="tracking-why-operators-are-not-covered">Tracking why operators are not covered</h1>
<p><a href="https://github.com/onnx/onnx-caffe2/blob/master/tests/onnx_backend_test.py">ONNX backend test script</a> reports the coverage on the operators and attributes. But we have various of reasons for the missing test coverage on operators. This doc keeps tracking why operators are not covered by the testcases.</p>
<ul>
<li>ğŸ’š The ONNX operator can map to a Caffe2 operator.</li>
<li>ğŸ’› The solution is not perfect/finished, for example, the operator can map to a combination of Caffe2 operators.</li>
<li>ğŸ’” Hard to find a solution with existing Caffe2 operators.</li>
</ul>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 29%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th style="text-align: center;">Test Coverage</th>
<th style="text-align: center;">PyTorch</th>
<th style="text-align: center;">Caffe2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Abs</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Acos</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Add</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>And</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">Support int tensor, but no bool tensor</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>ArgMax</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>ArgMin</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Asin</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Atan</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>AveragePool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>BatchNormalization</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Cast</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”Need extendtion</td>
</tr>
<tr class="even">
<td>Ceil</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Clip</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Concat</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Constant</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’›Special handling</td>
</tr>
<tr class="even">
<td>Conv</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>ConvTranspose</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK, under enhancement</td>
</tr>
<tr class="even">
<td>Cos</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>DepthToSpace</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>Div</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Dropout</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Elu</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Equal</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Exp</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Flatten</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Floor</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>GRU</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’š</td>
</tr>
<tr class="even">
<td>Gather</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’›C2 only support axis=0 or 1, under development</td>
</tr>
<tr class="odd">
<td>Gemm</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’›C2 use FC or MatMul + Add</td>
</tr>
<tr class="even">
<td>GlobalAveragePool</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No direct mapping</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>GlobalLpPool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No mapping yet</td>
</tr>
<tr class="even">
<td>GlobalMaxPool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Greater</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>HardSigmoid</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>Hardmax</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>InstanceNormalization</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>LRN</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>LSTM</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>LeakyRelu</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Less</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Log</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>LogSoftmax</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šNo op, translated in onnx-caffe2</td>
</tr>
<tr class="odd">
<td>LpNormalization</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”ONNX and C2 have different definition</td>
</tr>
<tr class="even">
<td>LpPool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šShould be LpPool, no tests</td>
</tr>
<tr class="odd">
<td>MatMul</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Max</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>MaxPool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>MaxRoiPool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No mapping yet</td>
</tr>
<tr class="odd">
<td>Mean</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK, need broadcasting support</td>
</tr>
<tr class="even">
<td>Min</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK, need broadcasting support</td>
</tr>
<tr class="odd">
<td>Mul</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK, need broadcasting support</td>
</tr>
<tr class="even">
<td>Multinomial</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’”no op</td>
</tr>
<tr class="odd">
<td>Neg</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Not</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Or</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>PRelu</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’›Need to enhance C2 implementation</td>
</tr>
<tr class="odd">
<td>Pad</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Pow</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>RNN</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>RandomNormal</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>RandomNormalLike</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>RandomUniform</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>RandomUniformLike</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>Reciprocal</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šUse Pow to implement</td>
</tr>
<tr class="odd">
<td>ReduceL1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>ReduceL2</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>ReduceLogSum</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>ReduceLogSumExp</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>ReduceMax</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>ReduceMean</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>ReduceMin</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>ReduceProd</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>ReduceSum</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>ReduceSumSquare</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>Relu</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Reshape</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Selu</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Sigmoid</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Sin</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Size</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Slice</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’”ScatterAssign + Cast, very hacky implementation, Slice in C2 only supports one dimension</td>
</tr>
<tr class="even">
<td>Softmax</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’”Axis and dim has different semantics</td>
</tr>
<tr class="odd">
<td>Softplus</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Softsign</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>SpaceToDepth</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>Split</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Sqrt</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Squeeze</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Sub</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Sum</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK, need broadcasting support</td>
</tr>
<tr class="odd">
<td>Tanh</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Tile</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’›OK, need some enhance</td>
</tr>
<tr class="odd">
<td>TopK</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>Transpose</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">OK</td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>Upsample</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’›No bilinear</td>
</tr>
<tr class="even">
<td>Xor</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>experimental ATen</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>experimental Affine</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>experimental ConstantFill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>experimental Crop</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>experimental FC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>experimental GRUUnit</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK, no tests</td>
</tr>
<tr class="odd">
<td>experimental GivenTensorFill</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="even">
<td>experimental Identity</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>experimental ImageScaler</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>experimental MeanVarianceNormalization</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="odd">
<td>experimental ParametricSoftplus</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>experimental Scale</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
<tr class="odd">
<td>experimental ScaledTanh</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’”No op</td>
</tr>
<tr class="even">
<td>experimental ThresholdedRelu</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">ğŸ’šOK</td>
</tr>
</tbody>
</table>
</body>
</html>
