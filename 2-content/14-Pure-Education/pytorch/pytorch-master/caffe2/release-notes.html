<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>release-notes</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="caffe2-v0.7.0-release-notes">Caffe2 v0.7.0 Release Notes</h1>
<h2 id="installation">Installation</h2>
<p>This build is confirmed for:</p>
<ul>
<li>Ubuntu 14.04</li>
<li>Ubuntu 16.06</li>
</ul>
<h3 id="required-dependencies">Required Dependencies</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">sudo</span> apt-get update</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">sudo</span> apt-get install -y --no-install-recommends \</a>
<a class="sourceLine" id="cb1-3" title="3">      build-essential \</a>
<a class="sourceLine" id="cb1-4" title="4">      cmake \</a>
<a class="sourceLine" id="cb1-5" title="5">      git \</a>
<a class="sourceLine" id="cb1-6" title="6">      libgoogle-glog-dev \</a>
<a class="sourceLine" id="cb1-7" title="7">      libprotobuf-dev \</a>
<a class="sourceLine" id="cb1-8" title="8">      protobuf-compiler \</a>
<a class="sourceLine" id="cb1-9" title="9">      python-dev \</a>
<a class="sourceLine" id="cb1-10" title="10">      python-pip</a>
<a class="sourceLine" id="cb1-11" title="11"><span class="fu">sudo</span> pip install numpy protobuf</a></code></pre></div>
<h3 id="optional-gpu-support">Optional GPU Support</h3>
<p>If you plan to use GPU instead of CPU only, then you should install NVIDIA CUDA and cuDNN, a GPU-accelerated library of primitives for deep neural networks. <a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation">NVIDIA’s detailed instructions</a> or if you’re feeling lucky try the quick install set of commands below.</p>
<p><strong>Update your graphics card drivers first!</strong> Otherwise you may suffer from a wide range of difficult to diagnose errors.</p>
<p><strong>For Ubuntu 14.04</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install wget -y --no-install-recommends</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="fu">wget</span> <span class="st">&quot;http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1404/x86_64/cuda-repo-ubuntu1404_8.0.61-1_amd64.deb&quot;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="fu">sudo</span> dpkg -i cuda-repo-ubuntu1404_8.0.61-1_amd64.deb</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="fu">sudo</span> apt-get update</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="fu">sudo</span> apt-get install cuda</a></code></pre></div>
<p><strong>For Ubuntu 16.04</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="fu">sudo</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt-get install wget -y --no-install-recommends</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="fu">wget</span> <span class="st">&quot;http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_8.0.61-1_amd64.deb&quot;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="fu">sudo</span> dpkg -i cuda-repo-ubuntu1604_8.0.61-1_amd64.deb</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="fu">sudo</span> apt-get update</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="fu">sudo</span> apt-get install cuda</a></code></pre></div>
<h4 id="install-cudnn-all-ubuntu-versions">Install cuDNN (all Ubuntu versions)</h4>
<pre><code>CUDNN_URL=&quot;http://developer.download.nvidia.com/compute/redist/cudnn/v5.1/cudnn-8.0-linux-x64-v5.1.tgz&quot;
wget ${CUDNN_URL}
sudo tar -xzf cudnn-8.0-linux-x64-v5.1.tgz -C /usr/local
rm cudnn-8.0-linux-x64-v5.1.tgz &amp;&amp; sudo ldconfig</code></pre>
<h3 id="optional-dependencies">Optional Dependencies</h3>
<blockquote>
<p>Note <code>libgflags2</code> is for Ubuntu 14.04. <code>libgflags-dev</code> is for Ubuntu 16.04.</p>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># for Ubuntu 14.04</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="fu">sudo</span> apt-get install -y --no-install-recommends libgflags2</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># for Ubuntu 16.04</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="fu">sudo</span> apt-get install -y --no-install-recommends libgflags-dev</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># for both Ubuntu 14.04 and 16.04</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="fu">sudo</span> apt-get install -y --no-install-recommends \</a>
<a class="sourceLine" id="cb7-3" title="3">      libgtest-dev \</a>
<a class="sourceLine" id="cb7-4" title="4">      libiomp-dev \</a>
<a class="sourceLine" id="cb7-5" title="5">      libleveldb-dev \</a>
<a class="sourceLine" id="cb7-6" title="6">      liblmdb-dev \</a>
<a class="sourceLine" id="cb7-7" title="7">      libopencv-dev \</a>
<a class="sourceLine" id="cb7-8" title="8">      libopenmpi-dev \</a>
<a class="sourceLine" id="cb7-9" title="9">      libsnappy-dev \</a>
<a class="sourceLine" id="cb7-10" title="10">      openmpi-bin \</a>
<a class="sourceLine" id="cb7-11" title="11">      openmpi-doc \</a>
<a class="sourceLine" id="cb7-12" title="12">      python-pydot</a>
<a class="sourceLine" id="cb7-13" title="13"><span class="fu">sudo</span> pip install \</a>
<a class="sourceLine" id="cb7-14" title="14">      flask \</a>
<a class="sourceLine" id="cb7-15" title="15">      graphviz \</a>
<a class="sourceLine" id="cb7-16" title="16">      hypothesis \</a>
<a class="sourceLine" id="cb7-17" title="17">      jupyter \</a>
<a class="sourceLine" id="cb7-18" title="18">      matplotlib \</a>
<a class="sourceLine" id="cb7-19" title="19">      pydot python-nvd3 \</a>
<a class="sourceLine" id="cb7-20" title="20">      pyyaml \</a>
<a class="sourceLine" id="cb7-21" title="21">      requests \</a>
<a class="sourceLine" id="cb7-22" title="22">      scikit-image \</a>
<a class="sourceLine" id="cb7-23" title="23">      scipy \</a>
<a class="sourceLine" id="cb7-24" title="24">      setuptools \</a>
<a class="sourceLine" id="cb7-25" title="25">      tornado</a></code></pre></div>
<h3 id="clone-build">Clone &amp; Build</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">git</span> clone --recursive https://github.com/caffe2/caffe2.git <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> caffe2</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="fu">make</span> <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> build <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> make install</a>
<a class="sourceLine" id="cb8-3" title="3"><span class="ex">python</span> -c <span class="st">&#39;from caffe2.python import core&#39;</span> <span class="op">2&gt;</span>/dev/null <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> <span class="st">&quot;Success&quot;</span> <span class="kw">||</span> <span class="bu">echo</span> <span class="st">&quot;Failure&quot;</span></a></code></pre></div>
<p>Run this command below to test if your GPU build was a success. You will get a test output either way, but it will warn you at the top of the output if CPU was used instead along with other errors like missing libraries.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="ex">python</span> -m caffe2.python.operator_test.relu_op_test</a></code></pre></div>
<h3 id="environment-variables">Environment Variables</h3>
<p>These environment variables may assist you depending on your current configuration. When using the install instructions above on the AWS Deep Learning AMI you don’t need to set these variables. However, our Docker scripts built on Ubuntu-14.04 or NVIDIA’s CUDA images seem to benefit from having these set. If you ran into problems with the build tests above then these are good things to check. Echo them first and see what you have and possibly append or replace with these directories. Also visit the troubleshooting section below.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="bu">echo</span> <span class="va">$PYTHONPATH</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co"># export PYTHONPATH=/usr/local:$PYTHONPATH</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co"># export PYTHONPATH=$PYTHONPATH:/home/ubuntu/caffe2/build</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="bu">echo</span> <span class="va">$LD_LIBRARY_PATH</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co"># export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH</span></a></code></pre></div>
<h3 id="setting-up-tutorials-jupyter-server">Setting Up Tutorials &amp; Jupyter Server</h3>
<p>If you’re running this all on a cloud computer, you probably won’t have a UI or way to view the IPython notebooks by default. Typically, you would launch them locally with <code>ipython notebook</code> and you would see a localhost:8888 webpage pop up with the directory of notebooks running. The following example will show you how to launch the Jupyter server and connect to remotely via an SSH tunnel.</p>
<p>First configure your cloud server to accept port 8889, or whatever you want, but change the port in the following commands. On AWS you accomplish this by adding a rule to your server’s security group allowing a TCP inbound on port 8889. Otherwise you would adjust iptables for this.</p>
<p>Next you launch the Juypter server.</p>
<pre><code>jupyter notebook --no-browser --port=8889</code></pre>
<p>Then create the SSH tunnel. This will pass the cloud server’s Jupyter instance to your localhost 8888 port for you to use locally. The example below is templated after how you would connect AWS, where <code>your-public-cert.pem</code> is your own public certificate and <code>ubuntu@super-rad-GPU-instance.compute-1.amazonaws.com</code> is your login to your cloud server. You can easily grab this on AWS by going to Instances &gt; Connect and copy the part after <code>ssh</code> and swap that out in the command below.</p>
<pre><code>ssh -N -f -L localhost:8888:localhost:8889 -i &quot;your-public-cert.pem&quot; ubuntu@super-rad-GPU-instance.compute-1.amazonaws.com</code></pre>
<h3 id="troubleshooting">Troubleshooting</h3>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="header">
<th>Python errors</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Python version</td>
<td><a href="https://www.python.org/">Python</a> is core to run Caffe2. We currently require <a href="https://www.python.org/download/releases/2.7/">Python2.7</a>. <em>Ubuntu 14.04 and greater have Python built in by default</em>, and that can be used to run Caffe2. To check your version: <code>python --version</code></td>
</tr>
<tr class="even">
<td>Solution</td>
<td>If you want the developer version of python, you could install the <code>dev</code> package for Python: <code>sudo apt-get install python-dev</code></td>
</tr>
<tr class="odd">
<td>Python environment</td>
<td>You may have another version of Python installed or need to support Python version 3 for other projects.</td>
</tr>
<tr class="even">
<td>Solution</td>
<td>Try virtualenv or Anaconda. The <a href="https://www.continuum.io/downloads">Anaconda</a> platform provides a single script to install many of the necessary packages for Caffe2, including Python. Using Anaconda is outside the scope of these instructions, but if you are interested, it may work well for you.</td>
</tr>
<tr class="odd">
<td>pip version</td>
<td>If you plan to use Python with Caffe2 then you need pip.</td>
</tr>
<tr class="even">
<td>Solution</td>
<td><code>sudo apt-get install python-pip</code> and also try using pip2 instead of pip.</td>
</tr>
<tr class="odd">
<td>“AttributeError: ‘module’ object has no attribute ‘MakeArgument’”</td>
<td>Occurs when calling <code>core.CreateOperator</code></td>
</tr>
<tr class="even">
<td>Solution</td>
<td>Check your install directory (<code>/usr/local/</code>), and remove the folder <code>/caffe2/python/utils</code></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="header">
<th>Building from source</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>OS version</td>
<td>Caffe2 requires Ubuntu 14.04 or greater.</td>
</tr>
<tr class="even">
<td>git</td>
<td>While you can download the Caffe2 source code and submodules directly from GitHub as a zip, using git makes it much easier.</td>
</tr>
<tr class="odd">
<td>Solution</td>
<td><code>sudo apt-get install git</code></td>
</tr>
<tr class="even">
<td>protobuf</td>
<td>You may experience an error related to protobuf during the make step.</td>
</tr>
<tr class="odd">
<td>Solution</td>
<td>Make sure you’ve installed protobuf in <strong>both</strong> of these two ways: <code>sudo apt-get install libprotobuf-dev protobuf-compiler &amp;&amp; sudo pip install protobuf</code></td>
</tr>
<tr class="even">
<td>libgflags2 error</td>
<td>This optional dependency is for Ubuntu 14.04.</td>
</tr>
<tr class="odd">
<td>Solution</td>
<td>Use <code>apt-get install libgflags-dev</code> for Ubuntu 16.04.</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="header">
<th>GPU Support</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GPU errors</td>
<td>Unsupported GPU or wrong version</td>
</tr>
<tr class="even">
<td>Solution</td>
<td>You need to know the specific <code>deb</code> for your version of Linux. <code>sudo dpkg -i| |cuda-repo-&lt;distro&gt;_&lt;version&gt;_&lt;architecture&gt;.deb</code> Refer to NVIDIA’s <a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation">installation guide</a>.</td>
</tr>
<tr class="odd">
<td>Build issues</td>
<td>Be warned that installing CUDA and cuDNN will increase the size of your build by about 4GB, so plan to have at least 12GB for your Ubuntu disk size.</td>
</tr>
</tbody>
</table>
</body>
</html>
